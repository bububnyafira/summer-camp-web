{"version":3,"file":"index-DsOgMEE-.mjs","sources":["../../../admin/src/constants/plugin.ts","../../../admin/src/components/InjectionZone.tsx","../../../admin/src/constants/attributes.ts","../../../admin/src/constants/collections.ts","../../../admin/src/pages/EditView/utils/data.ts","../../../admin/src/pages/EditView/utils/forms.ts","../../../admin/src/services/api.ts","../../../admin/src/services/documents.ts","../../../admin/src/utils/api.ts","../../../admin/src/utils/validation.ts","../../../admin/src/services/init.ts","../../../admin/src/hooks/useContentTypeSchema.ts","../../../admin/src/constants/hooks.ts","../../../admin/src/services/contentTypes.ts","../../../admin/src/utils/attributes.ts","../../../admin/src/hooks/useDocumentLayout.ts","../../../admin/src/hooks/useDocument.ts","../../../admin/src/features/DocumentContext.tsx","../../../admin/src/features/DocumentRBAC.tsx","../../../admin/src/utils/translations.ts","../../../admin/src/hooks/useDocumentActions.ts","../../../admin/src/history/routes.tsx","../../../admin/src/preview/routes.tsx","../../../admin/src/router.tsx","../../../admin/src/pages/EditView/components/DocumentActions.tsx","../../../admin/src/components/RelativeTime.tsx","../../../admin/src/utils/users.ts","../../../admin/src/utils/strings.ts","../../../admin/src/pages/EditView/components/DocumentStatus.tsx","../../../admin/src/pages/EditView/components/Header.tsx","../../../admin/src/pages/EditView/components/Panels.tsx","../../../admin/src/pages/ListView/components/BulkActions/ConfirmBulkActionDialog.tsx","../../../admin/src/pages/ListView/components/BulkActions/PublishAction.tsx","../../../admin/src/pages/ListView/components/BulkActions/Actions.tsx","../../../admin/src/pages/ListView/components/AutoCloneFailureModal.tsx","../../../admin/src/pages/ListView/components/TableActions.tsx","../../../admin/src/content-manager.ts","../../../admin/src/history/components/HistoryAction.tsx","../../../admin/src/history/index.ts","../../../admin/src/modules/app.ts","../../../admin/src/modules/reducers.ts","../../../admin/src/preview/services/preview.ts","../../../admin/src/preview/components/PreviewSidePanel.tsx","../../../admin/src/preview/index.ts","../../../admin/src/index.ts"],"sourcesContent":["const PLUGIN_ID = 'content-manager';\n\nconst PERMISSIONS = [\n  'plugin::content-manager.explorer.create',\n  'plugin::content-manager.explorer.read',\n  'plugin::content-manager.explorer.update',\n  'plugin::content-manager.explorer.delete',\n  'plugin::content-manager.explorer.publish',\n];\n\nexport { PLUGIN_ID, PERMISSIONS };\n","import { useStrapiApp, InjectionZoneComponent } from '@strapi/admin/strapi-admin';\n\nimport { PLUGIN_ID } from '../constants/plugin';\n\nconst INJECTION_ZONES = {\n  editView: { informations: [], 'right-links': [] },\n  listView: {\n    actions: [],\n    deleteModalAdditionalInfos: [],\n    publishModalAdditionalInfos: [],\n    unpublishModalAdditionalInfos: [],\n  },\n  preview: {\n    actions: [],\n  },\n} satisfies InjectionZones;\n\ninterface InjectionZones {\n  editView: {\n    informations: InjectionZoneComponent[];\n    'right-links': InjectionZoneComponent[];\n  };\n  listView: {\n    actions: InjectionZoneComponent[];\n    deleteModalAdditionalInfos: InjectionZoneComponent[];\n    publishModalAdditionalInfos: InjectionZoneComponent[];\n    unpublishModalAdditionalInfos: InjectionZoneComponent[];\n  };\n  preview: {\n    actions: InjectionZoneComponent[];\n  };\n}\n\ntype InjectionZoneArea =\n  | 'editView.informations'\n  | 'editView.right-links'\n  | 'listView.actions'\n  | 'listView.unpublishModalAdditionalInfos'\n  | 'listView.deleteModalAdditionalInfos'\n  | 'listView.publishModalAdditionalInfos'\n  | 'listView.deleteModalAdditionalInfos'\n  | 'preview.actions';\n\ntype InjectionZoneModule = InjectionZoneArea extends `${infer Word}.${string}` ? Word : never;\ntype InjectionZoneContainer = InjectionZoneArea extends `${string}.${infer Word}.${string}`\n  ? Word\n  : never;\ntype InjectionZoneBlock = InjectionZoneArea extends `${string}.${string}.${infer Word}`\n  ? Word\n  : never;\n\n/**\n * You can't know what this component props will be because it's generic and used everywhere\n * e.g. content-manager edit view, we just send the slug but we might not in the listView,\n * therefore, people should type it themselves on the components they render.\n */\nconst InjectionZone = ({ area, ...props }: { area: InjectionZoneArea; [key: string]: unknown }) => {\n  const components = useInjectionZone(area);\n\n  return (\n    <>\n      {components.map((component) => (\n        <component.Component key={component.name} {...props} />\n      ))}\n    </>\n  );\n};\n\nexport const useInjectionZone = (area: InjectionZoneArea) => {\n  const getPlugin = useStrapiApp('useInjectionZone', (state) => state.getPlugin);\n  const contentManagerPlugin = getPlugin(PLUGIN_ID);\n  const [page, position] = area.split('.') as [InjectionZoneContainer, InjectionZoneBlock];\n\n  return contentManagerPlugin.getInjectedComponents(page, position);\n};\n\nexport { InjectionZone, INJECTION_ZONES };\n\nexport type {\n  InjectionZoneArea,\n  InjectionZoneComponent,\n  InjectionZones,\n  InjectionZoneModule,\n  InjectionZoneContainer,\n  InjectionZoneBlock,\n};\n","const ID = 'id';\n\nconst CREATED_BY_ATTRIBUTE_NAME = 'createdBy';\nconst UPDATED_BY_ATTRIBUTE_NAME = 'updatedBy';\n\nconst CREATOR_FIELDS = [CREATED_BY_ATTRIBUTE_NAME, UPDATED_BY_ATTRIBUTE_NAME];\n\nconst PUBLISHED_BY_ATTRIBUTE_NAME = 'publishedBy';\nconst CREATED_AT_ATTRIBUTE_NAME = 'createdAt';\nconst UPDATED_AT_ATTRIBUTE_NAME = 'updatedAt';\nconst PUBLISHED_AT_ATTRIBUTE_NAME = 'publishedAt';\n\nconst DOCUMENT_META_FIELDS = [\n  ID,\n  ...CREATOR_FIELDS,\n  PUBLISHED_BY_ATTRIBUTE_NAME,\n  CREATED_AT_ATTRIBUTE_NAME,\n  UPDATED_AT_ATTRIBUTE_NAME,\n  PUBLISHED_AT_ATTRIBUTE_NAME,\n];\n\n/**\n * List of attribute types that cannot be used as the main field.\n * Not sure the name could be any clearer.\n */\nconst ATTRIBUTE_TYPES_THAT_CANNOT_BE_MAIN_FIELD = [\n  'dynamiczone',\n  'json',\n  'text',\n  'relation',\n  'component',\n  'boolean',\n  'media',\n  'password',\n  'richtext',\n  'timestamp',\n  'blocks',\n];\n\nexport {\n  ATTRIBUTE_TYPES_THAT_CANNOT_BE_MAIN_FIELD,\n  CREATED_AT_ATTRIBUTE_NAME,\n  UPDATED_AT_ATTRIBUTE_NAME,\n  PUBLISHED_AT_ATTRIBUTE_NAME,\n  CREATED_BY_ATTRIBUTE_NAME,\n  UPDATED_BY_ATTRIBUTE_NAME,\n  PUBLISHED_BY_ATTRIBUTE_NAME,\n  CREATOR_FIELDS,\n  DOCUMENT_META_FIELDS,\n};\n","const SINGLE_TYPES = 'single-types';\nconst COLLECTION_TYPES = 'collection-types';\n\nexport { SINGLE_TYPES, COLLECTION_TYPES };\n","import { generateNKeysBetween } from 'fractional-indexing';\nimport pipe from 'lodash/fp/pipe';\n\nimport { DOCUMENT_META_FIELDS } from '../../../constants/attributes';\n\nimport type { ComponentsDictionary, Document } from '../../../hooks/useDocument';\nimport type { Schema, UID } from '@strapi/types';\n\n/* -------------------------------------------------------------------------------------------------\n * traverseData\n * -----------------------------------------------------------------------------------------------*/\n\n// Make only attributes required since it's the only one Content History has\ntype PartialSchema = Partial<Schema.Schema> & Pick<Schema.Schema, 'attributes'>;\n\ntype Predicate = <TAttribute extends Schema.Attribute.AnyAttribute>(\n  attribute: TAttribute,\n  value: Schema.Attribute.Value<TAttribute>\n) => boolean;\ntype Transform = <TAttribute extends Schema.Attribute.AnyAttribute>(\n  value: any,\n  attribute: TAttribute\n) => any;\ntype AnyData = Omit<Document, 'id'>;\n\nconst BLOCK_LIST_ATTRIBUTE_KEYS = ['__component', '__temp_key__'];\n\n/**\n * @internal This function is used to traverse the data and transform the values.\n * Given a predicate function, it will transform the value (using the given transform function)\n * if the predicate returns true. If it finds that the attribute is a component or dynamiczone,\n * it will recursively traverse those data structures as well.\n *\n * It is possible to break the ContentManager by using this function incorrectly, for example,\n * if you transform a number into a string but the attribute type is a number, the ContentManager\n * will not be able to save the data and the Form will likely crash because the component it's\n * passing the data too won't succesfully be able to handle the value.\n */\nconst traverseData =\n  (predicate: Predicate, transform: Transform) =>\n  (schema: PartialSchema, components: ComponentsDictionary = {}) =>\n  (data: AnyData = {}) => {\n    const traverse = (datum: AnyData, attributes: Schema.Schema['attributes']) => {\n      return Object.entries(datum).reduce<AnyData>((acc, [key, value]) => {\n        const attribute = attributes[key];\n\n        /**\n         * If the attribute is a block list attribute, we don't want to transform it.\n         * We also don't want to transform null or undefined values.\n         */\n        if (BLOCK_LIST_ATTRIBUTE_KEYS.includes(key) || value === null || value === undefined) {\n          acc[key] = value;\n          return acc;\n        }\n\n        if (attribute.type === 'component') {\n          if (attribute.repeatable) {\n            const componentValue = (\n              predicate(attribute, value) ? transform(value, attribute) : value\n            ) as Schema.Attribute.Value<Schema.Attribute.Component<UID.Component, true>>;\n            acc[key] = componentValue.map((componentData) =>\n              traverse(componentData, components[attribute.component]?.attributes ?? {})\n            );\n          } else {\n            const componentValue = (\n              predicate(attribute, value) ? transform(value, attribute) : value\n            ) as Schema.Attribute.Value<Schema.Attribute.Component<UID.Component, false>>;\n\n            acc[key] = traverse(componentValue, components[attribute.component]?.attributes ?? {});\n          }\n        } else if (attribute.type === 'dynamiczone') {\n          const dynamicZoneValue = (\n            predicate(attribute, value) ? transform(value, attribute) : value\n          ) as Schema.Attribute.Value<Schema.Attribute.DynamicZone>;\n\n          acc[key] = dynamicZoneValue.map((componentData) =>\n            traverse(componentData, components[componentData.__component]?.attributes ?? {})\n          );\n        } else if (predicate(attribute, value)) {\n          acc[key] = transform(value, attribute);\n        } else {\n          acc[key] = value;\n        }\n\n        return acc;\n      }, {});\n    };\n\n    return traverse(data, schema.attributes);\n  };\n\n/* -------------------------------------------------------------------------------------------------\n * removeProhibitedFields\n * -----------------------------------------------------------------------------------------------*/\n\n/**\n * @internal Removes all the fields that are not allowed.\n */\nconst removeProhibitedFields = (prohibitedFields: Schema.Attribute.Kind[]) =>\n  traverseData(\n    (attribute) => prohibitedFields.includes(attribute.type),\n    () => ''\n  );\n\n/* -------------------------------------------------------------------------------------------------\n * prepareRelations\n * -----------------------------------------------------------------------------------------------*/\n\n/**\n * @internal\n * @description Sets all relation values to an empty array.\n */\nconst prepareRelations = traverseData(\n  (attribute) => attribute.type === 'relation',\n  () => ({\n    connect: [],\n    disconnect: [],\n  })\n);\n\n/* -------------------------------------------------------------------------------------------------\n * prepareTempKeys\n * -----------------------------------------------------------------------------------------------*/\n\n/**\n * @internal\n * @description Adds a `__temp_key__` to each component and dynamiczone item. This gives us\n * a stable identifier regardless of its ids etc. that we can then use for drag and drop.\n */\nconst prepareTempKeys = traverseData(\n  (attribute) =>\n    (attribute.type === 'component' && attribute.repeatable) || attribute.type === 'dynamiczone',\n  (data) => {\n    if (Array.isArray(data) && data.length > 0) {\n      const keys = generateNKeysBetween(undefined, undefined, data.length);\n\n      return data.map((datum, index) => ({\n        ...datum,\n        __temp_key__: keys[index],\n      }));\n    }\n\n    return data;\n  }\n);\n\n/* -------------------------------------------------------------------------------------------------\n * removeFieldsThatDontExistOnSchema\n * -----------------------------------------------------------------------------------------------*/\n\n/**\n * @internal\n * @description Fields that don't exist in the schema like createdAt etc. are only on the first level (not nested),\n * as such we don't need to traverse the components to remove them.\n */\nconst removeFieldsThatDontExistOnSchema = (schema: PartialSchema) => (data: AnyData) => {\n  const schemaKeys = Object.keys(schema.attributes);\n  const dataKeys = Object.keys(data);\n\n  const keysToRemove = dataKeys.filter((key) => !schemaKeys.includes(key));\n\n  const revisedData = [...keysToRemove, ...DOCUMENT_META_FIELDS].reduce((acc, key) => {\n    delete acc[key];\n\n    return acc;\n  }, structuredClone(data));\n\n  return revisedData;\n};\n\n/**\n * @internal\n * @description We need to remove null fields from the data-structure because it will pass it\n * to the specific inputs breaking them as most would prefer empty strings or `undefined` if\n * they're controlled / uncontrolled.\n */\nconst removeNullValues = (data: AnyData) => {\n  return Object.entries(data).reduce<AnyData>((acc, [key, value]) => {\n    if (value === null) {\n      return acc;\n    }\n\n    acc[key] = value;\n\n    return acc;\n  }, {});\n};\n\n/* -------------------------------------------------------------------------------------------------\n * transformDocuments\n * -----------------------------------------------------------------------------------------------*/\n\n/**\n * @internal\n * @description Takes a document data structure (this could be from the API or a default form structure)\n * and applies consistent data transformations to it. This is also used when we add new components to the\n * form to ensure the data is correctly prepared from their default state e.g. relations are set to an empty array.\n */\nconst transformDocument =\n  (schema: PartialSchema, components: ComponentsDictionary = {}) =>\n  (document: AnyData) => {\n    const transformations = pipe(\n      removeFieldsThatDontExistOnSchema(schema),\n      removeProhibitedFields(['password'])(schema, components),\n      removeNullValues,\n      prepareRelations(schema, components),\n      prepareTempKeys(schema, components)\n    );\n\n    return transformations(document);\n  };\n\nexport {\n  removeProhibitedFields,\n  prepareRelations,\n  prepareTempKeys,\n  removeFieldsThatDontExistOnSchema,\n  transformDocument,\n};\nexport type { AnyData };\n","import type { ComponentsDictionary, Document } from '../../../hooks/useDocument';\nimport type { Schema } from '@strapi/types';\n\ntype AnyData = Omit<Document, 'id'>;\n\n/* -------------------------------------------------------------------------------------------------\n * createDefaultForm\n * -----------------------------------------------------------------------------------------------*/\n\n/**\n * @internal Using the content-type schema & the components dictionary of the content-type,\n * creates a form with pre-filled default values. This is used when creating a new entry.\n */\nconst createDefaultForm = (\n  contentType: Schema.Schema,\n  components: ComponentsDictionary = {}\n): AnyData => {\n  const traverseSchema = (attributes: Schema.Schema['attributes']): AnyData => {\n    return Object.entries(attributes).reduce<AnyData>((acc, [key, attribute]) => {\n      if ('default' in attribute) {\n        acc[key] = attribute.default;\n      } else if (attribute.type === 'component' && attribute.required) {\n        const defaultComponentForm = traverseSchema(components[attribute.component].attributes);\n\n        if (attribute.repeatable) {\n          acc[key] = attribute.min ? [...Array(attribute.min).fill(defaultComponentForm)] : [];\n        } else {\n          acc[key] = defaultComponentForm;\n        }\n      } else if (attribute.type === 'dynamiczone' && attribute.required) {\n        acc[key] = [];\n      }\n\n      return acc;\n    }, {});\n  };\n\n  return traverseSchema(contentType.attributes);\n};\n\nexport { createDefaultForm };\n","import { adminApi } from '@strapi/admin/strapi-admin';\n\nconst contentManagerApi = adminApi.enhanceEndpoints({\n  addTagTypes: [\n    'ComponentConfiguration',\n    'ContentTypesConfiguration',\n    'ContentTypeSettings',\n    'Document',\n    'InitialData',\n    'HistoryVersion',\n    'Relations',\n    'UidAvailability',\n    'RecentDocumentList',\n  ],\n});\n\nexport { contentManagerApi };\n","/**\n * Related to fetching the actual content of a collection type or single type.\n */\nimport { stringify } from 'qs';\n\nimport { SINGLE_TYPES } from '../constants/collections';\n\nimport { contentManagerApi } from './api';\n\nimport type {\n  Clone,\n  Create,\n  Delete,\n  Find,\n  FindOne,\n  BulkDelete,\n  BulkPublish,\n  BulkUnpublish,\n  Discard,\n  CountDraftRelations,\n  CountManyEntriesDraftRelations,\n  Publish,\n  Unpublish,\n  Update,\n} from '../../../shared/contracts/collection-types';\n\nconst documentApi = contentManagerApi.injectEndpoints({\n  overrideExisting: true,\n  endpoints: (builder) => ({\n    autoCloneDocument: builder.mutation<Clone.Response, Clone.Params & { query?: string }>({\n      query: ({ model, sourceId, query }) => ({\n        url: `/content-manager/collection-types/${model}/auto-clone/${sourceId}`,\n        method: 'POST',\n        config: {\n          params: query,\n        },\n      }),\n      invalidatesTags: (_result, error, { model }) => {\n        if (error) {\n          return [];\n        }\n\n        return [{ type: 'Document', id: `${model}_LIST` }, 'RecentDocumentList'];\n      },\n    }),\n    cloneDocument: builder.mutation<\n      Clone.Response,\n      Clone.Params & {\n        data: Clone.Request['body'];\n        params?: Clone.Request['query'];\n      }\n    >({\n      query: ({ model, sourceId, data, params }) => ({\n        url: `/content-manager/collection-types/${model}/clone/${sourceId}`,\n        method: 'POST',\n        data,\n        config: {\n          params,\n        },\n      }),\n      invalidatesTags: (_result, _error, { model }) => [\n        { type: 'Document', id: `${model}_LIST` },\n        { type: 'UidAvailability', id: model },\n        'RecentDocumentList',\n      ],\n    }),\n    /**\n     * Creates a new collection-type document. This should ONLY be used for collection-types.\n     * single-types should always be using `updateDocument` since they always exist.\n     */\n    createDocument: builder.mutation<\n      Create.Response,\n      Create.Params & {\n        data: Create.Request['body'];\n        params?: Create.Request['query'];\n      }\n    >({\n      query: ({ model, data, params }) => ({\n        url: `/content-manager/collection-types/${model}`,\n        method: 'POST',\n        data,\n        config: {\n          params,\n        },\n      }),\n      invalidatesTags: (result, _error, { model }) => [\n        { type: 'Document', id: `${model}_LIST` },\n        'Relations',\n        { type: 'UidAvailability', id: model },\n        'RecentDocumentList',\n      ],\n      transformResponse: (response: Create.Response, meta, arg): Create.Response => {\n        /**\n         * TODO v6\n         * Adapt plugin:users-permissions.user to return the same response\n         * shape as all other requests. The error is returned as expected.\n         */\n        if (!('data' in response) && arg.model === 'plugin::users-permissions.user') {\n          return {\n            data: response,\n            meta: {\n              availableStatus: [],\n              availableLocales: [],\n            },\n          };\n        }\n\n        return response;\n      },\n    }),\n    deleteDocument: builder.mutation<\n      Delete.Response,\n      Pick<Delete.Params, 'model'> &\n        Pick<Partial<Delete.Params>, 'documentId'> & {\n          collectionType: string;\n          params?: Find.Request['query'];\n        }\n    >({\n      query: ({ collectionType, model, documentId, params }) => ({\n        url: `/content-manager/${collectionType}/${model}${\n          collectionType !== SINGLE_TYPES && documentId ? `/${documentId}` : ''\n        }`,\n        method: 'DELETE',\n        config: {\n          params,\n        },\n      }),\n      invalidatesTags: (_result, _error, { collectionType, model }) => [\n        { type: 'Document', id: collectionType !== SINGLE_TYPES ? `${model}_LIST` : model },\n        'RecentDocumentList',\n      ],\n    }),\n    deleteManyDocuments: builder.mutation<\n      BulkDelete.Response,\n      BulkDelete.Params & BulkDelete.Request['body'] & { params?: Find.Request['query'] }\n    >({\n      query: ({ model, params, ...body }) => ({\n        url: `/content-manager/collection-types/${model}/actions/bulkDelete`,\n        method: 'POST',\n        data: body,\n        config: {\n          params,\n        },\n      }),\n      invalidatesTags: (_res, _error, { model }) => [\n        { type: 'Document', id: `${model}_LIST` },\n        'RecentDocumentList',\n      ],\n    }),\n    discardDocument: builder.mutation<\n      Discard.Response,\n      Pick<Discard.Params, 'model'> &\n        Partial<Pick<Discard.Params, 'documentId'>> & {\n          collectionType: string;\n          params?: Find.Request['query'] & {\n            [key: string]: any;\n          };\n        }\n    >({\n      query: ({ collectionType, model, documentId, params }) => ({\n        url: documentId\n          ? `/content-manager/${collectionType}/${model}/${documentId}/actions/discard`\n          : `/content-manager/${collectionType}/${model}/actions/discard`,\n        method: 'POST',\n        config: {\n          params,\n        },\n      }),\n      invalidatesTags: (_result, _error, { collectionType, model, documentId }) => {\n        return [\n          {\n            type: 'Document',\n            id: collectionType !== SINGLE_TYPES ? `${model}_${documentId}` : model,\n          },\n          { type: 'Document', id: `${model}_LIST` },\n          'Relations',\n          { type: 'UidAvailability', id: model },\n          'RecentDocumentList',\n        ];\n      },\n    }),\n    /**\n     * Gets all documents of a collection type or single type.\n     * By passing different params you can get different results e.g. only published documents or 'es' documents.\n     */\n    getAllDocuments: builder.query<\n      Find.Response,\n      Find.Params & {\n        params?: Find.Request['query'] & {\n          [key: string]: any;\n        };\n      }\n    >({\n      query: ({ model, params }) => ({\n        url: `/content-manager/collection-types/${model}`,\n        method: 'GET',\n        config: {\n          params: stringify(params, { encode: true }),\n        },\n      }),\n      providesTags: (result, _error, arg) => {\n        return [\n          { type: 'Document', id: `ALL_LIST` },\n          { type: 'Document', id: `${arg.model}_LIST` },\n          ...(result?.results.map(({ documentId }) => ({\n            type: 'Document' as const,\n            id: `${arg.model}_${documentId}`,\n          })) ?? []),\n        ];\n      },\n    }),\n    getDraftRelationCount: builder.query<\n      CountDraftRelations.Response,\n      {\n        collectionType: string;\n        model: string;\n        /**\n         * You don't pass the documentId if the document is a single-type\n         */\n        documentId?: string;\n        params?: CountDraftRelations.Request['query'];\n      }\n    >({\n      query: ({ collectionType, model, documentId, params }) => ({\n        url: documentId\n          ? `/content-manager/${collectionType}/${model}/${documentId}/actions/countDraftRelations`\n          : `/content-manager/${collectionType}/${model}/actions/countDraftRelations`,\n        method: 'GET',\n        config: {\n          params,\n        },\n      }),\n    }),\n    getDocument: builder.query<\n      FindOne.Response,\n      Pick<FindOne.Params, 'model'> &\n        Partial<Pick<FindOne.Params, 'documentId'>> & {\n          collectionType: string;\n          params?: FindOne.Request['query'];\n        }\n    >({\n      // @ts-expect-error â€“ TODO: fix ts error where data unknown doesn't work with response via an assertion?\n      queryFn: async (\n        { collectionType, model, documentId, params },\n        _api,\n        _extraOpts,\n        baseQuery\n      ) => {\n        const res = await baseQuery({\n          url: `/content-manager/${collectionType}/${model}${documentId ? `/${documentId}` : ''}`,\n          method: 'GET',\n          config: {\n            params,\n          },\n        });\n\n        /**\n         * To stop the query from locking itself in multiple retries, we intercept the error here and manage correctly.\n         * This is because single-types don't have a list view and fetching them with the route `/single-types/:model`\n         * never returns a list, just a single document but this won't exist if you've not made one before.\n         */\n        if (res.error && res.error.name === 'NotFoundError' && collectionType === SINGLE_TYPES) {\n          return { data: { document: undefined }, error: undefined };\n        }\n\n        return res;\n      },\n      providesTags: (result, _error, { collectionType, model, documentId }) => {\n        return [\n          // we prefer the result's id because we don't fetch single-types with an ID.\n          {\n            type: 'Document',\n            id:\n              collectionType !== SINGLE_TYPES\n                ? `${model}_${result && 'documentId' in result ? result.documentId : documentId}`\n                : model,\n          },\n          // Make it easy to invalidate all individual documents queries for a model\n          {\n            type: 'Document',\n            id: `${model}_ALL_ITEMS`,\n          },\n        ];\n      },\n    }),\n    getManyDraftRelationCount: builder.query<\n      CountManyEntriesDraftRelations.Response['data'],\n      CountManyEntriesDraftRelations.Request['query'] & {\n        model: string;\n      }\n    >({\n      query: ({ model, ...params }) => ({\n        url: `/content-manager/collection-types/${model}/actions/countManyEntriesDraftRelations`,\n        method: 'GET',\n        config: {\n          params,\n        },\n      }),\n      transformResponse: (response: CountManyEntriesDraftRelations.Response) => response.data,\n    }),\n    /**\n     * This endpoint will either create or update documents at the same time as publishing.\n     */\n    publishDocument: builder.mutation<\n      Publish.Response,\n      Pick<Publish.Params, 'model'> &\n        Partial<Pick<Publish.Params, 'documentId'>> & {\n          collectionType: string;\n          data: Publish.Request['body'];\n          params?: Publish.Request['query'];\n        }\n    >({\n      query: ({ collectionType, model, documentId, params, data }) => ({\n        url: documentId\n          ? `/content-manager/${collectionType}/${model}/${documentId}/actions/publish`\n          : `/content-manager/${collectionType}/${model}/actions/publish`,\n        method: 'POST',\n        data,\n        config: {\n          params,\n        },\n      }),\n      invalidatesTags: (_result, _error, { collectionType, model, documentId }) => {\n        return [\n          {\n            type: 'Document',\n            id: collectionType !== SINGLE_TYPES ? `${model}_${documentId}` : model,\n          },\n          { type: 'Document', id: `${model}_LIST` },\n          'Relations',\n          'RecentDocumentList',\n        ];\n      },\n    }),\n    publishManyDocuments: builder.mutation<\n      BulkPublish.Response,\n      BulkPublish.Params & BulkPublish.Request['body'] & { params?: BulkPublish.Request['query'] }\n    >({\n      query: ({ model, params, ...body }) => ({\n        url: `/content-manager/collection-types/${model}/actions/bulkPublish`,\n        method: 'POST',\n        data: body,\n        config: {\n          params,\n        },\n      }),\n      invalidatesTags: (_res, _error, { model, documentIds }) =>\n        documentIds.map((id) => ({ type: 'Document', id: `${model}_${id}` })),\n    }),\n    updateDocument: builder.mutation<\n      Update.Response,\n      Pick<Update.Params, 'model'> &\n        Partial<Pick<Update.Params, 'documentId'>> & {\n          collectionType: string;\n          data: Update.Request['body'];\n          params?: Update.Request['query'];\n        }\n    >({\n      query: ({ collectionType, model, documentId, data, params }) => ({\n        url: `/content-manager/${collectionType}/${model}${documentId ? `/${documentId}` : ''}`,\n        method: 'PUT',\n        data,\n        config: {\n          params,\n        },\n      }),\n      invalidatesTags: (_result, _error, { collectionType, model, documentId }) => {\n        return [\n          {\n            type: 'Document',\n            id: collectionType !== SINGLE_TYPES ? `${model}_${documentId}` : model,\n          },\n          'Relations',\n          { type: 'UidAvailability', id: model },\n          'RecentDocumentList',\n          'RecentDocumentList',\n        ];\n      },\n      async onQueryStarted({ data, ...patch }, { dispatch, queryFulfilled }) {\n        // Optimistically update the cache with the new data\n        const patchResult = dispatch(\n          documentApi.util.updateQueryData('getDocument', patch, (draft) => {\n            Object.assign(draft.data, data);\n          })\n        );\n        try {\n          await queryFulfilled;\n        } catch {\n          // Rollback the optimistic update if there's an error\n          patchResult.undo();\n        }\n      },\n    }),\n    unpublishDocument: builder.mutation<\n      Unpublish.Response,\n      Pick<Unpublish.Params, 'model'> &\n        Partial<Pick<Unpublish.Params, 'documentId'>> & {\n          collectionType: string;\n          params?: Unpublish.Request['query'];\n          data: Unpublish.Request['body'];\n        }\n    >({\n      query: ({ collectionType, model, documentId, params, data }) => ({\n        url: documentId\n          ? `/content-manager/${collectionType}/${model}/${documentId}/actions/unpublish`\n          : `/content-manager/${collectionType}/${model}/actions/unpublish`,\n        method: 'POST',\n        data,\n        config: {\n          params,\n        },\n      }),\n      invalidatesTags: (_result, _error, { collectionType, model, documentId }) => {\n        return [\n          {\n            type: 'Document',\n            id: collectionType !== SINGLE_TYPES ? `${model}_${documentId}` : model,\n          },\n          'RecentDocumentList',\n        ];\n      },\n    }),\n    unpublishManyDocuments: builder.mutation<\n      BulkUnpublish.Response,\n      Pick<BulkUnpublish.Params, 'model'> &\n        BulkUnpublish.Request['body'] & {\n          params?: BulkUnpublish.Request['query'];\n        }\n    >({\n      query: ({ model, params, ...body }) => ({\n        url: `/content-manager/collection-types/${model}/actions/bulkUnpublish`,\n        method: 'POST',\n        data: body,\n        config: {\n          params,\n        },\n      }),\n      invalidatesTags: (_res, _error, { model, documentIds }) => [\n        ...documentIds.map((id) => ({ type: 'Document' as const, id: `${model}_${id}` })),\n        'RecentDocumentList',\n      ],\n    }),\n  }),\n});\n\nconst {\n  useAutoCloneDocumentMutation,\n  useCloneDocumentMutation,\n  useCreateDocumentMutation,\n  useDeleteDocumentMutation,\n  useDeleteManyDocumentsMutation,\n  useDiscardDocumentMutation,\n  useGetAllDocumentsQuery,\n  useLazyGetDocumentQuery,\n  useGetDocumentQuery,\n  useLazyGetDraftRelationCountQuery,\n  useGetManyDraftRelationCountQuery,\n  usePublishDocumentMutation,\n  usePublishManyDocumentsMutation,\n  useUpdateDocumentMutation,\n  useUnpublishDocumentMutation,\n  useUnpublishManyDocumentsMutation,\n} = documentApi;\n\nexport {\n  useAutoCloneDocumentMutation,\n  useCloneDocumentMutation,\n  useCreateDocumentMutation,\n  useDeleteDocumentMutation,\n  useDeleteManyDocumentsMutation,\n  useDiscardDocumentMutation,\n  useGetAllDocumentsQuery,\n  useLazyGetDocumentQuery,\n  useGetDocumentQuery,\n  useLazyGetDraftRelationCountQuery as useGetDraftRelationCountQuery,\n  useGetManyDraftRelationCountQuery,\n  usePublishDocumentMutation,\n  usePublishManyDocumentsMutation,\n  useUpdateDocumentMutation,\n  useUnpublishDocumentMutation,\n  useUnpublishManyDocumentsMutation,\n};\n","import { SerializedError } from '@reduxjs/toolkit';\nimport { ApiError, type UnknownApiError } from '@strapi/admin/strapi-admin';\n\ninterface Query {\n  plugins?: Record<string, unknown>;\n  _q?: string;\n  [key: string]: any;\n}\n\n/**\n * This type extracts the plugin options from the query\n * and appends them to the root of the query\n */\ntype TransformedQuery<TQuery extends Query> = Omit<TQuery, 'plugins'> & {\n  [key: string]: string;\n};\n\n/**\n * @description\n * Creates a valid query params object for get requests\n * ie. plugins[18n][locale]=en becomes locale=en\n */\nconst buildValidParams = <TQuery extends Query>(query: TQuery): TransformedQuery<TQuery> => {\n  if (!query) return query;\n\n  // Extract pluginOptions from the query, they shouldn't be part of the URL\n  const { plugins: _, ...validQueryParams } = {\n    ...query,\n    ...Object.values(query?.plugins ?? {}).reduce<Record<string, string>>(\n      (acc, current) => Object.assign(acc, current),\n      {}\n    ),\n  };\n\n  return validQueryParams;\n};\n\ntype BaseQueryError = ApiError | UnknownApiError;\n\nconst isBaseQueryError = (error: BaseQueryError | SerializedError): error is BaseQueryError => {\n  return error.name !== undefined;\n};\n\nexport { isBaseQueryError, buildValidParams };\nexport type { BaseQueryError, UnknownApiError };\n","import { translatedErrors } from '@strapi/admin/strapi-admin';\nimport pipe from 'lodash/fp/pipe';\nimport * as yup from 'yup';\n\nimport { DOCUMENT_META_FIELDS } from '../constants/attributes';\n\nimport type { ComponentsDictionary, Schema } from '../hooks/useDocument';\nimport type { Schema as SchemaUtils } from '@strapi/types';\nimport type { ObjectShape } from 'yup/lib/object';\n\ntype AnySchema =\n  | yup.StringSchema\n  | yup.NumberSchema\n  | yup.BooleanSchema\n  | yup.DateSchema\n  | yup.ArraySchema<any>\n  | yup.ObjectSchema<any>;\n\n/* -------------------------------------------------------------------------------------------------\n * createYupSchema\n * -----------------------------------------------------------------------------------------------*/\n\ninterface ValidationOptions {\n  status: 'draft' | 'published' | null;\n}\n\nconst arrayValidator = (attribute: Schema['attributes'][string], options: ValidationOptions) => ({\n  message: translatedErrors.required,\n  test(value: unknown) {\n    if (options.status === 'draft') {\n      return true;\n    }\n\n    if (!attribute.required) {\n      return true;\n    }\n\n    if (!value) {\n      return false;\n    }\n\n    if (Array.isArray(value) && value.length === 0) {\n      return false;\n    }\n\n    return true;\n  },\n});\n\n/**\n * TODO: should we create a Map to store these based on the hash of the schema?\n */\nconst createYupSchema = (\n  attributes: Schema['attributes'] = {},\n  components: ComponentsDictionary = {},\n  options: ValidationOptions = { status: null }\n): yup.ObjectSchema<any> => {\n  const createModelSchema = (attributes: Schema['attributes']): yup.ObjectSchema<any> =>\n    yup\n      .object()\n      .shape(\n        Object.entries(attributes).reduce<ObjectShape>((acc, [name, attribute]) => {\n          if (DOCUMENT_META_FIELDS.includes(name)) {\n            return acc;\n          }\n\n          /**\n           * These validations won't apply to every attribute\n           * and that's okay, in that case we just return the\n           * schema as it was passed.\n           */\n          const validations = [\n            addNullableValidation,\n            addRequiredValidation,\n            addMinLengthValidation,\n            addMaxLengthValidation,\n            addMinValidation,\n            addMaxValidation,\n            addRegexValidation,\n          ].map((fn) => fn(attribute, options));\n\n          const transformSchema = pipe(...validations);\n\n          switch (attribute.type) {\n            case 'component': {\n              const { attributes } = components[attribute.component];\n\n              if (attribute.repeatable) {\n                return {\n                  ...acc,\n                  [name]: transformSchema(\n                    yup.array().of(createModelSchema(attributes).nullable(false))\n                  ).test(arrayValidator(attribute, options)),\n                };\n              } else {\n                return {\n                  ...acc,\n                  [name]: transformSchema(createModelSchema(attributes).nullable()),\n                };\n              }\n            }\n            case 'dynamiczone':\n              return {\n                ...acc,\n                [name]: transformSchema(\n                  yup.array().of(\n                    yup.lazy(\n                      (\n                        data: SchemaUtils.Attribute.Value<SchemaUtils.Attribute.DynamicZone>[number]\n                      ) => {\n                        const attributes = components?.[data?.__component]?.attributes;\n\n                        const validation = yup\n                          .object()\n                          .shape({\n                            __component: yup.string().required().oneOf(Object.keys(components)),\n                          })\n                          .nullable(false);\n                        if (!attributes) {\n                          return validation;\n                        }\n\n                        return validation.concat(createModelSchema(attributes));\n                      }\n                    ) as unknown as yup.ObjectSchema<any>\n                  )\n                ).test(arrayValidator(attribute, options)),\n              };\n            case 'relation':\n              return {\n                ...acc,\n                [name]: transformSchema(\n                  yup.lazy((value) => {\n                    if (!value) {\n                      return yup.mixed().nullable(true);\n                    } else if (Array.isArray(value)) {\n                      // If a relation value is an array, we expect\n                      // an array of objects with {id} properties, representing the related entities.\n                      return yup.array().of(\n                        yup.object().shape({\n                          id: yup.number().required(),\n                        })\n                      );\n                    } else if (typeof value === 'object') {\n                      // A realtion value can also be an object. Some API\n                      // repsonses return the number of entities in the relation\n                      // as { count: x }\n                      return yup.object();\n                    } else {\n                      return yup\n                        .mixed()\n                        .test(\n                          'type-error',\n                          'Relation values must be either null, an array of objects with {id} or an object.',\n                          () => false\n                        );\n                    }\n                  })\n                ),\n              };\n            default:\n              return {\n                ...acc,\n                [name]: transformSchema(createAttributeSchema(attribute)),\n              };\n          }\n        }, {})\n      )\n      /**\n       * TODO: investigate why an undefined object fails a check of `nullable`.\n       */\n      .default(null);\n\n  return createModelSchema(attributes);\n};\n\nconst createAttributeSchema = (\n  attribute: Exclude<\n    SchemaUtils.Attribute.AnyAttribute,\n    { type: 'dynamiczone' } | { type: 'component' } | { type: 'relation' }\n  >\n) => {\n  switch (attribute.type) {\n    case 'biginteger':\n      return yup.string().matches(/^-?\\d*$/);\n    case 'boolean':\n      return yup.boolean();\n    case 'blocks':\n      return yup.mixed().test('isBlocks', translatedErrors.json, (value) => {\n        if (!value || Array.isArray(value)) {\n          return true;\n        } else {\n          return false;\n        }\n      });\n    case 'decimal':\n    case 'float':\n    case 'integer':\n      return yup.number();\n    case 'email':\n      return yup.string().email(translatedErrors.email);\n    case 'enumeration':\n      return yup.string().oneOf([...attribute.enum, null]);\n    case 'json':\n      return yup.mixed().test('isJSON', translatedErrors.json, (value) => {\n        /**\n         * We don't want to validate the JSON field if it's empty.\n         */\n        if (!value || (typeof value === 'string' && value.length === 0)) {\n          return true;\n        }\n\n        // If the value was created via content API and wasn't changed, then it's still an object\n        if (typeof value === 'object') {\n          try {\n            JSON.stringify(value);\n            return true;\n          } catch (err) {\n            return false;\n          }\n        }\n\n        try {\n          JSON.parse(value);\n\n          return true;\n        } catch (err) {\n          return false;\n        }\n      });\n    case 'password':\n    case 'richtext':\n    case 'string':\n    case 'text':\n      return yup.string();\n    case 'uid':\n      return yup.string().matches(/^[A-Za-z0-9-_.~]*$/);\n    default:\n      /**\n       * This allows any value.\n       */\n      return yup.mixed();\n  }\n};\n\n// Helper function to return schema.nullable() if it exists, otherwise return schema\nconst nullableSchema = <TSchema extends AnySchema>(schema: TSchema) => {\n  return schema?.nullable\n    ? schema.nullable()\n    : // In some cases '.nullable' will not be available on the schema.\n      // e.g. when the schema has been built using yup.lazy (e.g. for relations).\n      // In these cases we should just return the schema as it is.\n      schema;\n};\n\n/* -------------------------------------------------------------------------------------------------\n * Validators\n * -----------------------------------------------------------------------------------------------*/\n/**\n * Our validator functions can be preped with the\n * attribute and then have the schema piped through them.\n */\ntype ValidationFn = (\n  attribute: Schema['attributes'][string],\n  options: ValidationOptions\n) => <TSchema extends AnySchema>(schema: TSchema) => TSchema;\n\nconst addNullableValidation: ValidationFn = () => (schema) => {\n  return nullableSchema(schema);\n};\n\nconst addRequiredValidation: ValidationFn = (attribute, options) => (schema) => {\n  if (options.status === 'draft' || !attribute.required) {\n    return schema;\n  }\n\n  if (attribute.required && 'required' in schema) {\n    return schema.required(translatedErrors.required);\n  }\n\n  return schema;\n};\n\nconst addMinLengthValidation: ValidationFn =\n  (attribute, options) =>\n  <TSchema extends AnySchema>(schema: TSchema): TSchema => {\n    // Skip minLength validation for draft\n    if (options.status === 'draft') {\n      return schema;\n    }\n\n    if (\n      'minLength' in attribute &&\n      attribute.minLength &&\n      Number.isInteger(attribute.minLength) &&\n      'min' in schema\n    ) {\n      return schema.min(attribute.minLength, {\n        ...translatedErrors.minLength,\n        values: {\n          min: attribute.minLength,\n        },\n      }) as TSchema;\n    }\n\n    return schema;\n  };\n\nconst addMaxLengthValidation: ValidationFn =\n  (attribute) =>\n  <TSchema extends AnySchema>(schema: TSchema): TSchema => {\n    if (\n      'maxLength' in attribute &&\n      attribute.maxLength &&\n      Number.isInteger(attribute.maxLength) &&\n      'max' in schema\n    ) {\n      return schema.max(attribute.maxLength, {\n        ...translatedErrors.maxLength,\n        values: {\n          max: attribute.maxLength,\n        },\n      }) as TSchema;\n    }\n\n    return schema;\n  };\n\nconst addMinValidation: ValidationFn =\n  (attribute, options) =>\n  <TSchema extends AnySchema>(schema: TSchema): TSchema => {\n    // do not validate min for draft\n    if (options.status === 'draft') {\n      return schema;\n    }\n\n    if ('min' in attribute && 'min' in schema) {\n      const min = toInteger(attribute.min);\n\n      if (min) {\n        return schema.min(min, {\n          ...translatedErrors.min,\n          values: {\n            min,\n          },\n        }) as TSchema;\n      }\n    }\n\n    return schema;\n  };\n\nconst addMaxValidation: ValidationFn =\n  (attribute) =>\n  <TSchema extends AnySchema>(schema: TSchema): TSchema => {\n    if ('max' in attribute) {\n      const max = toInteger(attribute.max);\n\n      if ('max' in schema && max) {\n        return schema.max(max, {\n          ...translatedErrors.max,\n          values: {\n            max,\n          },\n        }) as TSchema;\n      }\n    }\n\n    return schema;\n  };\n\nconst toInteger = (val?: string | number): number | undefined => {\n  if (typeof val === 'number' || val === undefined) {\n    return val;\n  } else {\n    const num = Number(val);\n    return isNaN(num) ? undefined : num;\n  }\n};\n\nconst addRegexValidation: ValidationFn =\n  (attribute) =>\n  <TSchema extends AnySchema>(schema: TSchema): TSchema => {\n    if ('regex' in attribute && attribute.regex && 'matches' in schema) {\n      return schema.matches(new RegExp(attribute.regex), {\n        message: {\n          id: translatedErrors.regex.id,\n          defaultMessage: 'The value does not match the defined pattern.',\n        },\n\n        excludeEmptyString: !attribute.required,\n      }) as TSchema;\n    }\n\n    return schema;\n  };\n\nexport { createYupSchema };\n","import { contentManagerApi } from './api';\n\nimport type { GetInitData } from '../../../shared/contracts/init';\n\nconst initApi = contentManagerApi.injectEndpoints({\n  endpoints: (builder) => ({\n    getInitialData: builder.query<GetInitData.Response['data'], void>({\n      query: () => '/content-manager/init',\n      transformResponse: (response: GetInitData.Response) => response.data,\n      providesTags: ['InitialData'],\n    }),\n  }),\n});\n\nconst { useGetInitialDataQuery } = initApi;\n\nexport { useGetInitialDataQuery };\n","import * as React from 'react';\n\nimport { useNotification, useAPIErrorHandler } from '@strapi/admin/strapi-admin';\n\nimport { useGetInitialDataQuery } from '../services/init';\n\nimport type { Component } from '../../../shared/contracts/components';\nimport type { ContentType } from '../../../shared/contracts/content-types';\nimport type { Schema } from '@strapi/types';\n\n/* -------------------------------------------------------------------------------------------------\n * useContentTypeSchema\n * -----------------------------------------------------------------------------------------------*/\ntype ComponentsDictionary = Record<string, Component>;\n\n/**\n * @internal\n * @description Given a model UID, return the schema and the schemas\n * of the associated components within said model's schema. A wrapper\n * implementation around the `useGetInitialDataQuery` with a unique\n * `selectFromResult` function to memoize the calculation.\n *\n * If no model is provided, the hook will return all the schemas.\n */\nconst useContentTypeSchema = (model?: string) => {\n  const { toggleNotification } = useNotification();\n  const { _unstableFormatAPIError: formatAPIError } = useAPIErrorHandler();\n\n  const { data, error, isLoading, isFetching } = useGetInitialDataQuery(undefined);\n\n  const { components, contentType, contentTypes } = React.useMemo(() => {\n    const contentType = data?.contentTypes.find((ct) => ct.uid === model);\n\n    const componentsByKey = data?.components.reduce<ComponentsDictionary>((acc, component) => {\n      acc[component.uid] = component;\n\n      return acc;\n    }, {});\n\n    const components = extractContentTypeComponents(contentType?.attributes, componentsByKey);\n\n    return {\n      components: Object.keys(components).length === 0 ? undefined : components,\n      contentType,\n      contentTypes: data?.contentTypes ?? [],\n    };\n  }, [model, data]);\n\n  React.useEffect(() => {\n    if (error) {\n      toggleNotification({\n        type: 'danger',\n        message: formatAPIError(error),\n      });\n    }\n  }, [toggleNotification, error, formatAPIError]);\n\n  return {\n    // This must be memoized to avoid inifiinite re-renders where the empty object is different everytime.\n    components: React.useMemo(() => components ?? {}, [components]),\n    schema: contentType,\n    schemas: contentTypes,\n    isLoading: isLoading || isFetching,\n  };\n};\n\n/* -------------------------------------------------------------------------------------------------\n * extractContentTypeComponents\n * -----------------------------------------------------------------------------------------------*/\n/**\n * @internal\n * @description Extracts the components used in a content type's attributes recursively.\n */\nconst extractContentTypeComponents = (\n  attributes: ContentType['attributes'] = {},\n  allComponents: ComponentsDictionary = {}\n): ComponentsDictionary => {\n  const getComponents = (attributes: Schema.Attribute.AnyAttribute[]) => {\n    return attributes.reduce<string[]>((acc, attribute) => {\n      /**\n       * If the attribute is a component or dynamiczone, we need to recursively\n       * extract the component UIDs from its attributes.\n       */\n      if (attribute.type === 'component') {\n        const componentAttributes = Object.values(\n          allComponents[attribute.component]?.attributes ?? {}\n        );\n\n        acc.push(attribute.component, ...getComponents(componentAttributes));\n      } else if (attribute.type === 'dynamiczone') {\n        acc.push(\n          ...attribute.components,\n          /**\n           * Dynamic zones have an array of components, so we flatMap over them\n           * performing the same search as above.\n           */\n          ...attribute.components.flatMap((componentUid) => {\n            const componentAttributes = Object.values(\n              allComponents[componentUid]?.attributes ?? {}\n            );\n\n            return getComponents(componentAttributes);\n          })\n        );\n      }\n\n      return acc;\n    }, []);\n  };\n\n  const componentUids = getComponents(Object.values(attributes));\n\n  const uniqueComponentUids = [...new Set(componentUids)];\n\n  const componentsByKey = uniqueComponentUids.reduce<ComponentsDictionary>((acc, uid) => {\n    acc[uid] = allComponents[uid];\n\n    return acc;\n  }, {});\n\n  return componentsByKey;\n};\n\nexport { useContentTypeSchema, extractContentTypeComponents };\nexport type { ComponentsDictionary };\n","export const HOOKS = {\n  /**\n   * Hook that allows to mutate the displayed headers of the list view table\n   * @constant\n   * @type {string}\n   */\n  INJECT_COLUMN_IN_TABLE: 'Admin/CM/pages/ListView/inject-column-in-table',\n\n  /**\n   * Hook that allows to mutate the CM's collection types links pre-set filters\n   * @constant\n   * @type {string}\n   */\n  MUTATE_COLLECTION_TYPES_LINKS: 'Admin/CM/pages/App/mutate-collection-types-links',\n\n  /**\n   * Hook that allows to mutate the CM's edit view layout\n   * @constant\n   * @type {string}\n   */\n  MUTATE_EDIT_VIEW_LAYOUT: 'Admin/CM/pages/EditView/mutate-edit-view-layout',\n\n  /**\n   * Hook that allows to mutate the CM's single types links pre-set filters\n   * @constant\n   * @type {string}\n   */\n  MUTATE_SINGLE_TYPES_LINKS: 'Admin/CM/pages/App/mutate-single-types-links',\n};\n","import {\n  FindContentTypeConfiguration,\n  UpdateContentTypeConfiguration,\n  FindContentTypesSettings,\n} from '../../../shared/contracts/content-types';\n\nimport { contentManagerApi } from './api';\n\nconst contentTypesApi = contentManagerApi.injectEndpoints({\n  endpoints: (builder) => ({\n    getContentTypeConfiguration: builder.query<\n      FindContentTypeConfiguration.Response['data'],\n      string\n    >({\n      query: (uid) => ({\n        url: `/content-manager/content-types/${uid}/configuration`,\n        method: 'GET',\n      }),\n      transformResponse: (response: FindContentTypeConfiguration.Response) => response.data,\n      providesTags: (_result, _error, uid) => [\n        { type: 'ContentTypesConfiguration', id: uid },\n        { type: 'ContentTypeSettings', id: 'LIST' },\n      ],\n    }),\n    getAllContentTypeSettings: builder.query<FindContentTypesSettings.Response['data'], void>({\n      query: () => '/content-manager/content-types-settings',\n      transformResponse: (response: FindContentTypesSettings.Response) => response.data,\n      providesTags: [{ type: 'ContentTypeSettings', id: 'LIST' }],\n    }),\n    updateContentTypeConfiguration: builder.mutation<\n      UpdateContentTypeConfiguration.Response['data'],\n      UpdateContentTypeConfiguration.Request['body'] & {\n        uid: string;\n      }\n    >({\n      query: ({ uid, ...body }) => ({\n        url: `/content-manager/content-types/${uid}/configuration`,\n        method: 'PUT',\n        data: body,\n      }),\n      transformResponse: (response: UpdateContentTypeConfiguration.Response) => response.data,\n      invalidatesTags: (_result, _error, { uid }) => [\n        { type: 'ContentTypesConfiguration', id: uid },\n        { type: 'ContentTypeSettings', id: 'LIST' },\n        // Is this necessary?\n        { type: 'InitialData' },\n      ],\n    }),\n  }),\n});\n\nconst {\n  useGetContentTypeConfigurationQuery,\n  useGetAllContentTypeSettingsQuery,\n  useUpdateContentTypeConfigurationMutation,\n} = contentTypesApi;\n\nexport {\n  useGetContentTypeConfigurationQuery,\n  useGetAllContentTypeSettingsQuery,\n  useUpdateContentTypeConfigurationMutation,\n};\n","import type { ComponentsDictionary, Schema } from '../hooks/useDocument';\nimport type { Schema as SchemaUtils } from '@strapi/types';\n\nconst checkIfAttributeIsDisplayable = (attribute: SchemaUtils.Attribute.AnyAttribute) => {\n  const { type } = attribute;\n\n  if (type === 'relation') {\n    return !attribute.relation.toLowerCase().includes('morph');\n  }\n\n  return !['json', 'dynamiczone', 'richtext', 'password', 'blocks'].includes(type) && !!type;\n};\n\ninterface MainField {\n  name: string;\n  type: SchemaUtils.Attribute.Kind | 'custom';\n}\n\n/**\n * @internal\n * @description given an attribute, content-type schemas & component schemas, find the mainField name & type.\n * If the attribute does not need a `mainField` then we return undefined. If we do not find the type\n * of the field, we assume it's a string #sensible-defaults\n */\nconst getMainField = (\n  attribute: SchemaUtils.Attribute.AnyAttribute,\n  mainFieldName: string | undefined,\n  { schemas, components }: { schemas: Schema[]; components: ComponentsDictionary }\n): MainField | undefined => {\n  if (!mainFieldName) {\n    return undefined;\n  }\n\n  const mainFieldType =\n    attribute.type === 'component'\n      ? components[attribute.component].attributes[mainFieldName].type\n      : // @ts-expect-error â€“ `targetModel` does exist on the attribute for a relation.\n        schemas.find((schema) => schema.uid === attribute.targetModel)?.attributes[mainFieldName]\n          .type;\n\n  return {\n    name: mainFieldName,\n    type: mainFieldType ?? 'string',\n  };\n};\n\nexport { checkIfAttributeIsDisplayable, getMainField };\nexport type { MainField };\n","import * as React from 'react';\n\nimport { SerializedError } from '@reduxjs/toolkit';\nimport {\n  useNotification,\n  useStrapiApp,\n  useAPIErrorHandler,\n  useQueryParams,\n} from '@strapi/admin/strapi-admin';\n\nimport { HOOKS } from '../constants/hooks';\nimport { useGetContentTypeConfigurationQuery } from '../services/contentTypes';\nimport { BaseQueryError } from '../utils/api';\nimport { getMainField } from '../utils/attributes';\n\nimport { useContentTypeSchema } from './useContentTypeSchema';\nimport {\n  type ComponentsDictionary,\n  type Document,\n  type Schema,\n  useDoc,\n  useDocument,\n} from './useDocument';\n\nimport type { ComponentConfiguration } from '../../../shared/contracts/components';\nimport type {\n  Metadatas,\n  FindContentTypeConfiguration,\n  Settings,\n} from '../../../shared/contracts/content-types';\nimport type { Filters, InputProps, Table } from '@strapi/admin/strapi-admin';\nimport type { Schema as SchemaUtils } from '@strapi/types';\n\ntype LayoutOptions = Schema['options'] & Schema['pluginOptions'] & object;\n\ninterface LayoutSettings extends Settings {\n  displayName?: string;\n  icon?: never;\n}\n\ninterface ListFieldLayout\n  extends Table.Header<Document, ListFieldLayout>,\n    Pick<Filters.Filter, 'mainField'> {\n  attribute: SchemaUtils.Attribute.AnyAttribute | { type: 'custom' };\n}\n\ninterface ListLayout {\n  layout: ListFieldLayout[];\n  components?: never;\n  metadatas: {\n    [K in keyof Metadatas]: Metadatas[K]['list'];\n  };\n  options: LayoutOptions;\n  settings: LayoutSettings;\n}\ninterface EditFieldSharedProps\n  extends Omit<InputProps, 'hint' | 'label' | 'type'>,\n    Pick<Filters.Filter, 'mainField'> {\n  hint?: string;\n  label: string;\n  size: number;\n  unique?: boolean;\n  visible?: boolean;\n}\n\n/**\n * Map over all the types in Attribute Types and use that to create a union of new types where the attribute type\n * is under the property attribute and the type is under the property type.\n */\ntype EditFieldLayout = {\n  [K in SchemaUtils.Attribute.Kind]: EditFieldSharedProps & {\n    attribute: Extract<SchemaUtils.Attribute.AnyAttribute, { type: K }>;\n    type: K;\n  };\n}[SchemaUtils.Attribute.Kind];\n\ninterface EditLayout {\n  layout: Array<Array<EditFieldLayout[]>>;\n  components: {\n    [uid: string]: {\n      layout: Array<EditFieldLayout[]>;\n      settings: ComponentConfiguration['settings'] & {\n        displayName?: string;\n        icon?: string;\n      };\n    };\n  };\n  metadatas: {\n    [K in keyof Metadatas]: Metadatas[K]['edit'];\n  };\n  options: LayoutOptions;\n  settings: LayoutSettings;\n}\n\ntype UseDocumentLayout = (model: string) => {\n  error?: BaseQueryError | SerializedError;\n  isLoading: boolean;\n  /**\n   * This is the layout for the edit view,\n   */\n  edit: EditLayout;\n  list: ListLayout;\n};\n\n/* -------------------------------------------------------------------------------------------------\n * useDocumentLayout\n * -----------------------------------------------------------------------------------------------*/\n\nconst DEFAULT_SETTINGS = {\n  bulkable: false,\n  filterable: false,\n  searchable: false,\n  pagination: false,\n  defaultSortBy: '',\n  defaultSortOrder: 'asc',\n  mainField: 'id',\n  pageSize: 10,\n};\n\n/**\n * @alpha\n * @description This hook is used to get the layouts for either the edit view or list view of a specific content-type\n * including the layouts for the components used in the content-type. It also runs the mutation hook waterfall so the data\n * is consistent wherever it is used. It's a light wrapper around the `useDocument` hook, but provides the `skip` option a document\n * is not fetched, however, it does fetch the schemas & components if they do not already exist in the cache.\n *\n * If the fetch fails, it will display a notification to the user.\n *\n * @example\n * ```tsx\n * const { model } = useParams<{ model: string }>();\n * const { edit: { schema: layout } } = useDocumentLayout(model);\n *\n * return layout.map(panel => panel.map(row => row.map(field => <Field.Root {...field} />)))\n * ```\n *\n */\nconst useDocumentLayout: UseDocumentLayout = (model) => {\n  const { schema, components } = useDocument({ model, collectionType: '' }, { skip: true });\n  const [{ query }] = useQueryParams();\n  const runHookWaterfall = useStrapiApp('useDocumentLayout', (state) => state.runHookWaterfall);\n  const { toggleNotification } = useNotification();\n  const { _unstableFormatAPIError: formatAPIError } = useAPIErrorHandler();\n  const { isLoading: isLoadingSchemas, schemas } = useContentTypeSchema();\n\n  const {\n    data,\n    isLoading: isLoadingConfigs,\n    error,\n    isFetching: isFetchingConfigs,\n  } = useGetContentTypeConfigurationQuery(model);\n\n  const isLoading = isLoadingSchemas || isFetchingConfigs || isLoadingConfigs;\n\n  React.useEffect(() => {\n    if (error) {\n      toggleNotification({\n        type: 'danger',\n        message: formatAPIError(error),\n      });\n    }\n  }, [error, formatAPIError, toggleNotification]);\n\n  const editLayout = React.useMemo(\n    () =>\n      data && !isLoading\n        ? formatEditLayout(data, { schemas, schema, components })\n        : ({\n            layout: [],\n            components: {},\n            metadatas: {},\n            options: {},\n            settings: DEFAULT_SETTINGS,\n          } as EditLayout),\n    [data, isLoading, schemas, schema, components]\n  );\n\n  const listLayout = React.useMemo(() => {\n    return data && !isLoading\n      ? formatListLayout(data, { schemas, schema, components })\n      : ({\n          layout: [],\n          metadatas: {},\n          options: {},\n          settings: DEFAULT_SETTINGS,\n        } as ListLayout);\n  }, [data, isLoading, schemas, schema, components]);\n\n  const { layout: edit } = React.useMemo(\n    () =>\n      runHookWaterfall(HOOKS.MUTATE_EDIT_VIEW_LAYOUT, {\n        layout: editLayout,\n        query,\n      }),\n    [editLayout, query, runHookWaterfall]\n  );\n\n  return {\n    error,\n    isLoading,\n    edit,\n    list: listLayout,\n  } satisfies ReturnType<UseDocumentLayout>;\n};\n\n/* -------------------------------------------------------------------------------------------------\n * useDocLayout\n * -----------------------------------------------------------------------------------------------*/\n\n/**\n * @internal this hook uses the internal useDoc hook, as such it shouldn't be used outside of the\n * content-manager because it won't work as intended.\n */\nconst useDocLayout = () => {\n  const { model } = useDoc();\n  return useDocumentLayout(model);\n};\n\n/* -------------------------------------------------------------------------------------------------\n * formatEditLayout\n * -----------------------------------------------------------------------------------------------*/\ntype LayoutData = FindContentTypeConfiguration.Response['data'];\n\n/**\n * @internal\n * @description takes the configuration data, the schema & the components used in the schema and formats the edit view\n * versions of the schema & components. This is then used to render the edit view of the content-type.\n */\nconst formatEditLayout = (\n  data: LayoutData,\n  {\n    schemas,\n    schema,\n    components,\n  }: { schemas: Schema[]; schema?: Schema; components: ComponentsDictionary }\n): EditLayout => {\n  let currentPanelIndex = 0;\n  /**\n   * The fields arranged by the panels, new panels are made for dynamic zones only.\n   */\n  const panelledEditAttributes = convertEditLayoutToFieldLayouts(\n    data.contentType.layouts.edit,\n    schema?.attributes,\n    data.contentType.metadatas,\n    { configurations: data.components, schemas: components },\n    schemas\n  ).reduce<Array<EditFieldLayout[][]>>((panels, row) => {\n    if (row.some((field) => field.type === 'dynamiczone')) {\n      panels.push([row]);\n      currentPanelIndex += 2;\n    } else {\n      if (!panels[currentPanelIndex]) {\n        panels.push([row]);\n      } else {\n        panels[currentPanelIndex].push(row);\n      }\n    }\n\n    return panels;\n  }, []);\n\n  const componentEditAttributes = Object.entries(data.components).reduce<EditLayout['components']>(\n    (acc, [uid, configuration]) => {\n      acc[uid] = {\n        layout: convertEditLayoutToFieldLayouts(\n          configuration.layouts.edit,\n          components[uid].attributes,\n          configuration.metadatas,\n          { configurations: data.components, schemas: components }\n        ),\n        settings: {\n          ...configuration.settings,\n          icon: components[uid].info.icon,\n          displayName: components[uid].info.displayName,\n        },\n      };\n      return acc;\n    },\n    {}\n  );\n\n  const editMetadatas = Object.entries(data.contentType.metadatas).reduce<EditLayout['metadatas']>(\n    (acc, [attribute, metadata]) => {\n      return {\n        ...acc,\n        [attribute]: metadata.edit,\n      };\n    },\n    {}\n  );\n\n  return {\n    layout: panelledEditAttributes,\n    components: componentEditAttributes,\n    metadatas: editMetadatas,\n    settings: {\n      ...data.contentType.settings,\n      displayName: schema?.info.displayName,\n    },\n    options: {\n      ...schema?.options,\n      ...schema?.pluginOptions,\n      ...data.contentType.options,\n    },\n  };\n};\n\n/* -------------------------------------------------------------------------------------------------\n * convertEditLayoutToFieldLayouts\n * -----------------------------------------------------------------------------------------------*/\n\n/**\n * @internal\n * @description takes the edit layout from either a content-type or a component\n * and formats it into a generic object that can be used to correctly render\n * the form fields.\n */\nconst convertEditLayoutToFieldLayouts = (\n  rows: LayoutData['contentType']['layouts']['edit'],\n  attributes: Schema['attributes'] = {},\n  metadatas: Metadatas,\n  components?: {\n    configurations: Record<string, ComponentConfiguration>;\n    schemas: ComponentsDictionary;\n  },\n  schemas: Schema[] = []\n) => {\n  return rows.map((row) =>\n    row\n      .map((field) => {\n        const attribute = attributes[field.name];\n\n        if (!attribute) {\n          return null;\n        }\n\n        const { edit: metadata } = metadatas[field.name];\n\n        const settings: Partial<Settings> =\n          attribute.type === 'component' && components\n            ? components.configurations[attribute.component].settings\n            : {};\n\n        return {\n          attribute,\n          disabled: !metadata.editable,\n          hint: metadata.description,\n          label: metadata.label ?? '',\n          name: field.name,\n          // @ts-expect-error â€“ mainField does exist on the metadata for a relation.\n          mainField: getMainField(attribute, metadata.mainField || settings.mainField, {\n            schemas,\n            components: components?.schemas ?? {},\n          }),\n          placeholder: metadata.placeholder ?? '',\n          required: attribute.required ?? false,\n          size: field.size,\n          unique: 'unique' in attribute ? attribute.unique : false,\n          visible: metadata.visible ?? true,\n          type: attribute.type,\n        };\n      })\n      .filter((field) => field !== null)\n  ) as EditFieldLayout[][];\n};\n\n/* -------------------------------------------------------------------------------------------------\n * formatListLayout\n * -----------------------------------------------------------------------------------------------*/\n\n/**\n * @internal\n * @description takes the complete configuration data, the schema & the components used in the schema and\n * formats a list view layout for the content-type. This is much simpler than the edit view layout as there\n * are less options to consider.\n */\nconst formatListLayout = (\n  data: LayoutData,\n  {\n    schemas,\n    schema,\n    components,\n  }: { schemas: Schema[]; schema?: Schema; components: ComponentsDictionary }\n): ListLayout => {\n  const listMetadatas = Object.entries(data.contentType.metadatas).reduce<ListLayout['metadatas']>(\n    (acc, [attribute, metadata]) => {\n      return {\n        ...acc,\n        [attribute]: metadata.list,\n      };\n    },\n    {}\n  );\n  /**\n   * The fields arranged by the panels, new panels are made for dynamic zones only.\n   */\n  const listAttributes = convertListLayoutToFieldLayouts(\n    data.contentType.layouts.list,\n    schema?.attributes,\n    listMetadatas,\n    { configurations: data.components, schemas: components },\n    schemas\n  );\n\n  return {\n    layout: listAttributes,\n    settings: { ...data.contentType.settings, displayName: schema?.info.displayName },\n    metadatas: listMetadatas,\n    options: {\n      ...schema?.options,\n      ...schema?.pluginOptions,\n      ...data.contentType.options,\n    },\n  };\n};\n\n/* -------------------------------------------------------------------------------------------------\n * convertListLayoutToFieldLayouts\n * -----------------------------------------------------------------------------------------------*/\n\n/**\n * @internal\n * @description takes the columns from the list view configuration and formats them into a generic object\n * combinining metadata and attribute data.\n *\n * @note We do use this to reformat the list of strings when updating the displayed headers for the list view.\n */\nconst convertListLayoutToFieldLayouts = (\n  columns: LayoutData['contentType']['layouts']['list'],\n  attributes: Schema['attributes'] = {},\n  metadatas: ListLayout['metadatas'],\n  components?: {\n    configurations: Record<string, ComponentConfiguration>;\n    schemas: ComponentsDictionary;\n  },\n  schemas: Schema[] = []\n) => {\n  return columns\n    .map((name) => {\n      const attribute = attributes[name];\n\n      if (!attribute) {\n        return null;\n      }\n\n      const metadata = metadatas[name];\n\n      const settings: Partial<Settings> =\n        attribute.type === 'component' && components\n          ? components.configurations[attribute.component].settings\n          : {};\n\n      return {\n        attribute,\n        label: metadata.label ?? '',\n        mainField: getMainField(attribute, metadata.mainField || settings.mainField, {\n          schemas,\n          components: components?.schemas ?? {},\n        }),\n        name: name,\n        searchable: metadata.searchable ?? true,\n        sortable: metadata.sortable ?? true,\n      } satisfies ListFieldLayout;\n    })\n    .filter((field) => field !== null) as ListFieldLayout[];\n};\n\nexport {\n  useDocLayout,\n  useDocumentLayout,\n  convertListLayoutToFieldLayouts,\n  convertEditLayoutToFieldLayouts,\n  DEFAULT_SETTINGS,\n};\nexport type { EditLayout, EditFieldLayout, ListLayout, ListFieldLayout, UseDocumentLayout };\n","/**\n * This hook doesn't use a context provider because we fetch directly from the server,\n * this sounds expensive but actually, it's really not. Because we have redux-toolkit-query\n * being a cache layer so if nothing invalidates the cache, we don't fetch again.\n */\n\nimport * as React from 'react';\n\nimport {\n  useNotification,\n  useAPIErrorHandler,\n  useQueryParams,\n  FormErrors,\n  getYupValidationErrors,\n  useForm,\n} from '@strapi/admin/strapi-admin';\nimport { useIntl } from 'react-intl';\nimport { useParams } from 'react-router-dom';\nimport { ValidationError } from 'yup';\n\nimport { SINGLE_TYPES } from '../constants/collections';\nimport { type AnyData, transformDocument } from '../pages/EditView/utils/data';\nimport { createDefaultForm } from '../pages/EditView/utils/forms';\nimport { useGetDocumentQuery } from '../services/documents';\nimport { buildValidParams } from '../utils/api';\nimport { createYupSchema } from '../utils/validation';\n\nimport { useContentTypeSchema, ComponentsDictionary } from './useContentTypeSchema';\nimport { useDocumentLayout } from './useDocumentLayout';\n\nimport type { FindOne } from '../../../shared/contracts/collection-types';\nimport type { ContentType } from '../../../shared/contracts/content-types';\nimport type { Modules } from '@strapi/types';\n\ninterface UseDocumentArgs {\n  collectionType: string;\n  model: string;\n  documentId?: string;\n  params?: object;\n}\n\ntype UseDocumentOpts = Parameters<typeof useGetDocumentQuery>[1];\n\ntype Document = FindOne.Response['data'];\n\ntype Schema = ContentType;\n\ntype UseDocument = (\n  args: UseDocumentArgs,\n  opts?: UseDocumentOpts\n) => {\n  /**\n   * These are the schemas of the components used in the content type, organised\n   * by their uid.\n   */\n  components: ComponentsDictionary;\n  document?: Document;\n  meta?: FindOne.Response['meta'];\n  isLoading: boolean;\n  /**\n   * This is the schema of the content type, it is not the same as the layout.\n   */\n  schema?: Schema;\n  schemas?: Schema[];\n  hasError?: boolean;\n  refetch: () => void;\n  validate: (document: Document) => null | FormErrors;\n  /**\n   * Get the document's title\n   */\n  getTitle: (mainField: string) => string;\n  /**\n   * Get the initial form values for the document\n   */\n  getInitialFormValues: (isCreatingDocument?: boolean) => AnyData | undefined;\n};\n\n/* -------------------------------------------------------------------------------------------------\n * useDocument\n * -----------------------------------------------------------------------------------------------*/\n\n/**\n * @alpha\n * @public\n * @description Returns a document based on the model, collection type & id passed as arguments.\n * Also extracts its schema from the redux cache to be used for creating a validation schema.\n * @example\n * ```tsx\n * const { id, model, collectionType } = useParams<{ id: string; model: string; collectionType: string }>();\n *\n * if(!model || !collectionType) return null;\n *\n * const { document, isLoading, validate } = useDocument({ documentId: id, model, collectionType, params: { locale: 'en-GB' } })\n * const { update } = useDocumentActions()\n *\n * const onSubmit = async (document: Document) => {\n *  const errors = validate(document);\n *\n *  if(errors) {\n *      // handle errors\n *  }\n *\n *  await update({ collectionType, model, id }, document)\n * }\n * ```\n *\n * @see {@link https://contributor.strapi.io/docs/core/content-manager/hooks/use-document} for more information\n */\nconst useDocument: UseDocument = (args, opts) => {\n  const { toggleNotification } = useNotification();\n  const { _unstableFormatAPIError: formatAPIError } = useAPIErrorHandler();\n  const { formatMessage } = useIntl();\n\n  const {\n    currentData: data,\n    isLoading: isLoadingDocument,\n    isFetching: isFetchingDocument,\n    error,\n    refetch,\n  } = useGetDocumentQuery(args, {\n    ...opts,\n    skip: (!args.documentId && args.collectionType !== SINGLE_TYPES) || opts?.skip,\n  });\n  const document = data?.data;\n  const meta = data?.meta;\n\n  const {\n    components,\n    schema,\n    schemas,\n    isLoading: isLoadingSchema,\n  } = useContentTypeSchema(args.model);\n  const isSingleType = schema?.kind === 'singleType';\n\n  const getTitle = (mainField: string) => {\n    // Always use mainField if it's not an id\n    if (mainField !== 'id' && document?.[mainField]) {\n      return document[mainField];\n    }\n\n    // When it's a singleType without a mainField, use the contentType displayName\n    if (isSingleType && schema?.info.displayName) {\n      return schema.info.displayName;\n    }\n\n    // Otherwise, use a fallback\n    return formatMessage({\n      id: 'content-manager.containers.untitled',\n      defaultMessage: 'Untitled',\n    });\n  };\n\n  React.useEffect(() => {\n    if (error) {\n      toggleNotification({\n        type: 'danger',\n        message: formatAPIError(error),\n      });\n    }\n  }, [toggleNotification, error, formatAPIError, args.collectionType]);\n\n  const validationSchema = React.useMemo(() => {\n    if (!schema) {\n      return null;\n    }\n\n    return createYupSchema(schema.attributes, components);\n  }, [schema, components]);\n\n  const validate = React.useCallback(\n    (document: Modules.Documents.AnyDocument): FormErrors | null => {\n      if (!validationSchema) {\n        throw new Error(\n          'There is no validation schema generated, this is likely due to the schema not being loaded yet.'\n        );\n      }\n\n      try {\n        validationSchema.validateSync(document, { abortEarly: false, strict: true });\n        return null;\n      } catch (error) {\n        if (error instanceof ValidationError) {\n          return getYupValidationErrors(error);\n        }\n\n        throw error;\n      }\n    },\n    [validationSchema]\n  );\n\n  /**\n   * Here we prepare the form for editing, we need to:\n   * - remove prohibited fields from the document (passwords | ADD YOURS WHEN THERES A NEW ONE)\n   * - swap out count objects on relations for empty arrays\n   * - set __temp_key__ on array objects for drag & drop\n   *\n   * We also prepare the form for new documents, so we need to:\n   * - set default values on fields\n   */\n  const getInitialFormValues = React.useCallback(\n    (isCreatingDocument: boolean = false) => {\n      if ((!document && !isCreatingDocument && !isSingleType) || !schema) {\n        return undefined;\n      }\n\n      /**\n       * Check that we have an ID so we know the\n       * document has been created in some way.\n       */\n      const form = document?.id ? document : createDefaultForm(schema, components);\n\n      return transformDocument(schema, components)(form);\n    },\n    [document, isSingleType, schema, components]\n  );\n\n  const isLoading = isLoadingDocument || isFetchingDocument || isLoadingSchema;\n  const hasError = !!error;\n\n  return {\n    components,\n    document,\n    meta,\n    isLoading,\n    hasError,\n    schema,\n    schemas,\n    validate,\n    getTitle,\n    getInitialFormValues,\n    refetch,\n  } satisfies ReturnType<UseDocument>;\n};\n\n/* -------------------------------------------------------------------------------------------------\n * useDoc\n * -----------------------------------------------------------------------------------------------*/\n\n/**\n * @internal this hook uses the router to extract the model, collection type & id from the url.\n * therefore, it shouldn't be used outside of the content-manager because it won't work as intended.\n */\nconst useDoc = () => {\n  const { id, slug, collectionType, origin } = useParams<{\n    id: string;\n    origin: string;\n    slug: string;\n    collectionType: string;\n  }>();\n  const [{ query }] = useQueryParams();\n  const params = React.useMemo(() => buildValidParams(query), [query]);\n\n  if (!collectionType) {\n    throw new Error('Could not find collectionType in url params');\n  }\n\n  if (!slug) {\n    throw new Error('Could not find model in url params');\n  }\n\n  const document = useDocument(\n    { documentId: origin || id, model: slug, collectionType, params },\n    {\n      skip: id === 'create' || (!origin && !id && collectionType !== SINGLE_TYPES),\n    }\n  );\n\n  const returnId = origin || id === 'create' ? undefined : id;\n\n  return {\n    collectionType,\n    model: slug,\n    id: returnId,\n    ...document,\n  };\n};\n\n/**\n * @public\n * @experimental\n * Content manager context hooks for plugin development.\n * Make sure to use this hook inside the content manager.\n */\nconst useContentManagerContext = () => {\n  const {\n    collectionType,\n    model,\n    id,\n    components,\n    isLoading: isLoadingDoc,\n    schema,\n    schemas,\n  } = useDoc();\n\n  const layout = useDocumentLayout(model);\n\n  const form = useForm<unknown>('useContentManagerContext', (state) => state);\n\n  const isSingleType = collectionType === SINGLE_TYPES;\n  const slug = model;\n  const isCreatingEntry = id === 'create';\n\n  const {} = useContentTypeSchema();\n\n  const isLoading = isLoadingDoc || layout.isLoading;\n  const error = layout.error;\n\n  return {\n    error,\n    isLoading,\n\n    // Base metadata\n    model,\n    collectionType,\n    id,\n    slug,\n    isCreatingEntry,\n    isSingleType,\n    hasDraftAndPublish: schema?.options?.draftAndPublish ?? false,\n\n    // All schema infos\n    components,\n    contentType: schema,\n    contentTypes: schemas,\n\n    // Form state\n    form,\n\n    // layout infos\n    layout,\n  };\n};\n\nexport { useDocument, useDoc, useContentManagerContext };\nexport type { UseDocument, UseDocumentArgs, Document, Schema, ComponentsDictionary };\n","import * as React from 'react';\n\nimport { createContext } from '@strapi/admin/strapi-admin';\n\nimport { useDocument, type UseDocument } from '../hooks/useDocument';\nimport { buildValidParams } from '../utils/api';\n\ninterface DocumentMeta {\n  /**\n   * The equivalent of the \":id\" url param value\n   * i.e. gus5a67jcboa3o2zjnz39mb1\n   */\n  documentId: string;\n  /**\n   * The equivalent of the url \":slug\" param value\n   * i.e. api::articles.article\n   */\n  model: string;\n  /**\n   * The equivalent of the url \":collectionType\" param value\n   * i.e. collection-types or single-types\n   */\n  collectionType: string;\n  /**\n   * Query params object\n   * i.e. { locale: 'fr' }\n   */\n  params?: Record<string, string | string[] | null>;\n}\n\ninterface DocumentContextValue {\n  rootDocumentMeta: DocumentMeta;\n  document: ReturnType<UseDocument>;\n  meta: DocumentMeta;\n  changeDocument: (newRelation: DocumentMeta) => void;\n  documentHistory: DocumentMeta[];\n  setDocumentHistory: React.Dispatch<React.SetStateAction<DocumentMeta[]>>;\n  onPreview?: () => void;\n}\n\nconst [DocumentProvider, useDocumentContext] =\n  createContext<DocumentContextValue>('DocumentContext');\n\n/**\n * TODO: Document in contributor docs, Add unit test\n *\n * This context provider and its associated hook are used to access a document at its root level\n * and expose a function to change the current document being viewed to one of the root level docuemnt's relations.\n *\n * The useDocumentContext hook exposes:\n * - meta: information about the currentDocument,\n * - document: the actual document,\n * - changeDocument: a function to change the current document to one of its relations.\n * - rootDocumentMeta: information about the root level document (current page)\n */\nconst DocumentContextProvider = ({\n  children,\n  initialDocument,\n  onPreview,\n}: {\n  children: React.ReactNode | React.ReactNode[];\n  initialDocument: DocumentMeta;\n  onPreview?: () => void;\n}) => {\n  /**\n   * Initialize with the \"root\" document and expose a setter method to change to\n   * one of the root level document's relations.\n   */\n  const [currentDocumentMeta, changeDocument] = React.useState<DocumentMeta>(initialDocument);\n  const params = React.useMemo(\n    () => buildValidParams(currentDocumentMeta.params ?? {}),\n    [currentDocumentMeta.params]\n  );\n  const document = useDocument({ ...currentDocumentMeta, params });\n\n  const [documentHistory, setDocumentHistory] = React.useState<DocumentMeta[]>([]);\n\n  return (\n    <DocumentProvider\n      changeDocument={changeDocument}\n      document={document}\n      rootDocumentMeta={{\n        documentId: initialDocument.documentId,\n        model: initialDocument.model,\n        collectionType: initialDocument.collectionType,\n      }}\n      meta={currentDocumentMeta}\n      documentHistory={documentHistory}\n      setDocumentHistory={setDocumentHistory}\n      onPreview={onPreview}\n    >\n      {children}\n    </DocumentProvider>\n  );\n};\n\nexport { useDocumentContext, DocumentContextProvider };\nexport type { DocumentMeta };\n","import * as React from 'react';\n\nimport {\n  useRBAC,\n  useAuth,\n  type Permission,\n  createContext,\n  Page,\n  useQueryParams,\n} from '@strapi/admin/strapi-admin';\nimport { useParams } from 'react-router-dom';\n\nimport type { Schema } from '@strapi/types';\n\n/**\n * The boolean values indicate the global actions a user can perform on the document.\n * The `string[]` values tell us specifically which fields the actions can be performed on,\n * for example, if the `canReadFields` array is empty, than no fields can be read by the user.\n * This can happen even if the user can read the document.\n */\ninterface DocumentRBACContextValue {\n  canCreate?: boolean;\n  canCreateFields: string[];\n  canDelete?: boolean;\n  canPublish?: boolean;\n  canRead?: boolean;\n  canReadFields: string[];\n  canUpdate?: boolean;\n  canUpdateFields: string[];\n  canUserAction: (\n    fieldName: string,\n    fieldsUserCanAction: string[],\n    fieldType: Schema.Attribute.Kind\n  ) => boolean;\n  isLoading: boolean;\n}\n\nconst [DocumentRBACProvider, useDocumentRBAC] = createContext<DocumentRBACContextValue>(\n  'DocumentRBAC',\n  {\n    canCreate: false,\n    canCreateFields: [],\n    canDelete: false,\n    canPublish: false,\n    canRead: false,\n    canReadFields: [],\n    canUpdate: false,\n    canUpdateFields: [],\n    canUserAction: () => false,\n    isLoading: false,\n  }\n);\n\ninterface DocumentRBACProps {\n  children: React.ReactNode;\n  permissions: Permission[] | null;\n  model?: string;\n}\n\n/**\n * @internal This component is not meant to be used outside of the Content Manager plugin.\n * It depends on knowing the slug/model of the content-type using the params of the URL or the model if it is passed as arg.\n * If you do use the hook outside of the context, we default to `false` for all actions.\n *\n * It then creates an list of `can{Action}` that are passed to the context for consumption\n * within the app to enforce RBAC.\n */\nconst DocumentRBAC = ({ children, permissions, model }: DocumentRBACProps) => {\n  const { slug } = useParams<{ slug: string }>();\n\n  if (!slug && !model) {\n    throw new Error('Cannot find the slug param in the URL or the model prop is not provided.');\n  }\n\n  const contentTypeUid = model ?? slug;\n\n  const [{ rawQuery }] = useQueryParams<{ plugins?: { i18n?: { locale?: string } } }>();\n\n  const userPermissions = useAuth('DocumentRBAC', (state) => state.permissions);\n\n  const contentTypePermissions = React.useMemo(() => {\n    const contentTypePermissions = userPermissions.filter(\n      (permission) => permission.subject === contentTypeUid\n    );\n    return contentTypePermissions.reduce<Record<string, Permission[]>>((acc, permission) => {\n      const [action] = permission.action.split('.').slice(-1);\n      return { ...acc, [action]: [permission] };\n    }, {});\n  }, [contentTypeUid, userPermissions]);\n\n  const { isLoading, allowedActions } = useRBAC(\n    contentTypePermissions,\n    permissions ?? undefined,\n    // TODO: useRBAC context should be typed and built differently\n    // We are passing raw query as context to the hook so that it can\n    // rely on the locale provided from DocumentRBAC for its permission calculations.\n    rawQuery\n  );\n\n  const canCreateFields =\n    !isLoading && allowedActions.canCreate\n      ? extractAndDedupeFields(contentTypePermissions.create)\n      : [];\n\n  const canReadFields =\n    !isLoading && allowedActions.canRead ? extractAndDedupeFields(contentTypePermissions.read) : [];\n\n  const canUpdateFields =\n    !isLoading && allowedActions.canUpdate\n      ? extractAndDedupeFields(contentTypePermissions.update)\n      : [];\n\n  /**\n   * @description Checks if the user can perform an action on a field based on the field names\n   * provided as the second argument.\n   */\n  const canUserAction: DocumentRBACContextValue['canUserAction'] = React.useCallback(\n    (fieldName, fieldsUserCanAction, fieldType) => {\n      const name = removeNumericalStrings(fieldName.split('.'));\n\n      const componentFieldNames = fieldsUserCanAction\n        // filter out fields that aren't components (components are dot separated)\n        .filter((field) => field.split('.').length > 1);\n\n      if (fieldType === 'component') {\n        // check if the field name is within any of those arrays\n        return componentFieldNames.some((field) => {\n          return field.includes(name.join('.'));\n        });\n      }\n\n      /**\n       * The field is within a component.\n       */\n      if (name.length > 1) {\n        return componentFieldNames.includes(name.join('.'));\n      }\n\n      /**\n       * just a regular field\n       */\n      return fieldsUserCanAction.includes(fieldName);\n    },\n    []\n  );\n\n  if (isLoading) {\n    return <Page.Loading />;\n  }\n\n  return (\n    <DocumentRBACProvider\n      isLoading={isLoading}\n      canCreateFields={canCreateFields}\n      canReadFields={canReadFields}\n      canUpdateFields={canUpdateFields}\n      canUserAction={canUserAction}\n      {...allowedActions}\n    >\n      {children}\n    </DocumentRBACProvider>\n  );\n};\n\n/**\n * @internal it's really small, but it's used three times in a row and DRY for something this straight forward.\n */\nconst extractAndDedupeFields = (permissions: Permission[] = []) =>\n  permissions\n    .flatMap((permission) => permission.properties?.fields)\n    .filter(\n      (field, index, arr): field is string =>\n        arr.indexOf(field) === index && typeof field === 'string'\n    );\n\n/**\n * @internal removes numerical strings from arrays.\n * @example\n * ```ts\n * const name = 'a.0.b';\n * const res = removeNumericalStrings(name.split('.'));\n * console.log(res); // ['a', 'b']\n * ```\n */\nconst removeNumericalStrings = (arr: string[]) => arr.filter((item) => isNaN(Number(item)));\n\nexport { DocumentRBAC, useDocumentRBAC, DocumentRBACContextValue, DocumentRBACProps };\n","type TradOptions = Record<string, string>;\n\nconst prefixPluginTranslations = (trad: TradOptions, pluginId: string): TradOptions => {\n  if (!pluginId) {\n    throw new TypeError(\"pluginId can't be empty\");\n  }\n  return Object.keys(trad).reduce((acc, current) => {\n    acc[`${pluginId}.${current}`] = trad[current];\n    return acc;\n  }, {} as TradOptions);\n};\n\nconst getTranslation = (id: string) => `content-manager.${id}`;\n\nexport { getTranslation, prefixPluginTranslations };\n","import * as React from 'react';\n\nimport { SerializedError } from '@reduxjs/toolkit';\nimport {\n  useNotification,\n  useTracking,\n  type TrackingEvent,\n  useAPIErrorHandler,\n  useGuidedTour,\n} from '@strapi/admin/strapi-admin';\nimport { useIntl, type MessageDescriptor } from 'react-intl';\nimport { useNavigate } from 'react-router-dom';\n\nimport {\n  useAutoCloneDocumentMutation,\n  useCloneDocumentMutation,\n  useCreateDocumentMutation,\n  useDeleteDocumentMutation,\n  useDeleteManyDocumentsMutation,\n  useDiscardDocumentMutation,\n  useLazyGetDocumentQuery,\n  usePublishDocumentMutation,\n  usePublishManyDocumentsMutation,\n  useUnpublishDocumentMutation,\n  useUnpublishManyDocumentsMutation,\n  useUpdateDocumentMutation,\n} from '../services/documents';\nimport { BaseQueryError } from '../utils/api';\nimport { getTranslation } from '../utils/translations';\n\nimport type { Document } from './useDocument';\nimport type {\n  AutoClone,\n  Clone,\n  Create,\n  Delete,\n  BulkDelete,\n  Discard,\n  FindOne,\n  Publish,\n  BulkPublish,\n  Update,\n  Unpublish,\n  BulkUnpublish,\n} from '../../../shared/contracts/collection-types';\n\nconst DEFAULT_UNEXPECTED_ERROR_MSG = {\n  id: 'notification.error',\n  defaultMessage: 'An error occurred, please try again',\n} satisfies MessageDescriptor;\n\ntype OperationResponse<TResponse extends { data: any; meta?: any; error?: any }> =\n  | Pick<TResponse, 'data'>\n  | Pick<TResponse, 'data' | 'meta'>\n  | { error: BaseQueryError | SerializedError };\n\ntype BulkOperationResponse<TResponse extends { data: any; error?: any }> =\n  | Pick<TResponse, 'data'>\n  | { error: BaseQueryError | SerializedError };\n\ntype UseDocumentActions = (\n  fromPreview?: boolean,\n  fromRelationModal?: boolean\n) => {\n  /**\n   * @description Attempts to clone a document based on the provided sourceId.\n   * This will return a list of the fields as an error if it's unable to clone.\n   * You most likely want to use the `clone` action instead.\n   */\n  isLoading: boolean;\n  autoClone: (args: {\n    model: string;\n    sourceId: string;\n  }) => Promise<OperationResponse<AutoClone.Response>>;\n  clone: (\n    args: {\n      model: string;\n      documentId: string;\n      params?: object;\n    },\n    document: Omit<Document, 'id'>,\n    trackerProperty?: Extract<\n      TrackingEvent,\n      { name: 'willCreateEntry' | 'didCreateEntry' | 'didNotCreateEntry' }\n    >['properties']\n  ) => Promise<OperationResponse<Clone.Response>>;\n  create: (\n    args: {\n      model: string;\n      params?: object;\n    },\n    document: Omit<Document, 'id'>,\n    trackerProperty?: Extract<\n      TrackingEvent,\n      { name: 'willCreateEntry' | 'didCreateEntry' | 'didNotCreateEntry' }\n    >['properties']\n  ) => Promise<OperationResponse<Create.Response>>;\n  delete: (\n    args: {\n      collectionType: string;\n      model: string;\n      documentId?: string;\n      params?: object;\n    },\n    trackerProperty?: Extract<\n      TrackingEvent,\n      { name: 'willDeleteEntry' | 'didDeleteEntry' | 'didNotDeleteEntry' }\n    >['properties']\n  ) => Promise<OperationResponse<Delete.Response>>;\n  deleteMany: (args: {\n    model: string;\n    documentIds: string[];\n    params?: object;\n  }) => Promise<BulkOperationResponse<BulkDelete.Response>>;\n  discard: (args: {\n    collectionType: string;\n    model: string;\n    documentId?: string;\n    params?: object;\n  }) => Promise<OperationResponse<Discard.Response>>;\n  getDocument: (args: {\n    collectionType: string;\n    model: string;\n    documentId?: string;\n    params?: object;\n  }) => Promise<FindOne.Response | undefined>;\n  publish: (\n    args: {\n      collectionType: string;\n      model: string;\n      documentId?: string;\n      params?: object;\n    },\n    document: Partial<Document>\n  ) => Promise<OperationResponse<Publish.Response>>;\n  publishMany: (args: {\n    model: string;\n    documentIds: string[];\n    params?: object;\n  }) => Promise<BulkOperationResponse<BulkPublish.Response>>;\n  update: (\n    args: {\n      collectionType: string;\n      model: string;\n      documentId?: string;\n      params?: object;\n    },\n    document: Partial<Document>,\n    trackerProperty?: Extract<\n      TrackingEvent,\n      { name: 'willEditEntry' | 'didEditEntry' | 'didNotEditEntry' }\n    >['properties']\n  ) => Promise<OperationResponse<Update.Response>>;\n  unpublish: (\n    args: {\n      collectionType: string;\n      model: string;\n      documentId?: string;\n      params?: object;\n    },\n    discardDraft?: boolean\n  ) => Promise<OperationResponse<Unpublish.Response>>;\n  unpublishMany: (args: {\n    model: string;\n    documentIds: string[];\n    params?: object;\n  }) => Promise<BulkOperationResponse<BulkUnpublish.Response>>;\n};\n\ntype IUseDocumentActs = ReturnType<UseDocumentActions>;\n\n/**\n * @alpha\n * @public\n * @description Contains all the operations that can be performed on a single document.\n * Designed to be able to be used anywhere within a Strapi app. The hooks will handle\n * notifications should the operation fail, however the response is always returned incase\n * the user needs to handle side-effects.\n * @example\n * ```tsx\n * import { Form } from '@strapi/admin/admin';\n *\n * const { id, model, collectionType } = useParams<{ id: string; model: string; collectionType: string }>();\n * const { update } = useDocumentActions();\n *\n * const handleSubmit = async (data) => {\n *  await update({ collectionType, model, documentId: id }, data);\n * }\n *\n * return <Form method=\"PUT\" onSubmit={handleSubmit} />\n * ```\n *\n * @see {@link https://contributor.strapi.io/docs/core/content-manager/hooks/use-document-operations} for more information\n */\nconst useDocumentActions: UseDocumentActions = (fromPreview = false, fromRelationModal = false) => {\n  const { toggleNotification } = useNotification();\n  const { formatMessage } = useIntl();\n  const { trackUsage } = useTracking();\n  const { _unstableFormatAPIError: formatAPIError } = useAPIErrorHandler();\n  const navigate = useNavigate();\n  const setCurrentStep = useGuidedTour('useDocumentActions', (state) => state.setCurrentStep);\n\n  const [deleteDocument, { isLoading: isDeleting }] = useDeleteDocumentMutation();\n  const _delete: IUseDocumentActs['delete'] = React.useCallback(\n    async ({ collectionType, model, documentId, params }, trackerProperty) => {\n      try {\n        trackUsage('willDeleteEntry', trackerProperty);\n\n        const res = await deleteDocument({\n          collectionType,\n          model,\n          documentId,\n          params,\n        });\n\n        if ('error' in res) {\n          toggleNotification({\n            type: 'danger',\n            message: formatAPIError(res.error),\n          });\n\n          return { error: res.error };\n        }\n\n        toggleNotification({\n          type: 'success',\n          message: formatMessage({\n            id: getTranslation('success.record.delete'),\n            defaultMessage: 'Deleted document',\n          }),\n        });\n\n        trackUsage('didDeleteEntry', trackerProperty);\n\n        return res.data;\n      } catch (err) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage(DEFAULT_UNEXPECTED_ERROR_MSG),\n        });\n\n        trackUsage('didNotDeleteEntry', { error: err, ...trackerProperty });\n\n        throw err;\n      }\n    },\n    [trackUsage, deleteDocument, toggleNotification, formatMessage, formatAPIError]\n  );\n\n  const [deleteManyDocuments, { isLoading: isDeletingMany }] = useDeleteManyDocumentsMutation();\n\n  const deleteMany: IUseDocumentActs['deleteMany'] = React.useCallback(\n    async ({ model, documentIds, params }) => {\n      try {\n        trackUsage('willBulkDeleteEntries');\n\n        const res = await deleteManyDocuments({\n          model,\n          documentIds,\n          params,\n        });\n\n        if ('error' in res) {\n          toggleNotification({\n            type: 'danger',\n            message: formatAPIError(res.error),\n          });\n\n          return { error: res.error };\n        }\n\n        toggleNotification({\n          type: 'success',\n          title: formatMessage({\n            id: getTranslation('success.records.delete'),\n            defaultMessage: 'Successfully deleted.',\n          }),\n          message: '',\n        });\n\n        trackUsage('didBulkDeleteEntries');\n\n        return res.data;\n      } catch (err) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage(DEFAULT_UNEXPECTED_ERROR_MSG),\n        });\n\n        trackUsage('didNotBulkDeleteEntries');\n\n        throw err;\n      }\n    },\n    [trackUsage, deleteManyDocuments, toggleNotification, formatMessage, formatAPIError]\n  );\n\n  const [discardDocument, { isLoading: isDiscardingDocument }] = useDiscardDocumentMutation();\n  const discard: IUseDocumentActs['discard'] = React.useCallback(\n    async ({ collectionType, model, documentId, params }) => {\n      try {\n        const res = await discardDocument({\n          collectionType,\n          model,\n          documentId,\n          params,\n        });\n\n        if ('error' in res) {\n          toggleNotification({\n            type: 'danger',\n            message: formatAPIError(res.error),\n          });\n\n          return { error: res.error };\n        }\n\n        toggleNotification({\n          type: 'success',\n          message: formatMessage({\n            id: 'content-manager.success.record.discard',\n            defaultMessage: 'Changes discarded',\n          }),\n        });\n\n        return res.data;\n      } catch (err) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage(DEFAULT_UNEXPECTED_ERROR_MSG),\n        });\n\n        throw err;\n      }\n    },\n    [discardDocument, formatAPIError, formatMessage, toggleNotification]\n  );\n\n  const [publishDocument, { isLoading: isPublishing }] = usePublishDocumentMutation();\n  const publish: IUseDocumentActs['publish'] = React.useCallback(\n    async ({ collectionType, model, documentId, params }, data) => {\n      try {\n        trackUsage('willPublishEntry', { documentId });\n\n        const res = await publishDocument({\n          collectionType,\n          model,\n          documentId,\n          data,\n          params,\n        });\n\n        if ('error' in res) {\n          toggleNotification({ type: 'danger', message: formatAPIError(res.error) });\n          return { error: res.error };\n        }\n\n        trackUsage('didPublishEntry', { documentId, fromPreview, fromRelationModal });\n\n        toggleNotification({\n          type: 'success',\n          message: formatMessage({\n            id: getTranslation('success.record.publish'),\n            defaultMessage: 'Published document',\n          }),\n        });\n\n        return res.data;\n      } catch (err) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage(DEFAULT_UNEXPECTED_ERROR_MSG),\n        });\n\n        throw err;\n      }\n    },\n    [\n      trackUsage,\n      publishDocument,\n      fromPreview,\n      fromRelationModal,\n      toggleNotification,\n      formatMessage,\n      formatAPIError,\n    ]\n  );\n\n  const [publishManyDocuments, { isLoading: isPublishingMany }] = usePublishManyDocumentsMutation();\n  const publishMany: IUseDocumentActs['publishMany'] = React.useCallback(\n    async ({ model, documentIds, params }) => {\n      try {\n        // TODO Confirm tracking events for bulk publish?\n\n        const res = await publishManyDocuments({\n          model,\n          documentIds,\n          params,\n        });\n        if ('error' in res) {\n          toggleNotification({ type: 'danger', message: formatAPIError(res.error) });\n          return { error: res.error };\n        }\n\n        toggleNotification({\n          type: 'success',\n          message: formatMessage({\n            id: getTranslation('success.record.publish'),\n            defaultMessage: 'Published document',\n          }),\n        });\n\n        return res.data;\n      } catch (err) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage(DEFAULT_UNEXPECTED_ERROR_MSG),\n        });\n        throw err;\n      }\n    },\n    [\n      // trackUsage,\n      publishManyDocuments,\n      toggleNotification,\n      formatMessage,\n      formatAPIError,\n    ]\n  );\n\n  const [updateDocument, { isLoading: isUpdating }] = useUpdateDocumentMutation();\n  const update: IUseDocumentActs['update'] = React.useCallback(\n    async ({ collectionType, model, documentId, params }, data, trackerProperty) => {\n      try {\n        trackUsage('willEditEntry', trackerProperty);\n\n        const res = await updateDocument({\n          collectionType,\n          model,\n          documentId,\n          data,\n          params,\n        });\n\n        if ('error' in res) {\n          toggleNotification({ type: 'danger', message: formatAPIError(res.error) });\n\n          trackUsage('didNotEditEntry', { error: res.error, ...trackerProperty });\n\n          return { error: res.error };\n        }\n\n        trackUsage('didEditEntry', {\n          ...trackerProperty,\n          documentId: res.data.data.documentId,\n          fromPreview,\n          fromRelationModal,\n        });\n        toggleNotification({\n          type: 'success',\n          message: formatMessage({\n            id: getTranslation('success.record.save'),\n            defaultMessage: 'Saved document',\n          }),\n        });\n\n        return res.data;\n      } catch (err) {\n        trackUsage('didNotEditEntry', { error: err, ...trackerProperty });\n\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage(DEFAULT_UNEXPECTED_ERROR_MSG),\n        });\n\n        throw err;\n      }\n    },\n    [\n      trackUsage,\n      updateDocument,\n      fromPreview,\n      fromRelationModal,\n      toggleNotification,\n      formatMessage,\n      formatAPIError,\n    ]\n  );\n\n  const [unpublishDocument] = useUnpublishDocumentMutation();\n  const unpublish: IUseDocumentActs['unpublish'] = React.useCallback(\n    async ({ collectionType, model, documentId, params }, discardDraft = false) => {\n      try {\n        trackUsage('willUnpublishEntry');\n\n        const res = await unpublishDocument({\n          collectionType,\n          model,\n          documentId,\n          params,\n          data: {\n            discardDraft,\n          },\n        });\n\n        if ('error' in res) {\n          toggleNotification({ type: 'danger', message: formatAPIError(res.error) });\n\n          return { error: res.error };\n        }\n\n        trackUsage('didUnpublishEntry');\n\n        toggleNotification({\n          type: 'success',\n          message: formatMessage({\n            id: getTranslation('success.record.unpublish'),\n            defaultMessage: 'Unpublished document',\n          }),\n        });\n\n        return res.data;\n      } catch (err) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage(DEFAULT_UNEXPECTED_ERROR_MSG),\n        });\n\n        throw err;\n      }\n    },\n    [trackUsage, unpublishDocument, toggleNotification, formatMessage, formatAPIError]\n  );\n\n  const [unpublishManyDocuments, { isLoading: isUnpublishingMany }] =\n    useUnpublishManyDocumentsMutation();\n  const unpublishMany: IUseDocumentActs['unpublishMany'] = React.useCallback(\n    async ({ model, documentIds, params }) => {\n      try {\n        trackUsage('willBulkUnpublishEntries');\n\n        const res = await unpublishManyDocuments({\n          model,\n          documentIds,\n          params,\n        });\n\n        if ('error' in res) {\n          toggleNotification({ type: 'danger', message: formatAPIError(res.error) });\n\n          return { error: res.error };\n        }\n\n        trackUsage('didBulkUnpublishEntries');\n\n        toggleNotification({\n          type: 'success',\n          title: formatMessage({\n            id: getTranslation('success.records.unpublish'),\n            defaultMessage: 'Successfully unpublished.',\n          }),\n          message: '',\n        });\n\n        return res.data;\n      } catch (err) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage(DEFAULT_UNEXPECTED_ERROR_MSG),\n        });\n\n        trackUsage('didNotBulkUnpublishEntries');\n\n        throw err;\n      }\n    },\n    [trackUsage, unpublishManyDocuments, toggleNotification, formatMessage, formatAPIError]\n  );\n\n  const [createDocument] = useCreateDocumentMutation();\n  const create: IUseDocumentActs['create'] = React.useCallback(\n    async ({ model, params }, data, trackerProperty) => {\n      try {\n        const res = await createDocument({\n          model,\n          data,\n          params,\n        });\n\n        if ('error' in res) {\n          toggleNotification({ type: 'danger', message: formatAPIError(res.error) });\n\n          trackUsage('didNotCreateEntry', { error: res.error, ...trackerProperty });\n\n          return { error: res.error };\n        }\n\n        trackUsage('didCreateEntry', { ...trackerProperty, documentId: res.data.data.documentId });\n\n        toggleNotification({\n          type: 'success',\n          message: formatMessage({\n            id: getTranslation('success.record.save'),\n            defaultMessage: 'Saved document',\n          }),\n        });\n\n        setCurrentStep('contentManager.success');\n\n        return res.data;\n      } catch (err) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage(DEFAULT_UNEXPECTED_ERROR_MSG),\n        });\n\n        trackUsage('didNotCreateEntry', { error: err, ...trackerProperty });\n\n        throw err;\n      }\n    },\n    [createDocument, formatAPIError, formatMessage, setCurrentStep, toggleNotification, trackUsage]\n  );\n\n  const [autoCloneDocument] = useAutoCloneDocumentMutation();\n  const autoClone: IUseDocumentActs['autoClone'] = React.useCallback(\n    async ({ model, sourceId }) => {\n      try {\n        const res = await autoCloneDocument({\n          model,\n          sourceId,\n        });\n\n        if ('error' in res) {\n          return { error: res.error };\n        }\n\n        toggleNotification({\n          type: 'success',\n          message: formatMessage({\n            id: getTranslation('success.record.clone'),\n            defaultMessage: 'Cloned document',\n          }),\n        });\n\n        return res.data;\n      } catch (err) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage(DEFAULT_UNEXPECTED_ERROR_MSG),\n        });\n\n        throw err;\n      }\n    },\n    [autoCloneDocument, formatMessage, toggleNotification]\n  );\n\n  const [cloneDocument] = useCloneDocumentMutation();\n  const clone: IUseDocumentActs['clone'] = React.useCallback(\n    async ({ model, documentId, params }, body, trackerProperty) => {\n      try {\n        const { id: _id, ...restBody } = body;\n\n        /**\n         * If we're cloning we want to post directly to this endpoint\n         * so that the relations even if they're not listed in the EditView\n         * are correctly attached to the entry.\n         */\n        const res = await cloneDocument({\n          model,\n          sourceId: documentId,\n          data: restBody,\n          params,\n        });\n\n        if ('error' in res) {\n          toggleNotification({ type: 'danger', message: formatAPIError(res.error) });\n\n          trackUsage('didNotCreateEntry', { error: res.error, ...trackerProperty });\n\n          return { error: res.error };\n        }\n\n        trackUsage('didCreateEntry', trackerProperty);\n        toggleNotification({\n          type: 'success',\n          message: formatMessage({\n            id: getTranslation('success.record.clone'),\n            defaultMessage: 'Cloned document',\n          }),\n        });\n\n        // Redirect to normal edit view\n        navigate(`../../${res.data.data.documentId}`, { relative: 'path' });\n\n        return res.data;\n      } catch (err) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage(DEFAULT_UNEXPECTED_ERROR_MSG),\n        });\n\n        trackUsage('didNotCreateEntry', { error: err, ...trackerProperty });\n\n        throw err;\n      }\n    },\n    [cloneDocument, trackUsage, toggleNotification, formatMessage, formatAPIError, navigate]\n  );\n\n  const [getDoc] = useLazyGetDocumentQuery();\n  const getDocument: IUseDocumentActs['getDocument'] = React.useCallback(\n    async (args) => {\n      const { data } = await getDoc(args);\n\n      return data;\n    },\n    [getDoc]\n  );\n\n  return {\n    isLoading:\n      isPublishing ||\n      isUpdating ||\n      isDiscardingDocument ||\n      isDeleting ||\n      isDeletingMany ||\n      isUnpublishingMany ||\n      isPublishingMany,\n    autoClone,\n    clone,\n    create,\n    delete: _delete,\n    deleteMany,\n    discard,\n    getDocument,\n    publish,\n    publishMany,\n    unpublish,\n    unpublishMany,\n    update,\n  } satisfies IUseDocumentActs;\n};\n\nexport { useDocumentActions };\nexport type { UseDocumentActions, OperationResponse };\n","/* eslint-disable check-file/filename-naming-convention */\nimport * as React from 'react';\n\nimport { type PathRouteProps } from 'react-router-dom';\n\nconst ProtectedHistoryPage = React.lazy(() =>\n  import('./pages/History').then((mod) => ({ default: mod.ProtectedHistoryPage }))\n);\n\n/**\n * These routes will be merged with the rest of the Content Manager routes\n */\nconst routes: PathRouteProps[] = [\n  {\n    path: ':collectionType/:slug/:id/history',\n    Component: ProtectedHistoryPage,\n  },\n  {\n    path: ':collectionType/:slug/history',\n    Component: ProtectedHistoryPage,\n  },\n];\n\nexport { routes };\n","/* eslint-disable check-file/filename-naming-convention */\nimport * as React from 'react';\n\nimport type { PathRouteProps } from 'react-router-dom';\n\nconst ProtectedPreviewPage = React.lazy(() =>\n  import('./pages/Preview').then((mod) => ({ default: mod.ProtectedPreviewPage }))\n);\n\nconst routes: PathRouteProps[] = [\n  {\n    path: ':collectionType/:slug/:id/preview',\n    Component: ProtectedPreviewPage,\n  },\n  {\n    path: ':collectionType/:slug/preview',\n    Component: ProtectedPreviewPage,\n  },\n];\n\nexport { routes };\n","/* eslint-disable check-file/filename-naming-convention */\nimport { lazy } from 'react';\n\nimport { Navigate, PathRouteProps, useParams } from 'react-router-dom';\n\nimport { COLLECTION_TYPES, SINGLE_TYPES } from './constants/collections';\nimport { routes as historyRoutes } from './history/routes';\nimport { routes as previewRoutes } from './preview/routes';\n\nconst ProtectedEditViewPage = lazy(() =>\n  import('./pages/EditView/EditViewPage').then((mod) => ({ default: mod.ProtectedEditViewPage }))\n);\nconst ProtectedListViewPage = lazy(() =>\n  import('./pages/ListView/ListViewPage').then((mod) => ({ default: mod.ProtectedListViewPage }))\n);\nconst ProtectedListConfiguration = lazy(() =>\n  import('./pages/ListConfiguration/ListConfigurationPage').then((mod) => ({\n    default: mod.ProtectedListConfiguration,\n  }))\n);\nconst ProtectedEditConfigurationPage = lazy(() =>\n  import('./pages/EditConfigurationPage').then((mod) => ({\n    default: mod.ProtectedEditConfigurationPage,\n  }))\n);\nconst ProtectedComponentConfigurationPage = lazy(() =>\n  import('./pages/ComponentConfigurationPage').then((mod) => ({\n    default: mod.ProtectedComponentConfigurationPage,\n  }))\n);\nconst NoPermissions = lazy(() =>\n  import('./pages/NoPermissionsPage').then((mod) => ({ default: mod.NoPermissions }))\n);\nconst NoContentType = lazy(() =>\n  import('./pages/NoContentTypePage').then((mod) => ({ default: mod.NoContentType }))\n);\n\nconst CollectionTypePages = () => {\n  const { collectionType } = useParams<{ collectionType: string }>();\n\n  /**\n   * We only support two types of collections.\n   */\n  if (collectionType !== COLLECTION_TYPES && collectionType !== SINGLE_TYPES) {\n    return <Navigate to=\"/404\" />;\n  }\n\n  return collectionType === COLLECTION_TYPES ? (\n    <ProtectedListViewPage />\n  ) : (\n    <ProtectedEditViewPage />\n  );\n};\n\nconst CLONE_RELATIVE_PATH = ':collectionType/:slug/clone/:origin';\nconst CLONE_PATH = `/content-manager/${CLONE_RELATIVE_PATH}`;\nconst LIST_RELATIVE_PATH = ':collectionType/:slug';\nconst LIST_PATH = `/content-manager/collection-types/:slug`;\n\nconst routes: PathRouteProps[] = [\n  {\n    path: LIST_RELATIVE_PATH,\n    element: <CollectionTypePages />,\n  },\n  {\n    path: ':collectionType/:slug/:id',\n    Component: ProtectedEditViewPage,\n  },\n  {\n    path: CLONE_RELATIVE_PATH,\n    Component: ProtectedEditViewPage,\n  },\n  {\n    path: ':collectionType/:slug/configurations/list',\n    Component: ProtectedListConfiguration,\n  },\n  {\n    path: 'components/:slug/configurations/edit',\n    Component: ProtectedComponentConfigurationPage,\n  },\n  {\n    path: ':collectionType/:slug/configurations/edit',\n    Component: ProtectedEditConfigurationPage,\n  },\n  {\n    path: '403',\n    Component: NoPermissions,\n  },\n  {\n    path: 'no-content-types',\n    Component: NoContentType,\n  },\n  ...historyRoutes,\n  ...previewRoutes,\n];\n\nexport { routes, CLONE_PATH, LIST_PATH };\n","import * as React from 'react';\n\nimport {\n  useForm,\n  useNotification,\n  NotificationConfig,\n  useAPIErrorHandler,\n  useQueryParams,\n} from '@strapi/admin/strapi-admin';\nimport {\n  Button,\n  Dialog,\n  Flex,\n  Modal,\n  Radio,\n  Typography,\n  VisuallyHidden,\n  Menu,\n  ButtonProps,\n} from '@strapi/design-system';\nimport { Cross, More, WarningCircle } from '@strapi/icons';\nimport mapValues from 'lodash/fp/mapValues';\nimport { useIntl } from 'react-intl';\nimport { useMatch, useNavigate, useParams } from 'react-router-dom';\nimport { DefaultTheme, styled } from 'styled-components';\n\nimport { PUBLISHED_AT_ATTRIBUTE_NAME } from '../../../constants/attributes';\nimport { SINGLE_TYPES } from '../../../constants/collections';\nimport { useDocumentContext } from '../../../features/DocumentContext';\nimport { useDocumentRBAC } from '../../../features/DocumentRBAC';\nimport { useDoc } from '../../../hooks/useDocument';\nimport { useDocumentActions } from '../../../hooks/useDocumentActions';\nimport { CLONE_PATH, LIST_PATH } from '../../../router';\nimport { useGetDraftRelationCountQuery } from '../../../services/documents';\nimport { isBaseQueryError, buildValidParams } from '../../../utils/api';\nimport { getTranslation } from '../../../utils/translations';\n\nimport type { RelationsFormValue } from './FormInputs/Relations/Relations';\nimport type { DocumentActionComponent } from '../../../content-manager';\n\n/* -------------------------------------------------------------------------------------------------\n * Types\n * -----------------------------------------------------------------------------------------------*/\ntype DocumentActionPosition = 'panel' | 'header' | 'table-row' | 'preview' | 'relation-modal';\n\ninterface DocumentActionDescription {\n  label: string;\n  onClick?: (event: React.SyntheticEvent) => Promise<boolean | void> | boolean | void;\n  icon?: React.ReactNode;\n  /**\n   * @default false\n   */\n  disabled?: boolean;\n  /**\n   * @default 'panel'\n   * @description Where the action should be rendered.\n   */\n  position?: DocumentActionPosition | DocumentActionPosition[];\n  dialog?: DialogOptions | NotificationOptions | ModalOptions;\n  /**\n   * @default 'secondary'\n   */\n  variant?: ButtonProps['variant'];\n  loading?: ButtonProps['loading'];\n}\n\ninterface DialogOptions {\n  type: 'dialog';\n  title: string;\n  content?: React.ReactNode;\n  variant?: ButtonProps['variant'];\n  onConfirm?: () => void | Promise<void>;\n  onCancel?: () => void | Promise<void>;\n}\n\ninterface NotificationOptions {\n  type: 'notification';\n  title: string;\n  link?: {\n    label: string;\n    url: string;\n    target?: string;\n  };\n  content?: string;\n  onClose?: () => void;\n  status?: NotificationConfig['type'];\n  timeout?: number;\n}\n\ninterface ModalOptions {\n  type: 'modal';\n  title: string;\n  content: React.ComponentType<{ onClose: () => void }> | React.ReactNode;\n  footer?: React.ComponentType<{ onClose: () => void }> | React.ReactNode;\n  onClose?: () => void;\n}\n\n/* -------------------------------------------------------------------------------------------------\n * DocumentActions\n * -----------------------------------------------------------------------------------------------*/\n\ninterface Action extends DocumentActionDescription {\n  id: string;\n}\n\ninterface DocumentActionsProps {\n  actions: Action[];\n}\n\nconst DocumentActions = ({ actions }: DocumentActionsProps) => {\n  const { formatMessage } = useIntl();\n  const [primaryAction, secondaryAction, ...restActions] = actions.filter((action) => {\n    if (action.position === undefined) {\n      return true;\n    }\n\n    const positions = Array.isArray(action.position) ? action.position : [action.position];\n    return positions.includes('panel');\n  });\n\n  if (!primaryAction) {\n    return null;\n  }\n\n  return (\n    <Flex direction=\"column\" gap={2} alignItems=\"stretch\" width=\"100%\">\n      <Flex gap={2}>\n        <DocumentActionButton {...primaryAction} variant={primaryAction.variant || 'default'} />\n        {restActions.length > 0 ? (\n          <DocumentActionsMenu\n            actions={restActions}\n            label={formatMessage({\n              id: 'content-manager.containers.edit.panels.default.more-actions',\n              defaultMessage: 'More document actions',\n            })}\n          />\n        ) : null}\n      </Flex>\n      {secondaryAction ? (\n        <DocumentActionButton\n          {...secondaryAction}\n          variant={secondaryAction.variant || 'secondary'}\n        />\n      ) : null}\n    </Flex>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * DocumentActionButton\n * -----------------------------------------------------------------------------------------------*/\n\ninterface DocumentActionButtonProps extends Action {}\n\nconst DocumentActionButton = (action: DocumentActionButtonProps) => {\n  const [dialogId, setDialogId] = React.useState<string | null>(null);\n  const { toggleNotification } = useNotification();\n\n  const handleClick = (action: Action) => async (e: React.MouseEvent) => {\n    const { onClick = () => false, dialog, id } = action;\n\n    const muteDialog = await onClick(e);\n\n    if (dialog && !muteDialog) {\n      switch (dialog.type) {\n        case 'notification':\n          toggleNotification({\n            title: dialog.title,\n            message: dialog.content,\n            type: dialog.status,\n            timeout: dialog.timeout,\n            onClose: dialog.onClose,\n          });\n          break;\n        case 'dialog':\n        case 'modal':\n          e.preventDefault();\n          setDialogId(id);\n      }\n    }\n  };\n\n  const handleClose = () => {\n    setDialogId(null);\n  };\n\n  return (\n    <>\n      <Button\n        flex=\"auto\"\n        startIcon={action.icon}\n        disabled={action.disabled}\n        onClick={handleClick(action)}\n        justifyContent=\"center\"\n        variant={action.variant || 'default'}\n        paddingTop=\"7px\"\n        paddingBottom=\"7px\"\n        loading={action.loading}\n      >\n        {action.label}\n      </Button>\n      {action.dialog?.type === 'dialog' ? (\n        <DocumentActionConfirmDialog\n          {...action.dialog}\n          variant={action.dialog?.variant ?? action.variant}\n          isOpen={dialogId === action.id}\n          onClose={handleClose}\n        />\n      ) : null}\n      {action.dialog?.type === 'modal' ? (\n        <DocumentActionModal\n          {...action.dialog}\n          onModalClose={handleClose}\n          isOpen={dialogId === action.id}\n        />\n      ) : null}\n    </>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * DocumentActionMenu\n * -----------------------------------------------------------------------------------------------*/\ninterface DocumentActionsMenuProps {\n  actions: Action[];\n  children?: React.ReactNode;\n  label?: string;\n  variant?: 'ghost' | 'tertiary';\n}\n\nconst MenuItem = styled(Menu.Item)<{ isVariantDanger?: boolean; isDisabled?: boolean }>`\n  &:hover {\n    background: ${({ theme, isVariantDanger, isDisabled }) =>\n      isVariantDanger && !isDisabled ? theme.colors.danger100 : 'neutral'};\n  }\n`;\n\nconst DocumentActionsMenu = ({\n  actions,\n  children,\n  label,\n  variant = 'tertiary',\n}: DocumentActionsMenuProps) => {\n  const [isOpen, setIsOpen] = React.useState(false);\n  const [dialogId, setDialogId] = React.useState<string | null>(null);\n  const { formatMessage } = useIntl();\n  const { toggleNotification } = useNotification();\n  const isDisabled = actions.every((action) => action.disabled) || actions.length === 0;\n\n  const handleClick = (action: Action) => async (e: React.SyntheticEvent) => {\n    const { onClick = () => false, dialog, id } = action;\n\n    const muteDialog = await onClick(e);\n\n    if (dialog && !muteDialog) {\n      switch (dialog.type) {\n        case 'notification':\n          toggleNotification({\n            title: dialog.title,\n            message: dialog.content,\n            type: dialog.status,\n            timeout: dialog.timeout,\n            onClose: dialog.onClose,\n          });\n          break;\n        case 'dialog':\n        case 'modal':\n          setDialogId(id);\n      }\n    }\n  };\n\n  const handleClose = () => {\n    setDialogId(null);\n    setIsOpen(false);\n  };\n\n  return (\n    <Menu.Root open={isOpen} onOpenChange={setIsOpen}>\n      <Menu.Trigger\n        disabled={isDisabled}\n        size=\"S\"\n        endIcon={null}\n        paddingTop=\"4px\"\n        paddingLeft=\"7px\"\n        paddingRight=\"7px\"\n        variant={variant}\n      >\n        <More aria-hidden focusable={false} />\n        <VisuallyHidden tag=\"span\">\n          {label ||\n            formatMessage({\n              id: 'content-manager.containers.edit.panels.default.more-actions',\n              defaultMessage: 'More document actions',\n            })}\n        </VisuallyHidden>\n      </Menu.Trigger>\n      <Menu.Content maxHeight={undefined} popoverPlacement=\"bottom-end\">\n        {actions.map((action) => {\n          return (\n            <MenuItem\n              disabled={action.disabled}\n              /* @ts-expect-error â€“ TODO: this is an error in the DS where it is most likely a synthetic event, not regular. */\n              onSelect={handleClick(action)}\n              display=\"block\"\n              key={action.id}\n              isVariantDanger={action.variant === 'danger'}\n              isDisabled={action.disabled}\n            >\n              <Flex justifyContent=\"space-between\" gap={4}>\n                <Flex\n                  color={!action.disabled ? convertActionVariantToColor(action.variant) : 'inherit'}\n                  gap={2}\n                  tag=\"span\"\n                >\n                  <Flex\n                    tag=\"span\"\n                    color={\n                      !action.disabled ? convertActionVariantToIconColor(action.variant) : 'inherit'\n                    }\n                  >\n                    {action.icon}\n                  </Flex>\n                  {action.label}\n                </Flex>\n              </Flex>\n            </MenuItem>\n          );\n        })}\n        {children}\n      </Menu.Content>\n      {actions.map((action) => {\n        return (\n          <React.Fragment key={action.id}>\n            {action.dialog?.type === 'dialog' ? (\n              <DocumentActionConfirmDialog\n                {...action.dialog}\n                variant={action.variant}\n                isOpen={dialogId === action.id}\n                onClose={handleClose}\n              />\n            ) : null}\n            {action.dialog?.type === 'modal' ? (\n              <DocumentActionModal\n                {...action.dialog}\n                onModalClose={handleClose}\n                isOpen={dialogId === action.id}\n              />\n            ) : null}\n          </React.Fragment>\n        );\n      })}\n    </Menu.Root>\n  );\n};\n\nconst convertActionVariantToColor = (\n  variant: DocumentActionDescription['variant'] = 'secondary'\n): keyof DefaultTheme['colors'] | undefined => {\n  switch (variant) {\n    case 'danger':\n      return 'danger600';\n    case 'secondary':\n      return undefined;\n    case 'success':\n      return 'success600';\n    default:\n      return 'primary600';\n  }\n};\n\nconst convertActionVariantToIconColor = (\n  variant: DocumentActionDescription['variant'] = 'secondary'\n): keyof DefaultTheme['colors'] | undefined => {\n  switch (variant) {\n    case 'danger':\n      return 'danger600';\n    case 'secondary':\n      return 'neutral500';\n    case 'success':\n      return 'success600';\n    default:\n      return 'primary600';\n  }\n};\n\n/* -------------------------------------------------------------------------------------------------\n * DocumentActionConfirmDialog\n * -----------------------------------------------------------------------------------------------*/\n\ninterface DocumentActionConfirmDialogProps extends DialogOptions, Pick<Action, 'variant'> {\n  onClose: () => void;\n  isOpen: Dialog.Props['open'];\n  loading?: ButtonProps['loading'];\n}\n\nconst DocumentActionConfirmDialog = ({\n  onClose,\n  onCancel,\n  onConfirm,\n  title,\n  content,\n  isOpen,\n  variant = 'secondary',\n  loading,\n}: DocumentActionConfirmDialogProps) => {\n  const { formatMessage } = useIntl();\n\n  const handleClose = async () => {\n    if (onCancel) {\n      await onCancel();\n    }\n\n    onClose();\n  };\n\n  const handleConfirm = async () => {\n    if (onConfirm) {\n      await onConfirm();\n    }\n\n    onClose();\n  };\n\n  return (\n    <Dialog.Root open={isOpen} onOpenChange={handleClose}>\n      <Dialog.Content>\n        <Dialog.Header>{title}</Dialog.Header>\n        <Dialog.Body>{content}</Dialog.Body>\n        <Dialog.Footer>\n          <Dialog.Cancel>\n            <Button variant=\"tertiary\" fullWidth>\n              {formatMessage({\n                id: 'app.components.Button.cancel',\n                defaultMessage: 'Cancel',\n              })}\n            </Button>\n          </Dialog.Cancel>\n          <Button onClick={handleConfirm} variant={variant} fullWidth loading={loading}>\n            {formatMessage({\n              id: 'app.components.Button.confirm',\n              defaultMessage: 'Confirm',\n            })}\n          </Button>\n        </Dialog.Footer>\n      </Dialog.Content>\n    </Dialog.Root>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * DocumentActionModal\n * -----------------------------------------------------------------------------------------------*/\n\ninterface DocumentActionModalProps extends ModalOptions {\n  onModalClose: () => void;\n  isOpen?: boolean;\n}\n\nconst DocumentActionModal = ({\n  isOpen,\n  title,\n  onClose,\n  footer: Footer,\n  content: Content,\n  onModalClose,\n}: DocumentActionModalProps) => {\n  const handleClose = () => {\n    if (onClose) {\n      onClose();\n    }\n\n    onModalClose();\n  };\n\n  return (\n    <Modal.Root open={isOpen} onOpenChange={handleClose}>\n      <Modal.Content>\n        <Modal.Header>\n          <Modal.Title>{title}</Modal.Title>\n        </Modal.Header>\n        {typeof Content === 'function' ? (\n          <Content onClose={handleClose} />\n        ) : (\n          <Modal.Body>{Content}</Modal.Body>\n        )}\n        {typeof Footer === 'function' ? <Footer onClose={handleClose} /> : Footer}\n      </Modal.Content>\n    </Modal.Root>\n  );\n};\n\nconst transformData = (data: Record<string, any>): any => {\n  if (Array.isArray(data)) {\n    return data.map(transformData);\n  }\n\n  if (typeof data === 'object' && data !== null) {\n    if ('apiData' in data) {\n      return data.apiData;\n    }\n\n    return mapValues(transformData)(data);\n  }\n\n  return data;\n};\n\n/* -------------------------------------------------------------------------------------------------\n * DocumentActionComponents\n * -----------------------------------------------------------------------------------------------*/\n\nconst PublishAction: DocumentActionComponent = ({\n  activeTab,\n  documentId,\n  model,\n  collectionType,\n  meta,\n  document,\n  onPreview,\n  fromPreview = false,\n  fromRelationModal = false,\n}) => {\n  const schema = useDocumentContext('PublishAction', (state) => state.document.schema);\n  const navigate = useNavigate();\n  const { toggleNotification } = useNotification();\n  const { _unstableFormatValidationErrors: formatValidationErrors } = useAPIErrorHandler();\n  const isListView = useMatch(LIST_PATH) !== null;\n  const isCloning = useMatch(CLONE_PATH) !== null;\n  const { id } = useParams();\n  const { formatMessage } = useIntl();\n  const canPublish = useDocumentRBAC('PublishAction', ({ canPublish }) => canPublish);\n  const { publish, isLoading } = useDocumentActions(fromPreview, fromRelationModal);\n  const [\n    countDraftRelations,\n    { isLoading: isLoadingDraftRelations, isError: isErrorDraftRelations },\n  ] = useGetDraftRelationCountQuery();\n  const [localCountOfDraftRelations, setLocalCountOfDraftRelations] = React.useState(0);\n  const [serverCountOfDraftRelations, setServerCountOfDraftRelations] = React.useState(0);\n\n  const [{ query, rawQuery }] = useQueryParams();\n  const params = React.useMemo(() => buildValidParams(query), [query]);\n\n  const modified = useForm('PublishAction', ({ modified }) => modified);\n  const setSubmitting = useForm('PublishAction', ({ setSubmitting }) => setSubmitting);\n  const isSubmitting = useForm('PublishAction', ({ isSubmitting }) => isSubmitting);\n  const validate = useForm('PublishAction', (state) => state.validate);\n  const setErrors = useForm('PublishAction', (state) => state.setErrors);\n  const formValues = useForm('PublishAction', ({ values }) => values);\n\n  const rootDocumentMeta = useDocumentContext('PublishAction', (state) => state.rootDocumentMeta);\n  const currentDocumentMeta = useDocumentContext('PublishAction', (state) => state.meta);\n\n  React.useEffect(() => {\n    if (isErrorDraftRelations) {\n      toggleNotification({\n        type: 'danger',\n        message: formatMessage({\n          id: getTranslation('error.records.fetch-draft-relatons'),\n          defaultMessage: 'An error occurred while fetching draft relations on this document.',\n        }),\n      });\n    }\n  }, [isErrorDraftRelations, toggleNotification, formatMessage]);\n\n  React.useEffect(() => {\n    const localDraftRelations = new Set();\n\n    /**\n     * Extracts draft relations from the provided data object.\n     * It checks for a connect array of relations.\n     * If a relation has a status of 'draft', its id is added to the localDraftRelations set.\n     */\n    const extractDraftRelations = (data: Omit<RelationsFormValue, 'disconnect'>) => {\n      const relations = data.connect || [];\n      relations.forEach((relation) => {\n        if (relation.status === 'draft') {\n          localDraftRelations.add(relation.id);\n        }\n      });\n    };\n\n    /**\n     * Recursively traverses the provided data object to extract draft relations from arrays within 'connect' keys.\n     * If the data is an object, it looks for 'connect' keys to pass their array values to extractDraftRelations.\n     * It recursively calls itself for any non-null objects it contains.\n     */\n    const traverseAndExtract = (data: { [field: string]: any }) => {\n      Object.entries(data).forEach(([key, value]) => {\n        if (key === 'connect' && Array.isArray(value)) {\n          extractDraftRelations({ connect: value });\n        } else if (typeof value === 'object' && value !== null) {\n          traverseAndExtract(value);\n        }\n      });\n    };\n\n    if (!documentId || modified) {\n      traverseAndExtract(formValues);\n      setLocalCountOfDraftRelations(localDraftRelations.size);\n    }\n  }, [documentId, modified, formValues, setLocalCountOfDraftRelations]);\n\n  React.useEffect(() => {\n    if (!document || !document.documentId || isListView) {\n      return;\n    }\n\n    const fetchDraftRelationsCount = async () => {\n      const { data, error } = await countDraftRelations({\n        collectionType,\n        model,\n        documentId,\n        params,\n      });\n\n      if (error) {\n        throw error;\n      }\n\n      if (data) {\n        setServerCountOfDraftRelations(data.data);\n      }\n    };\n\n    fetchDraftRelationsCount();\n  }, [isListView, document, documentId, countDraftRelations, collectionType, model, params]);\n\n  const isDocumentPublished =\n    (document?.[PUBLISHED_AT_ATTRIBUTE_NAME] ||\n      meta?.availableStatus.some((doc) => doc[PUBLISHED_AT_ATTRIBUTE_NAME] !== null)) &&\n    document?.status !== 'modified';\n\n  if (!schema?.options?.draftAndPublish) {\n    return null;\n  }\n\n  const performPublish = async () => {\n    setSubmitting(true);\n\n    try {\n      const { errors } = await validate(true, {\n        status: 'published',\n      });\n\n      if (errors) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage({\n            id: 'content-manager.validation.error',\n            defaultMessage:\n              'There are validation errors in your document. Please fix them before saving.',\n          }),\n        });\n\n        return;\n      }\n\n      const isPublishingRelation = rootDocumentMeta.documentId !== currentDocumentMeta.documentId;\n      const res = await publish(\n        {\n          collectionType,\n          model,\n          documentId,\n          params: isPublishingRelation ? currentDocumentMeta.params : params,\n        },\n        transformData(formValues)\n      );\n\n      if ('data' in res && collectionType !== SINGLE_TYPES) {\n        /**\n         * TODO: refactor the router so we can just do `../${res.data.documentId}` instead of this.\n         */\n        if (id === 'create') {\n          navigate({\n            pathname: `../${collectionType}/${model}/${res.data.documentId}`,\n            search: rawQuery,\n          });\n        }\n      } else if (\n        'error' in res &&\n        isBaseQueryError(res.error) &&\n        res.error.name === 'ValidationError'\n      ) {\n        setErrors(formatValidationErrors(res.error));\n      }\n    } finally {\n      setSubmitting(false);\n\n      if (onPreview) {\n        onPreview();\n      }\n    }\n  };\n\n  const totalDraftRelations = localCountOfDraftRelations + serverCountOfDraftRelations;\n  // TODO skipping this for now as there is a bug with the draft relation count that will be worked on separately\n  // see RFC \"Count draft relations\" in Notion\n  const enableDraftRelationsCount = false;\n  const hasDraftRelations = enableDraftRelationsCount && totalDraftRelations > 0;\n\n  return {\n    loading: isLoading,\n    position: ['panel', 'preview', 'relation-modal'],\n    /**\n     * Disabled when:\n     *  - currently if you're cloning a document we don't support publish & clone at the same time.\n     *  - the form is submitting\n     *  - the active tab is the published tab\n     *  - the document is already published & not modified\n     *  - the document is being created & not modified\n     *  - the user doesn't have the permission to publish\n     */\n    disabled:\n      isCloning ||\n      isSubmitting ||\n      isLoadingDraftRelations ||\n      activeTab === 'published' ||\n      (!modified && isDocumentPublished) ||\n      (!modified && !document?.documentId) ||\n      !canPublish,\n    label: formatMessage({\n      id: 'app.utils.publish',\n      defaultMessage: 'Publish',\n    }),\n    onClick: async () => {\n      if (hasDraftRelations) {\n        // In this case we need to show the user a confirmation dialog.\n        // Return from the onClick and let the dialog handle the process.\n        return;\n      }\n\n      await performPublish();\n    },\n    dialog: hasDraftRelations\n      ? {\n          type: 'dialog',\n          variant: 'danger',\n          footer: null,\n          title: formatMessage({\n            id: getTranslation(`popUpwarning.warning.bulk-has-draft-relations.title`),\n            defaultMessage: 'Confirmation',\n          }),\n          content: formatMessage(\n            {\n              id: getTranslation(`popUpwarning.warning.bulk-has-draft-relations.message`),\n              defaultMessage:\n                'This entry is related to {count, plural, one {# draft entry} other {# draft entries}}. Publishing it could leave broken links in your app.',\n            },\n            {\n              count: totalDraftRelations,\n            }\n          ),\n          onConfirm: async () => {\n            await performPublish();\n          },\n        }\n      : undefined,\n  };\n};\n\nPublishAction.type = 'publish';\nPublishAction.position = ['panel', 'preview', 'relation-modal'];\n\nconst UpdateAction: DocumentActionComponent = ({\n  activeTab,\n  documentId,\n  model,\n  collectionType,\n  onPreview,\n  fromPreview = false,\n  fromRelationModal = false,\n}) => {\n  const navigate = useNavigate();\n  const { toggleNotification } = useNotification();\n  const { _unstableFormatValidationErrors: formatValidationErrors } = useAPIErrorHandler();\n  const cloneMatch = useMatch(CLONE_PATH);\n  const isCloning = cloneMatch !== null;\n  const { formatMessage } = useIntl();\n  const { create, update, clone, isLoading } = useDocumentActions(fromPreview, fromRelationModal);\n  const [{ query, rawQuery }] = useQueryParams();\n  const params = React.useMemo(() => buildValidParams(query), [query]);\n\n  const isSubmitting = useForm('UpdateAction', ({ isSubmitting }) => isSubmitting);\n  const modified = useForm('UpdateAction', ({ modified }) => modified);\n  const setSubmitting = useForm('UpdateAction', ({ setSubmitting }) => setSubmitting);\n  const document = useForm('UpdateAction', ({ values }) => values);\n  const validate = useForm('UpdateAction', (state) => state.validate);\n  const setErrors = useForm('UpdateAction', (state) => state.setErrors);\n  const resetForm = useForm('PublishAction', ({ resetForm }) => resetForm);\n\n  const rootDocumentMeta = useDocumentContext('UpdateAction', (state) => state.rootDocumentMeta);\n  const currentDocumentMeta = useDocumentContext('UpdateAction', (state) => state.meta);\n\n  const handleUpdate = React.useCallback(async () => {\n    setSubmitting(true);\n\n    try {\n      if (!modified) {\n        return;\n      }\n\n      const { errors } = await validate(true, {\n        status: 'draft',\n      });\n\n      if (errors) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage({\n            id: 'content-manager.validation.error',\n            defaultMessage:\n              'There are validation errors in your document. Please fix them before saving.',\n          }),\n        });\n\n        return;\n      }\n\n      if (isCloning) {\n        const res = await clone(\n          {\n            model,\n            documentId: cloneMatch.params.origin!,\n            params,\n          },\n          transformData(document)\n        );\n\n        if ('data' in res) {\n          navigate(\n            {\n              pathname: `../${res.data.documentId}`,\n              search: rawQuery,\n            },\n            { relative: 'path' }\n          );\n        } else if (\n          'error' in res &&\n          isBaseQueryError(res.error) &&\n          res.error.name === 'ValidationError'\n        ) {\n          setErrors(formatValidationErrors(res.error));\n        }\n      } else if (documentId || collectionType === SINGLE_TYPES) {\n        const isEditingRelation = rootDocumentMeta.documentId !== currentDocumentMeta.documentId;\n\n        const res = await update(\n          {\n            collectionType,\n            model,\n            documentId,\n            params: isEditingRelation ? currentDocumentMeta.params : params,\n          },\n          transformData(document)\n        );\n\n        if ('error' in res && isBaseQueryError(res.error) && res.error.name === 'ValidationError') {\n          setErrors(formatValidationErrors(res.error));\n        } else {\n          resetForm();\n        }\n      } else {\n        const res = await create(\n          {\n            model,\n            params,\n          },\n          transformData(document)\n        );\n\n        if ('data' in res && collectionType !== SINGLE_TYPES) {\n          navigate(\n            {\n              pathname: `../${res.data.documentId}`,\n              search: rawQuery,\n            },\n            { replace: true, relative: 'path' }\n          );\n        } else if (\n          'error' in res &&\n          isBaseQueryError(res.error) &&\n          res.error.name === 'ValidationError'\n        ) {\n          setErrors(formatValidationErrors(res.error));\n        }\n      }\n    } finally {\n      setSubmitting(false);\n      if (onPreview) {\n        onPreview();\n      }\n    }\n  }, [\n    clone,\n    cloneMatch?.params.origin,\n    collectionType,\n    create,\n    currentDocumentMeta.documentId,\n    currentDocumentMeta.params,\n    document,\n    documentId,\n    formatMessage,\n    formatValidationErrors,\n    isCloning,\n    model,\n    modified,\n    navigate,\n    onPreview,\n    params,\n    rawQuery,\n    resetForm,\n    rootDocumentMeta.documentId,\n    setErrors,\n    setSubmitting,\n    toggleNotification,\n    update,\n    validate,\n  ]);\n\n  // Auto-save on CMD+S or CMD+Enter on macOS, and CTRL+S or CTRL+Enter on Windows/Linux\n  React.useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Enter' && (e.metaKey || e.ctrlKey)) {\n        e.preventDefault();\n        handleUpdate();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleUpdate]);\n\n  return {\n    loading: isLoading,\n    /**\n     * Disabled when:\n     * - the form is submitting\n     * - the document is not modified & we're not cloning (you can save a clone entity straight away)\n     * - the active tab is the published tab\n     */\n    disabled: isSubmitting || (!modified && !isCloning) || activeTab === 'published',\n    label: formatMessage({\n      id: 'global.save',\n      defaultMessage: 'Save',\n    }),\n    onClick: handleUpdate,\n    position: ['panel', 'preview', 'relation-modal'],\n  };\n};\n\nUpdateAction.type = 'update';\nUpdateAction.position = ['panel', 'preview', 'relation-modal'];\n\nconst UNPUBLISH_DRAFT_OPTIONS = {\n  KEEP: 'keep',\n  DISCARD: 'discard',\n};\n\nconst UnpublishAction: DocumentActionComponent = ({\n  activeTab,\n  documentId,\n  model,\n  collectionType,\n  document,\n}) => {\n  const { formatMessage } = useIntl();\n  const { schema } = useDoc();\n  const canPublish = useDocumentRBAC('UnpublishAction', ({ canPublish }) => canPublish);\n  const { unpublish } = useDocumentActions();\n  const [{ query }] = useQueryParams();\n  const params = React.useMemo(() => buildValidParams(query), [query]);\n  const { toggleNotification } = useNotification();\n  const [shouldKeepDraft, setShouldKeepDraft] = React.useState(true);\n\n  const isDocumentModified = document?.status === 'modified';\n\n  const handleChange = (value: string) => {\n    setShouldKeepDraft(value === UNPUBLISH_DRAFT_OPTIONS.KEEP);\n  };\n\n  if (!schema?.options?.draftAndPublish) {\n    return null;\n  }\n\n  return {\n    disabled:\n      !canPublish ||\n      activeTab === 'published' ||\n      (document?.status !== 'published' && document?.status !== 'modified'),\n    label: formatMessage({\n      id: 'app.utils.unpublish',\n      defaultMessage: 'Unpublish',\n    }),\n    icon: <Cross />,\n    onClick: async () => {\n      /**\n       * return if there's no id & we're in a collection type, or the status modified\n       * for either collection type because we use a dialog to handle the process in\n       * the latter case.\n       */\n      if ((!documentId && collectionType !== SINGLE_TYPES) || isDocumentModified) {\n        if (!documentId) {\n          // This should never, ever, happen.\n          console.error(\n            \"You're trying to unpublish a document without an id, this is likely a bug with Strapi. Please open an issue.\"\n          );\n\n          toggleNotification({\n            message: formatMessage({\n              id: 'content-manager.actions.unpublish.error',\n              defaultMessage: 'An error occurred while trying to unpublish the document.',\n            }),\n            type: 'danger',\n          });\n        }\n\n        return;\n      }\n\n      await unpublish({\n        collectionType,\n        model,\n        documentId,\n        params,\n      });\n    },\n    dialog: isDocumentModified\n      ? {\n          type: 'dialog',\n          title: formatMessage({\n            id: 'app.components.ConfirmDialog.title',\n            defaultMessage: 'Confirmation',\n          }),\n          content: (\n            <Flex alignItems=\"flex-start\" direction=\"column\" gap={6}>\n              <Flex width=\"100%\" direction=\"column\" gap={2}>\n                <WarningCircle width=\"24px\" height=\"24px\" fill=\"danger600\" />\n                <Typography tag=\"p\" variant=\"omega\" textAlign=\"center\">\n                  {formatMessage({\n                    id: 'content-manager.actions.unpublish.dialog.body',\n                    defaultMessage: 'Are you sure?',\n                  })}\n                </Typography>\n              </Flex>\n              <Radio.Group\n                defaultValue={UNPUBLISH_DRAFT_OPTIONS.KEEP}\n                name=\"discard-options\"\n                aria-label={formatMessage({\n                  id: 'content-manager.actions.unpublish.dialog.radio-label',\n                  defaultMessage: 'Choose an option to unpublish the document.',\n                })}\n                onValueChange={handleChange}\n              >\n                <Radio.Item checked={shouldKeepDraft} value={UNPUBLISH_DRAFT_OPTIONS.KEEP}>\n                  {formatMessage({\n                    id: 'content-manager.actions.unpublish.dialog.option.keep-draft',\n                    defaultMessage: 'Keep draft',\n                  })}\n                </Radio.Item>\n                <Radio.Item checked={!shouldKeepDraft} value={UNPUBLISH_DRAFT_OPTIONS.DISCARD}>\n                  {formatMessage({\n                    id: 'content-manager.actions.unpublish.dialog.option.replace-draft',\n                    defaultMessage: 'Replace draft',\n                  })}\n                </Radio.Item>\n              </Radio.Group>\n            </Flex>\n          ),\n          onConfirm: async () => {\n            if (!documentId && collectionType !== SINGLE_TYPES) {\n              // This should never, ever, happen.\n              console.error(\n                \"You're trying to unpublish a document without an id, this is likely a bug with Strapi. Please open an issue.\"\n              );\n\n              toggleNotification({\n                message: formatMessage({\n                  id: 'content-manager.actions.unpublish.error',\n                  defaultMessage: 'An error occurred while trying to unpublish the document.',\n                }),\n                type: 'danger',\n              });\n            }\n\n            await unpublish(\n              {\n                collectionType,\n                model,\n                documentId,\n                params,\n              },\n              !shouldKeepDraft\n            );\n          },\n        }\n      : undefined,\n    variant: 'danger',\n    position: ['panel', 'table-row'],\n  };\n};\n\nUnpublishAction.type = 'unpublish';\nUnpublishAction.position = 'panel';\n\nconst DiscardAction: DocumentActionComponent = ({\n  activeTab,\n  documentId,\n  model,\n  collectionType,\n  document,\n}) => {\n  const { formatMessage } = useIntl();\n  const { schema } = useDoc();\n  const canUpdate = useDocumentRBAC('DiscardAction', ({ canUpdate }) => canUpdate);\n  const { discard, isLoading } = useDocumentActions();\n  const [{ query }] = useQueryParams();\n  const params = React.useMemo(() => buildValidParams(query), [query]);\n\n  if (!schema?.options?.draftAndPublish) {\n    return null;\n  }\n\n  return {\n    disabled: !canUpdate || activeTab === 'published' || document?.status !== 'modified',\n    label: formatMessage({\n      id: 'content-manager.actions.discard.label',\n      defaultMessage: 'Discard changes',\n    }),\n    icon: <Cross />,\n    position: ['panel', 'table-row'],\n    variant: 'danger',\n    dialog: {\n      type: 'dialog',\n      title: formatMessage({\n        id: 'app.components.ConfirmDialog.title',\n        defaultMessage: 'Confirmation',\n      }),\n      content: (\n        <Flex direction=\"column\" gap={2}>\n          <WarningCircle width=\"24px\" height=\"24px\" fill=\"danger600\" />\n          <Typography tag=\"p\" variant=\"omega\" textAlign=\"center\">\n            {formatMessage({\n              id: 'content-manager.actions.discard.dialog.body',\n              defaultMessage: 'Are you sure?',\n            })}\n          </Typography>\n        </Flex>\n      ),\n      loading: isLoading,\n      onConfirm: async () => {\n        await discard({\n          collectionType,\n          model,\n          documentId,\n          params,\n        });\n      },\n    },\n  };\n};\n\nDiscardAction.type = 'discard';\nDiscardAction.position = 'panel';\n\nconst DEFAULT_ACTIONS = [PublishAction, UpdateAction, UnpublishAction, DiscardAction];\n\nexport { DocumentActions, DocumentActionsMenu, DocumentActionButton, DEFAULT_ACTIONS };\nexport type {\n  DocumentActionDescription,\n  DocumentActionPosition,\n  DialogOptions,\n  NotificationOptions,\n  ModalOptions,\n};\n","import * as React from 'react';\n\nimport { Duration, intervalToDuration, isPast } from 'date-fns';\nimport { useIntl } from 'react-intl';\n\nconst intervals: Array<keyof Duration> = ['years', 'months', 'days', 'hours', 'minutes', 'seconds'];\n\ninterface CustomInterval {\n  unit: keyof Duration;\n  text: string;\n  threshold: number;\n}\n\ninterface RelativeTimeProps extends React.ComponentPropsWithoutRef<'time'> {\n  timestamp: Date;\n  customIntervals?: CustomInterval[];\n}\n\n/**\n * Displays the relative time between a given timestamp and the current time.\n * You can display a custom message for given time intervals by passing an array of custom intervals.\n *\n * @example\n * ```jsx\n * <caption>Display \"last hour\" if the timestamp is less than an hour ago</caption>\n * <RelativeTime\n *  timestamp={new Date('2021-01-01')}\n *  customIntervals={[\n *   { unit: 'hours', threshold: 1, text: 'last hour' },\n *  ]}\n * ```\n */\nconst RelativeTime = React.forwardRef<HTMLTimeElement, RelativeTimeProps>(\n  ({ timestamp, customIntervals = [], ...restProps }, forwardedRef) => {\n    const { formatRelativeTime, formatDate, formatTime } = useIntl();\n\n    /**\n     * TODO: make this auto-update, like a clock.\n     */\n    const interval = intervalToDuration({\n      start: timestamp,\n      end: Date.now(),\n      // see https://github.com/date-fns/date-fns/issues/2891 â€“ No idea why it's all partial it returns it every time.\n    }) as Required<Duration>;\n\n    const unit =\n      intervals.find((intervalUnit) => {\n        return interval[intervalUnit] > 0 && Object.keys(interval).includes(intervalUnit);\n      }) ?? 'seconds';\n\n    const relativeTime = isPast(timestamp) ? -interval[unit] : interval[unit];\n\n    // Display custom text if interval is less than the threshold\n    const customInterval = customIntervals.find(\n      (custom) => interval[custom.unit] < custom.threshold\n    );\n\n    const displayText = customInterval\n      ? customInterval.text\n      : formatRelativeTime(relativeTime, unit, { numeric: 'auto' });\n\n    return (\n      <time\n        ref={forwardedRef}\n        dateTime={timestamp.toISOString()}\n        role=\"time\"\n        title={`${formatDate(timestamp)} ${formatTime(timestamp)}`}\n        {...restProps}\n      >\n        {displayText}\n      </time>\n    );\n  }\n);\n\nexport { RelativeTime };\nexport type { CustomInterval, RelativeTimeProps };\n","import type { SanitizedAdminUser } from '@strapi/admin/strapi-admin';\n\n/**\n * Retrieves the display name of an admin panel user\n */\nconst getDisplayName = ({\n  firstname,\n  lastname,\n  username,\n  email,\n}: Partial<\n  Pick<SanitizedAdminUser, 'firstname' | 'lastname' | 'username' | 'email'>\n> = {}): string => {\n  if (username) {\n    return username;\n  }\n\n  // firstname is not required if the user is created with a username\n  if (firstname) {\n    return `${firstname} ${lastname ?? ''}`.trim();\n  }\n\n  return email ?? '';\n};\n\nexport { getDisplayName };\n","const capitalise = (str: string): string => str.charAt(0).toUpperCase() + str.slice(1);\n\nexport { capitalise };\n","import { Status, StatusProps, Typography } from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\n\nimport { capitalise } from '../../../utils/strings';\n\ninterface DocumentStatusProps extends Omit<StatusProps, 'children' | 'variant'> {\n  /**\n   * The status of the document (draft, published, etc.)\n   * @default 'draft'\n   */\n  status?: string;\n}\n\n/**\n * @public\n * @description Displays the status of a document (draft, published, etc.)\n * and automatically calculates the appropriate variant for the status.\n */\nconst DocumentStatus = ({ status = 'draft', size = 'S', ...restProps }: DocumentStatusProps) => {\n  const statusVariant =\n    status === 'draft' ? 'secondary' : status === 'published' ? 'success' : 'alternative';\n\n  const { formatMessage } = useIntl();\n\n  return (\n    <Status {...restProps} size={size} variant={statusVariant} role=\"status\" aria-label={status}>\n      <Typography tag=\"span\" variant=\"omega\" fontWeight=\"bold\">\n        {formatMessage({\n          id: `content-manager.containers.List.${status}`,\n          defaultMessage: capitalise(status),\n        })}\n      </Typography>\n    </Status>\n  );\n};\n\nexport { DocumentStatus };\nexport type { DocumentStatusProps };\n","import * as React from 'react';\n\nimport {\n  DescriptionComponentRenderer,\n  useForm,\n  BackButton,\n  useNotification,\n  useStrapiApp,\n  useQueryParams,\n} from '@strapi/admin/strapi-admin';\nimport {\n  Box,\n  Flex,\n  SingleSelect,\n  SingleSelectOption,\n  Typography,\n  IconButton,\n  Dialog,\n} from '@strapi/design-system';\nimport { ListPlus, Pencil, Trash, WarningCircle } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\nimport { useMatch, useNavigate, useParams } from 'react-router-dom';\n\nimport { RelativeTime } from '../../../components/RelativeTime';\nimport {\n  CREATED_AT_ATTRIBUTE_NAME,\n  CREATED_BY_ATTRIBUTE_NAME,\n  PUBLISHED_AT_ATTRIBUTE_NAME,\n  PUBLISHED_BY_ATTRIBUTE_NAME,\n  UPDATED_AT_ATTRIBUTE_NAME,\n  UPDATED_BY_ATTRIBUTE_NAME,\n} from '../../../constants/attributes';\nimport { COLLECTION_TYPES, SINGLE_TYPES } from '../../../constants/collections';\nimport { useDocumentRBAC } from '../../../features/DocumentRBAC';\nimport { useDoc } from '../../../hooks/useDocument';\nimport { useDocumentActions } from '../../../hooks/useDocumentActions';\nimport { CLONE_PATH, LIST_PATH } from '../../../router';\nimport { getDisplayName } from '../../../utils/users';\n\nimport { DocumentActionsMenu } from './DocumentActions';\nimport { DocumentStatus } from './DocumentStatus';\n\nimport type { ContentManagerPlugin, DocumentActionComponent } from '../../../content-manager';\n\n/* -------------------------------------------------------------------------------------------------\n * Header\n * -----------------------------------------------------------------------------------------------*/\n\ninterface HeaderProps {\n  isCreating?: boolean;\n  status?: 'draft' | 'published' | 'modified';\n  title?: string;\n}\n\nconst Header = ({ isCreating, status, title: documentTitle = 'Untitled' }: HeaderProps) => {\n  const { formatMessage } = useIntl();\n  const isCloning = useMatch(CLONE_PATH) !== null;\n  const params = useParams<{ collectionType: string; slug: string }>();\n\n  const title = isCreating\n    ? formatMessage({\n        id: 'content-manager.containers.edit.title.new',\n        defaultMessage: 'Create an entry',\n      })\n    : documentTitle;\n\n  return (\n    <Flex direction=\"column\" alignItems=\"flex-start\" paddingTop={6} paddingBottom={4} gap={2}>\n      <BackButton\n        fallback={\n          params.collectionType === SINGLE_TYPES\n            ? undefined\n            : `../${COLLECTION_TYPES}/${params.slug}`\n        }\n      />\n      <Flex width=\"100%\" justifyContent=\"space-between\" gap=\"80px\" alignItems=\"flex-start\">\n        <Typography variant=\"alpha\" tag=\"h1\">\n          {title}\n        </Typography>\n        <HeaderToolbar />\n      </Flex>\n      {status ? (\n        <Box marginTop={1}>\n          <DocumentStatus status={isCloning ? 'draft' : status} />\n        </Box>\n      ) : null}\n    </Flex>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * HeaderToolbar\n * -----------------------------------------------------------------------------------------------*/\n\ninterface DialogOptions {\n  type: 'dialog';\n  title: string;\n  content?: React.ReactNode;\n  footer?: React.ReactNode;\n}\n\ninterface HeaderActionDescription {\n  disabled?: boolean;\n  label: string;\n  icon?: React.ReactNode;\n  type?: 'icon' | 'default';\n  onClick?: (event: React.SyntheticEvent) => Promise<boolean | void> | boolean | void;\n  dialog?: DialogOptions;\n  options?: Array<{\n    disabled?: boolean;\n    label: string;\n    startIcon?: React.ReactNode;\n    textValue?: string;\n    value: string;\n  }>;\n  onSelect?: (value: string) => void;\n  value?: string;\n  customizeContent?: (value: string) => React.ReactNode;\n}\n\n/**\n * @description Contains the document actions that have `position: header`, if there are\n * none we still render the menu because we render the information about the document there.\n */\nconst HeaderToolbar = () => {\n  const { formatMessage } = useIntl();\n  const isCloning = useMatch(CLONE_PATH) !== null;\n  const [\n    {\n      query: { status = 'draft' },\n    },\n  ] = useQueryParams<{ status: 'draft' | 'published' }>();\n  const { model, id, document, meta, collectionType } = useDoc();\n  const plugins = useStrapiApp('HeaderToolbar', (state) => state.plugins);\n\n  return (\n    <Flex gap={2}>\n      <DescriptionComponentRenderer\n        props={{\n          activeTab: status,\n          model,\n          documentId: id,\n          document: isCloning ? undefined : document,\n          meta: isCloning ? undefined : meta,\n          collectionType,\n        }}\n        descriptions={(\n          plugins['content-manager'].apis as ContentManagerPlugin['config']['apis']\n        ).getHeaderActions()}\n      >\n        {(actions) => {\n          if (actions.length > 0) {\n            return <HeaderActions actions={actions} />;\n          } else {\n            return null;\n          }\n        }}\n      </DescriptionComponentRenderer>\n      <DescriptionComponentRenderer\n        props={{\n          activeTab: status,\n          model,\n          documentId: id,\n          document: isCloning ? undefined : document,\n          meta: isCloning ? undefined : meta,\n          collectionType,\n        }}\n        descriptions={(\n          plugins['content-manager'].apis as ContentManagerPlugin['config']['apis']\n        ).getDocumentActions('header')}\n      >\n        {(actions) => {\n          const headerActions = actions.filter((action) => {\n            const positions = Array.isArray(action.position) ? action.position : [action.position];\n            return positions.includes('header');\n          });\n\n          return (\n            <DocumentActionsMenu\n              actions={headerActions}\n              label={formatMessage({\n                id: 'content-manager.containers.edit.header.more-actions',\n                defaultMessage: 'More actions',\n              })}\n            >\n              <Information activeTab={status} />\n            </DocumentActionsMenu>\n          );\n        }}\n      </DescriptionComponentRenderer>\n    </Flex>\n  );\n};\n\ninterface InformationProps {\n  activeTab: 'draft' | 'published';\n}\n\nconst Information = ({ activeTab }: InformationProps) => {\n  const { formatMessage } = useIntl();\n  const { document, meta } = useDoc();\n\n  if (!document || !document.id) {\n    return null;\n  }\n\n  /**\n   * Because in the backend separate entries are made for draft and published\n   * documents, the creator fields are different for each of them. For example,\n   * you could make your draft in January and then publish it for the first time\n   * in Feb. This would make the createdAt value for the published entry in Feb\n   * but really we want to show the document as a whole. The draft entry will also\n   * never have the publishedAt values.\n   *\n   * So, we decipher which document to show the creator for based on the activeTab.\n   */\n\n  const createAndUpdateDocument =\n    activeTab === 'draft'\n      ? document\n      : meta?.availableStatus.find((status) => status.publishedAt === null);\n\n  const publishDocument =\n    activeTab === 'published'\n      ? document\n      : meta?.availableStatus.find((status) => status.publishedAt !== null);\n\n  const creator = createAndUpdateDocument?.[CREATED_BY_ATTRIBUTE_NAME]\n    ? getDisplayName(createAndUpdateDocument[CREATED_BY_ATTRIBUTE_NAME])\n    : null;\n\n  const updator = createAndUpdateDocument?.[UPDATED_BY_ATTRIBUTE_NAME]\n    ? getDisplayName(createAndUpdateDocument[UPDATED_BY_ATTRIBUTE_NAME])\n    : null;\n\n  const information: Array<{ isDisplayed?: boolean; label: string; value: React.ReactNode }> = [\n    {\n      isDisplayed: !!publishDocument?.[PUBLISHED_AT_ATTRIBUTE_NAME],\n      label: formatMessage({\n        id: 'content-manager.containers.edit.information.last-published.label',\n        defaultMessage: 'Published',\n      }),\n      value: formatMessage(\n        {\n          id: 'content-manager.containers.edit.information.last-published.value',\n          defaultMessage: `{time}{isAnonymous, select, true {} other { by {author}}}`,\n        },\n        {\n          time: (\n            <RelativeTime timestamp={new Date(publishDocument?.[PUBLISHED_AT_ATTRIBUTE_NAME])} />\n          ),\n          isAnonymous: !publishDocument?.[PUBLISHED_BY_ATTRIBUTE_NAME],\n          author: publishDocument?.[PUBLISHED_BY_ATTRIBUTE_NAME]\n            ? getDisplayName(publishDocument?.[PUBLISHED_BY_ATTRIBUTE_NAME])\n            : null,\n        }\n      ),\n    },\n    {\n      isDisplayed: !!createAndUpdateDocument?.[UPDATED_AT_ATTRIBUTE_NAME],\n      label: formatMessage({\n        id: 'content-manager.containers.edit.information.last-draft.label',\n        defaultMessage: 'Updated',\n      }),\n      value: formatMessage(\n        {\n          id: 'content-manager.containers.edit.information.last-draft.value',\n          defaultMessage: `{time}{isAnonymous, select, true {} other { by {author}}}`,\n        },\n        {\n          time: (\n            <RelativeTime\n              timestamp={new Date(createAndUpdateDocument?.[UPDATED_AT_ATTRIBUTE_NAME])}\n            />\n          ),\n          isAnonymous: !updator,\n          author: updator,\n        }\n      ),\n    },\n    {\n      isDisplayed: !!createAndUpdateDocument?.[CREATED_AT_ATTRIBUTE_NAME],\n      label: formatMessage({\n        id: 'content-manager.containers.edit.information.document.label',\n        defaultMessage: 'Created',\n      }),\n      value: formatMessage(\n        {\n          id: 'content-manager.containers.edit.information.document.value',\n          defaultMessage: `{time}{isAnonymous, select, true {} other { by {author}}}`,\n        },\n        {\n          time: (\n            <RelativeTime\n              timestamp={new Date(createAndUpdateDocument?.[CREATED_AT_ATTRIBUTE_NAME])}\n            />\n          ),\n          isAnonymous: !creator,\n          author: creator,\n        }\n      ),\n    },\n  ].filter((info) => info.isDisplayed);\n\n  return (\n    <Flex\n      borderWidth=\"1px 0 0 0\"\n      borderStyle=\"solid\"\n      borderColor=\"neutral150\"\n      direction=\"column\"\n      marginTop={2}\n      tag=\"dl\"\n      padding={5}\n      gap={3}\n      alignItems=\"flex-start\"\n      /**\n       * The menu content has a padding of 4px, but we want our divider (the border top applied) to\n       * be flush with the menu content. So we need to adjust the margin & width to account for the padding.\n       */\n      marginLeft=\"-0.4rem\"\n      marginRight=\"-0.4rem\"\n      width=\"calc(100% + 8px)\"\n    >\n      {information.map((info) => (\n        <Flex gap={1} direction=\"column\" alignItems=\"flex-start\" key={info.label}>\n          <Typography tag=\"dt\" variant=\"pi\" fontWeight=\"bold\">\n            {info.label}\n          </Typography>\n          <Typography tag=\"dd\" variant=\"pi\" textColor=\"neutral600\">\n            {info.value}\n          </Typography>\n        </Flex>\n      ))}\n    </Flex>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * HeaderActions\n * -----------------------------------------------------------------------------------------------*/\n\ninterface HeaderActionsProps {\n  actions: Array<HeaderActionDescription & { id: string }>;\n}\n\nconst HeaderActions = ({ actions }: HeaderActionsProps) => {\n  const [dialogId, setDialogId] = React.useState<string | null>(null);\n\n  const handleClick =\n    (action: HeaderActionDescription & { id: string }) => async (e: React.MouseEvent) => {\n      if (!('options' in action)) {\n        const { onClick = () => false, dialog, id } = action;\n\n        const muteDialog = await onClick(e);\n\n        if (dialog && !muteDialog) {\n          e.preventDefault();\n          setDialogId(id);\n        }\n      }\n    };\n\n  const handleClose = () => {\n    setDialogId(null);\n  };\n\n  return (\n    <Flex gap={1}>\n      {actions.map((action) => {\n        if (action.options) {\n          return (\n            <SingleSelect\n              key={action.id}\n              size=\"S\"\n              // @ts-expect-error â€“ the DS will handle numbers, but we're not allowing the API.\n              onChange={action.onSelect}\n              aria-label={action.label}\n              {...action}\n            >\n              {action.options.map(({ label, ...option }) => (\n                <SingleSelectOption key={option.value} {...option}>\n                  {label}\n                </SingleSelectOption>\n              ))}\n            </SingleSelect>\n          );\n        } else {\n          if (action.type === 'icon') {\n            return (\n              <React.Fragment key={action.id}>\n                <IconButton\n                  disabled={action.disabled}\n                  label={action.label}\n                  size=\"S\"\n                  onClick={handleClick(action)}\n                >\n                  {action.icon}\n                </IconButton>\n                {action.dialog ? (\n                  <HeaderActionDialog\n                    {...action.dialog}\n                    isOpen={dialogId === action.id}\n                    onClose={handleClose}\n                  />\n                ) : null}\n              </React.Fragment>\n            );\n          }\n        }\n      })}\n    </Flex>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * HeaderActionDialog\n * -----------------------------------------------------------------------------------------------*/\ninterface HeaderActionDialogProps {\n  onClose: () => void;\n  onCancel?: () => Promise<void>;\n  title: string;\n  content?: React.ReactNode | ((props: { onClose: () => void }) => React.ReactNode);\n  isOpen: boolean;\n}\n\nconst HeaderActionDialog = ({\n  onClose,\n  onCancel,\n  title,\n  content: Content,\n  isOpen,\n}: HeaderActionDialogProps) => {\n  const handleClose = async () => {\n    if (onCancel) {\n      await onCancel();\n    }\n\n    onClose();\n  };\n\n  return (\n    <Dialog.Root open={isOpen} onOpenChange={handleClose}>\n      <Dialog.Content>\n        <Dialog.Header>{title}</Dialog.Header>\n        {typeof Content === 'function' ? <Content onClose={handleClose} /> : Content}\n      </Dialog.Content>\n    </Dialog.Root>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * DocumentActionComponents\n * -----------------------------------------------------------------------------------------------*/\n\nconst ConfigureTheViewAction: DocumentActionComponent = ({ collectionType, model }) => {\n  const navigate = useNavigate();\n  const { formatMessage } = useIntl();\n\n  return {\n    label: formatMessage({\n      id: 'app.links.configure-view',\n      defaultMessage: 'Configure the view',\n    }),\n    icon: <ListPlus />,\n    onClick: () => {\n      navigate(`../${collectionType}/${model}/configurations/edit`);\n    },\n    position: 'header',\n  };\n};\n\nConfigureTheViewAction.type = 'configure-the-view';\nConfigureTheViewAction.position = 'header';\n\nconst EditTheModelAction: DocumentActionComponent = ({ model }) => {\n  const navigate = useNavigate();\n  const { formatMessage } = useIntl();\n\n  return {\n    label: formatMessage({\n      id: 'content-manager.link-to-ctb',\n      defaultMessage: 'Edit the model',\n    }),\n    icon: <Pencil />,\n    onClick: () => {\n      navigate(`/plugins/content-type-builder/content-types/${model}`);\n    },\n    position: 'header',\n  };\n};\n\nEditTheModelAction.type = 'edit-the-model';\nEditTheModelAction.position = 'header';\n\nconst DeleteAction: DocumentActionComponent = ({ documentId, model, collectionType, document }) => {\n  const navigate = useNavigate();\n  const { formatMessage } = useIntl();\n  const listViewPathMatch = useMatch(LIST_PATH);\n  const canDelete = useDocumentRBAC('DeleteAction', (state) => state.canDelete);\n  const { delete: deleteAction, isLoading } = useDocumentActions();\n  const { toggleNotification } = useNotification();\n  const setSubmitting = useForm('DeleteAction', (state) => state.setSubmitting);\n  const isLocalized = document?.locale != null;\n\n  return {\n    disabled: !canDelete || !document,\n    label: formatMessage(\n      {\n        id: 'content-manager.actions.delete.label',\n        defaultMessage: 'Delete entry{isLocalized, select, true { (all locales)} other {}}',\n      },\n      { isLocalized }\n    ),\n    icon: <Trash />,\n    dialog: {\n      type: 'dialog',\n      title: formatMessage({\n        id: 'app.components.ConfirmDialog.title',\n        defaultMessage: 'Confirmation',\n      }),\n      content: (\n        <Flex direction=\"column\" gap={2}>\n          <WarningCircle width=\"24px\" height=\"24px\" fill=\"danger600\" />\n          <Typography tag=\"p\" variant=\"omega\" textAlign=\"center\">\n            {formatMessage({\n              id: 'content-manager.actions.delete.dialog.body',\n              defaultMessage: 'Are you sure?',\n            })}\n          </Typography>\n        </Flex>\n      ),\n      loading: isLoading,\n      onConfirm: async () => {\n        /**\n         * If we have a match, we're in the list view\n         * and therefore not in a form and shouldn't be\n         * trying to set the submitting value.\n         */\n        if (!listViewPathMatch) {\n          setSubmitting(true);\n        }\n        try {\n          if (!documentId && collectionType !== SINGLE_TYPES) {\n            console.error(\n              \"You're trying to delete a document without an id, this is likely a bug with Strapi. Please open an issue.\"\n            );\n\n            toggleNotification({\n              message: formatMessage({\n                id: 'content-manager.actions.delete.error',\n                defaultMessage: 'An error occurred while trying to delete the document.',\n              }),\n              type: 'danger',\n            });\n\n            return;\n          }\n\n          const res = await deleteAction({\n            documentId,\n            model,\n            collectionType,\n            params: {\n              locale: '*',\n            },\n          });\n\n          if (!('error' in res)) {\n            navigate({ pathname: `../${collectionType}/${model}` }, { replace: true });\n          }\n        } finally {\n          if (!listViewPathMatch) {\n            setSubmitting(false);\n          }\n        }\n      },\n    },\n    variant: 'danger',\n    position: ['header', 'table-row'],\n  };\n};\n\nDeleteAction.type = 'delete';\nDeleteAction.position = ['header', 'table-row'];\n\nconst DEFAULT_HEADER_ACTIONS = [EditTheModelAction, ConfigureTheViewAction, DeleteAction];\n\nexport { Header, DEFAULT_HEADER_ACTIONS };\nexport type { HeaderProps, HeaderActionDescription };\n","import * as React from 'react';\n\nimport {\n  useQueryParams,\n  useStrapiApp,\n  DescriptionComponentRenderer,\n} from '@strapi/admin/strapi-admin';\nimport { Flex, Typography } from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\nimport { useMatch } from 'react-router-dom';\n\nimport { InjectionZone } from '../../../components/InjectionZone';\nimport { useDoc } from '../../../hooks/useDocument';\nimport { CLONE_PATH } from '../../../router';\n\nimport { DocumentActions } from './DocumentActions';\n\nimport type {\n  ContentManagerPlugin,\n  DocumentActionProps,\n  PanelComponent,\n  PanelComponentProps,\n} from '../../../content-manager';\n\ninterface PanelDescription {\n  title: string;\n  content: React.ReactNode;\n}\n\n/* -------------------------------------------------------------------------------------------------\n * Panels\n * -----------------------------------------------------------------------------------------------*/\n\nconst Panels = () => {\n  const isCloning = useMatch(CLONE_PATH) !== null;\n  const [\n    {\n      query: { status },\n    },\n  ] = useQueryParams<{ status: 'draft' | 'published' }>({\n    status: 'draft',\n  });\n  const { model, id, document, meta, collectionType } = useDoc();\n  const plugins = useStrapiApp('Panels', (state) => state.plugins);\n\n  const props = {\n    activeTab: status,\n    model,\n    documentId: id,\n    document: isCloning ? undefined : document,\n    meta: isCloning ? undefined : meta,\n    collectionType,\n  } satisfies PanelComponentProps;\n\n  return (\n    <Flex direction=\"column\" alignItems=\"stretch\" gap={2}>\n      <DescriptionComponentRenderer\n        props={props}\n        descriptions={(\n          plugins['content-manager'].apis as ContentManagerPlugin['config']['apis']\n        ).getEditViewSidePanels()}\n      >\n        {(panels) =>\n          panels.map(({ content, id, ...description }) => (\n            <Panel key={id} {...description}>\n              {content}\n            </Panel>\n          ))\n        }\n      </DescriptionComponentRenderer>\n    </Flex>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * Default Action Panels (CE)\n * -----------------------------------------------------------------------------------------------*/\n\nconst ActionsPanel: PanelComponent = () => {\n  const { formatMessage } = useIntl();\n\n  return {\n    title: formatMessage({\n      id: 'content-manager.containers.edit.panels.default.title',\n      defaultMessage: 'Entry',\n    }),\n    content: <ActionsPanelContent />,\n  };\n};\n\nActionsPanel.type = 'actions';\n\nconst ActionsPanelContent = () => {\n  const isCloning = useMatch(CLONE_PATH) !== null;\n  const [\n    {\n      query: { status = 'draft' },\n    },\n  ] = useQueryParams<{ status: 'draft' | 'published' }>();\n  const { model, id, document, meta, collectionType } = useDoc();\n  const plugins = useStrapiApp('ActionsPanel', (state) => state.plugins);\n\n  const props = {\n    activeTab: status,\n    model,\n    documentId: id,\n    document: isCloning ? undefined : document,\n    meta: isCloning ? undefined : meta,\n    collectionType,\n  } satisfies DocumentActionProps;\n\n  return (\n    <Flex direction=\"column\" gap={2} width=\"100%\">\n      <DescriptionComponentRenderer\n        props={props}\n        descriptions={(\n          plugins['content-manager'].apis as ContentManagerPlugin['config']['apis']\n        ).getDocumentActions('panel')}\n      >\n        {(actions) => <DocumentActions actions={actions} />}\n      </DescriptionComponentRenderer>\n      <InjectionZone area=\"editView.right-links\" slug={model} />\n    </Flex>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * Panel\n * -----------------------------------------------------------------------------------------------*/\n\ninterface PanelProps extends Pick<PanelDescription, 'title'> {\n  children: React.ReactNode;\n}\n\nconst Panel = React.forwardRef<any, PanelProps>(({ children, title }, ref) => {\n  return (\n    <Flex\n      ref={ref}\n      tag=\"aside\"\n      aria-labelledby=\"additional-information\"\n      background=\"neutral0\"\n      borderColor=\"neutral150\"\n      hasRadius\n      paddingBottom={4}\n      paddingLeft={4}\n      paddingRight={4}\n      paddingTop={4}\n      shadow=\"tableShadow\"\n      gap={3}\n      direction=\"column\"\n      justifyContent=\"stretch\"\n      alignItems=\"flex-start\"\n    >\n      <Typography tag=\"h2\" variant=\"sigma\" textTransform=\"uppercase\" textColor=\"neutral600\">\n        {title}\n      </Typography>\n      {children}\n    </Flex>\n  );\n});\n\nexport { Panels, ActionsPanel };\nexport type { PanelDescription };\n","import * as React from 'react';\n\nimport {\n  useTable,\n  useNotification,\n  useAPIErrorHandler,\n  useQueryParams,\n} from '@strapi/admin/strapi-admin';\nimport { Button, Flex, Dialog, Typography } from '@strapi/design-system';\nimport { Check, WarningCircle } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\n\nimport { useDoc } from '../../../../hooks/useDocument';\nimport { useGetManyDraftRelationCountQuery } from '../../../../services/documents';\nimport { getTranslation } from '../../../../utils/translations';\n\nimport { Emphasis } from './Actions';\n\ninterface ConfirmBulkActionDialogProps {\n  endAction: React.ReactNode;\n  onToggleDialog: () => void;\n  isOpen?: boolean;\n  dialogBody: React.ReactNode;\n}\n\nconst ConfirmBulkActionDialog = ({\n  onToggleDialog,\n  isOpen = false,\n  dialogBody,\n  endAction,\n}: ConfirmBulkActionDialogProps) => {\n  const { formatMessage } = useIntl();\n\n  return (\n    <Dialog.Root open={isOpen}>\n      <Dialog.Content>\n        <Dialog.Header>\n          {formatMessage({\n            id: 'app.components.ConfirmDialog.title',\n            defaultMessage: 'Confirmation',\n          })}\n        </Dialog.Header>\n        <Dialog.Body>\n          <Flex direction=\"column\" alignItems=\"stretch\" gap={2}>\n            <Flex justifyContent=\"center\">\n              <WarningCircle width=\"24px\" height=\"24px\" fill=\"danger600\" />\n            </Flex>\n            {dialogBody}\n          </Flex>\n        </Dialog.Body>\n        <Dialog.Footer>\n          <Dialog.Cancel>\n            <Button fullWidth onClick={onToggleDialog} variant=\"tertiary\">\n              {formatMessage({\n                id: 'app.components.Button.cancel',\n                defaultMessage: 'Cancel',\n              })}\n            </Button>\n          </Dialog.Cancel>\n          {endAction}\n        </Dialog.Footer>\n      </Dialog.Content>\n    </Dialog.Root>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * BoldChunk\n * -----------------------------------------------------------------------------------------------*/\n\nconst BoldChunk = (chunks: React.ReactNode) => <Typography fontWeight=\"bold\">{chunks}</Typography>;\n\n/* -------------------------------------------------------------------------------------------------\n * ConfirmDialogPublishAll\n * -----------------------------------------------------------------------------------------------*/\n\ninterface ConfirmDialogPublishAllProps\n  extends Pick<ConfirmBulkActionDialogProps, 'isOpen' | 'onToggleDialog'> {\n  isConfirmButtonLoading?: boolean;\n  onConfirm: () => void;\n}\n\nconst ConfirmDialogPublishAll = ({\n  isOpen,\n  onToggleDialog,\n  isConfirmButtonLoading = false,\n  onConfirm,\n}: ConfirmDialogPublishAllProps) => {\n  const { formatMessage } = useIntl();\n  const selectedEntries = useTable('ConfirmDialogPublishAll', (state) => state.selectedRows);\n  const { toggleNotification } = useNotification();\n  const { _unstableFormatAPIError: formatAPIError } = useAPIErrorHandler(getTranslation);\n  const { model, schema } = useDoc();\n  const [{ query }] = useQueryParams<{\n    plugins?: {\n      i18n?: {\n        locale?: string;\n      };\n    };\n  }>();\n\n  // TODO skipping this for now as there is a bug with the draft relation count that will be worked on separately\n  // see RFC \"Count draft relations\" in Notion\n  const enableDraftRelationsCount = false;\n\n  const {\n    data: countDraftRelations = 0,\n    isLoading,\n    error,\n  } = useGetManyDraftRelationCountQuery(\n    {\n      model,\n      documentIds: selectedEntries.map((entry) => entry.documentId),\n      locale: query?.plugins?.i18n?.locale,\n    },\n    {\n      skip: !enableDraftRelationsCount || selectedEntries.length === 0,\n    }\n  );\n\n  React.useEffect(() => {\n    if (error) {\n      toggleNotification({ type: 'danger', message: formatAPIError(error) });\n    }\n  }, [error, formatAPIError, toggleNotification]);\n\n  if (error) {\n    return null;\n  }\n\n  return (\n    <ConfirmBulkActionDialog\n      isOpen={isOpen && !isLoading}\n      onToggleDialog={onToggleDialog}\n      dialogBody={\n        <>\n          <Typography id=\"confirm-description\" textAlign=\"center\">\n            {countDraftRelations > 0 &&\n              formatMessage(\n                {\n                  id: getTranslation(`popUpwarning.warning.bulk-has-draft-relations.message`),\n                  defaultMessage:\n                    '<b>{count} {count, plural, one { relation } other { relations } } out of {entities} { entities, plural, one { entry } other { entries } } {count, plural, one { is } other { are } }</b> not published yet and might lead to unexpected behavior. ',\n                },\n                {\n                  b: BoldChunk,\n                  count: countDraftRelations,\n                  entities: selectedEntries.length,\n                }\n              )}\n            {formatMessage({\n              id: getTranslation('popUpWarning.bodyMessage.contentType.publish.all'),\n              defaultMessage: 'Are you sure you want to publish these entries?',\n            })}\n          </Typography>\n          {schema?.pluginOptions &&\n            'i18n' in schema.pluginOptions &&\n            schema?.pluginOptions.i18n && (\n              <Typography textColor=\"danger500\" textAlign=\"center\">\n                {formatMessage(\n                  {\n                    id: getTranslation('Settings.list.actions.publishAdditionalInfos'),\n                    defaultMessage:\n                      'This will publish the active locale versions <em>(from Internationalization)</em>',\n                  },\n                  {\n                    em: Emphasis,\n                  }\n                )}\n              </Typography>\n            )}\n        </>\n      }\n      endAction={\n        <Button\n          onClick={onConfirm}\n          variant=\"secondary\"\n          startIcon={<Check />}\n          loading={isConfirmButtonLoading}\n        >\n          {formatMessage({\n            id: 'app.utils.publish',\n            defaultMessage: 'Publish',\n          })}\n        </Button>\n      }\n    />\n  );\n};\n\nexport { ConfirmDialogPublishAll, ConfirmBulkActionDialog };\nexport type { ConfirmDialogPublishAllProps, ConfirmBulkActionDialogProps };\n","import * as React from 'react';\n\nimport {\n  FormErrors,\n  getYupValidationErrors,\n  Table,\n  useQueryParams,\n  useTable,\n} from '@strapi/admin/strapi-admin';\nimport {\n  Box,\n  Button,\n  Flex,\n  IconButton,\n  Loader,\n  Modal,\n  Tooltip,\n  Typography,\n  TypographyComponent,\n  RawTable,\n  Tr,\n  Td,\n  Tbody,\n} from '@strapi/design-system';\nimport { ArrowsCounterClockwise, CheckCircle, CrossCircle, Pencil } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\nimport { Link, useLocation } from 'react-router-dom';\nimport { styled } from 'styled-components';\nimport { ValidationError } from 'yup';\n\nimport { useDocumentRBAC } from '../../../../features/DocumentRBAC';\nimport { useContentTypeSchema } from '../../../../hooks/useContentTypeSchema';\nimport { useDocumentActions } from '../../../../hooks/useDocumentActions';\nimport { useDocLayout } from '../../../../hooks/useDocumentLayout';\nimport { contentManagerApi } from '../../../../services/api';\nimport {\n  useGetAllDocumentsQuery,\n  usePublishManyDocumentsMutation,\n} from '../../../../services/documents';\nimport { buildValidParams } from '../../../../utils/api';\nimport { getTranslation } from '../../../../utils/translations';\nimport { createYupSchema } from '../../../../utils/validation';\nimport { DocumentStatus } from '../../../EditView/components/DocumentStatus';\n\nimport { ConfirmDialogPublishAll, ConfirmDialogPublishAllProps } from './ConfirmBulkActionDialog';\n\nimport type { BulkActionComponent } from '../../../../content-manager';\nimport type { Document } from '../../../../hooks/useDocument';\n\nconst TypographyMaxWidth = styled<TypographyComponent>(Typography)`\n  max-width: 300px;\n`;\n\nconst TableComponent = styled(RawTable)`\n  width: 100%;\n  table-layout: fixed;\n  td:first-child {\n    border-right: 1px solid ${({ theme }) => theme.colors.neutral150};\n  }\n  td:first-of-type {\n    padding: ${({ theme }) => theme.spaces[4]};\n  }\n`;\n\n/* -------------------------------------------------------------------------------------------------\n * EntryValidationText\n * -----------------------------------------------------------------------------------------------*/\n\nconst formatErrorMessages = (errors: FormErrors, parentKey: string, formatMessage: any) => {\n  const messages: string[] = [];\n\n  Object.entries(errors).forEach(([key, value]) => {\n    const currentKey = parentKey ? `${parentKey}.${key}` : key;\n\n    if (typeof value === 'object' && value !== null && !Array.isArray(value)) {\n      if ('id' in value && 'defaultMessage' in value) {\n        messages.push(\n          formatMessage(\n            {\n              id: `${value.id}.withField`,\n              defaultMessage: value.defaultMessage,\n            },\n            { field: currentKey }\n          )\n        );\n      } else {\n        messages.push(\n          ...formatErrorMessages(\n            // @ts-expect-error TODO: check why value is not compatible with FormErrors\n            value,\n            currentKey,\n            formatMessage\n          )\n        );\n      }\n    } else {\n      messages.push(\n        formatMessage(\n          {\n            id: `${value}.withField`,\n            defaultMessage: value,\n          },\n          { field: currentKey }\n        )\n      );\n    }\n  });\n\n  return messages;\n};\n\ninterface EntryValidationTextProps {\n  validationErrors?: FormErrors;\n  status: string;\n}\n\nconst EntryValidationText = ({ validationErrors, status }: EntryValidationTextProps) => {\n  const { formatMessage } = useIntl();\n\n  if (validationErrors) {\n    const validationErrorsMessages = formatErrorMessages(validationErrors, '', formatMessage).join(\n      ' '\n    );\n\n    return (\n      <Flex gap={2}>\n        <CrossCircle fill=\"danger600\" />\n        <Tooltip description={validationErrorsMessages}>\n          <TypographyMaxWidth textColor=\"danger600\" variant=\"omega\" fontWeight=\"semiBold\" ellipsis>\n            {validationErrorsMessages}\n          </TypographyMaxWidth>\n        </Tooltip>\n      </Flex>\n    );\n  }\n\n  if (status === 'published') {\n    return (\n      <Flex gap={2}>\n        <CheckCircle fill=\"success600\" />\n        <Typography textColor=\"success600\" fontWeight=\"bold\">\n          {formatMessage({\n            id: 'content-manager.bulk-publish.already-published',\n            defaultMessage: 'Already Published',\n          })}\n        </Typography>\n      </Flex>\n    );\n  }\n\n  if (status === 'modified') {\n    return (\n      <Flex gap={2}>\n        <ArrowsCounterClockwise fill=\"alternative600\" />\n        <Typography>\n          {formatMessage({\n            id: 'content-manager.bulk-publish.modified',\n            defaultMessage: 'Ready to publish changes',\n          })}\n        </Typography>\n      </Flex>\n    );\n  }\n\n  return (\n    <Flex gap={2}>\n      <CheckCircle fill=\"success600\" />\n      <Typography>\n        {formatMessage({\n          id: 'app.utils.ready-to-publish',\n          defaultMessage: 'Ready to publish',\n        })}\n      </Typography>\n    </Flex>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * SelectedEntriesTableContent\n * -----------------------------------------------------------------------------------------------*/\n\ninterface SelectedEntriesTableContentProps {\n  isPublishing?: boolean;\n  rowsToDisplay?: TableRow[];\n  entriesToPublish?: TableRow['documentId'][];\n  validationErrors: Record<string, EntryValidationTextProps['validationErrors']>;\n}\n\nconst TABLE_HEADERS = [\n  { name: 'id', label: 'id' },\n  { name: 'name', label: 'name' },\n  { name: 'status', label: 'status' },\n  { name: 'publicationStatus', label: 'Publication status' },\n];\n\nconst SelectedEntriesTableContent = ({\n  isPublishing,\n  rowsToDisplay = [],\n  entriesToPublish = [],\n  validationErrors = {},\n}: SelectedEntriesTableContentProps) => {\n  const { pathname } = useLocation();\n  const { formatMessage } = useIntl();\n\n  const {\n    list: {\n      settings: { mainField },\n    },\n  } = useDocLayout();\n\n  const shouldDisplayMainField = mainField != null && mainField !== 'id';\n\n  return (\n    <Table.Content>\n      <Table.Head>\n        <Table.HeaderCheckboxCell />\n        {TABLE_HEADERS.filter((head) => head.name !== 'name' || shouldDisplayMainField).map(\n          (head) => (\n            <Table.HeaderCell key={head.name} {...head} />\n          )\n        )}\n      </Table.Head>\n      <Table.Loading />\n      <Table.Body>\n        {rowsToDisplay.map((row) => (\n          <Table.Row key={row.id}>\n            <Table.CheckboxCell id={row.id} />\n            <Table.Cell>\n              <Typography>{row.id}</Typography>\n            </Table.Cell>\n            {shouldDisplayMainField && (\n              <Table.Cell>\n                <Typography>{row[mainField as keyof TableRow]}</Typography>\n              </Table.Cell>\n            )}\n            <Table.Cell>\n              <DocumentStatus status={row.status} maxWidth={'min-content'} />\n            </Table.Cell>\n            <Table.Cell>\n              {isPublishing && entriesToPublish.includes(row.documentId) ? (\n                <Flex gap={2}>\n                  <Typography>\n                    {formatMessage({\n                      id: 'content-manager.success.record.publishing',\n                      defaultMessage: 'Publishing...',\n                    })}\n                  </Typography>\n                  <Loader small />\n                </Flex>\n              ) : (\n                <EntryValidationText\n                  validationErrors={validationErrors[row.documentId]}\n                  status={row.status}\n                />\n              )}\n            </Table.Cell>\n            <Table.Cell>\n              <Flex>\n                <IconButton\n                  tag={Link}\n                  to={{\n                    pathname: `${pathname}/${row.documentId}`,\n                    search: row.locale && `?plugins[i18n][locale]=${row.locale}`,\n                  }}\n                  state={{ from: pathname }}\n                  label={formatMessage({\n                    id: 'content-manager.bulk-publish.edit',\n                    defaultMessage: 'Edit',\n                  })}\n                  target=\"_blank\"\n                  marginLeft=\"auto\"\n                  variant=\"ghost\"\n                >\n                  <Pencil width={'1.6rem'} height={'1.6rem'} />\n                </IconButton>\n              </Flex>\n            </Table.Cell>\n          </Table.Row>\n        ))}\n      </Table.Body>\n    </Table.Content>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * PublicationStatusSummary\n * -----------------------------------------------------------------------------------------------*/\n\ninterface PublicationStatusSummaryProps {\n  count: number;\n  icon: React.ReactNode;\n  message: string;\n}\n\nconst PublicationStatusSummary = ({ count, icon, message }: PublicationStatusSummaryProps) => {\n  return (\n    <Flex justifyContent=\"space-between\" flex={1} gap={3}>\n      <Flex gap={2}>\n        {icon}\n        <Typography>{message}</Typography>\n      </Flex>\n      <Typography fontWeight=\"bold\">{count}</Typography>\n    </Flex>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * PublicationStatusGrid\n * -----------------------------------------------------------------------------------------------*/\n\ninterface PublicationStatusGridProps {\n  entriesReadyToPublishCount: number;\n  entriesModifiedCount: number;\n  entriesPublishedCount: number;\n  entriesWithErrorsCount: number;\n}\n\nconst PublicationStatusGrid = ({\n  entriesReadyToPublishCount,\n  entriesPublishedCount,\n  entriesModifiedCount,\n  entriesWithErrorsCount,\n}: PublicationStatusGridProps) => {\n  const { formatMessage } = useIntl();\n\n  return (\n    <Box hasRadius borderColor=\"neutral150\">\n      <TableComponent colCount={2} rowCount={2}>\n        <Tbody>\n          <Tr>\n            <Td>\n              <PublicationStatusSummary\n                count={entriesReadyToPublishCount}\n                icon={<CheckCircle fill=\"success600\" />}\n                message={formatMessage({\n                  id: 'app.utils.ready-to-publish',\n                  defaultMessage: 'Ready to publish',\n                })}\n              />\n            </Td>\n            <Td>\n              <PublicationStatusSummary\n                count={entriesPublishedCount}\n                icon={<CheckCircle fill=\"success600\" />}\n                message={formatMessage({\n                  id: 'app.utils.already-published',\n                  defaultMessage: 'Already published',\n                })}\n              />\n            </Td>\n          </Tr>\n          <Tr>\n            <Td>\n              <PublicationStatusSummary\n                count={entriesModifiedCount}\n                icon={<ArrowsCounterClockwise fill=\"alternative600\" />}\n                message={formatMessage({\n                  id: 'content-manager.bulk-publish.modified',\n                  defaultMessage: 'Ready to publish changes',\n                })}\n              />\n            </Td>\n            <Td>\n              <PublicationStatusSummary\n                count={entriesWithErrorsCount}\n                icon={<CrossCircle fill=\"danger600\" />}\n                message={formatMessage({\n                  id: 'content-manager.bulk-publish.waiting-for-action',\n                  defaultMessage: 'Waiting for action',\n                })}\n              />\n            </Td>\n          </Tr>\n        </Tbody>\n      </TableComponent>\n    </Box>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * SelectedEntriesModalContent\n * -----------------------------------------------------------------------------------------------*/\n\ninterface TableRow extends Document {}\n\ninterface SelectedEntriesModalContentProps {\n  listViewSelectedEntries: TableRow[];\n  toggleModal: ConfirmDialogPublishAllProps['onToggleDialog'];\n  setListViewSelectedDocuments: (documents: TableRow[]) => void;\n  model: string;\n}\n\nconst SelectedEntriesModalContent = ({\n  listViewSelectedEntries,\n  toggleModal,\n  setListViewSelectedDocuments,\n  model,\n}: SelectedEntriesModalContentProps) => {\n  const { formatMessage } = useIntl();\n  const { schema, components } = useContentTypeSchema(model);\n  const documentIds = listViewSelectedEntries.map(({ documentId }) => documentId);\n\n  // We want to keep the selected entries order same as the list view\n  const [{ query }] = useQueryParams<{ sort?: string; plugins?: Record<string, any> }>();\n  const params = React.useMemo(() => buildValidParams(query), [query]);\n\n  // Fetch the documents based on the selected entries and update the modal table\n  const { data, isLoading, isFetching, refetch } = useGetAllDocumentsQuery(\n    {\n      model,\n      params: {\n        page: '1',\n        pageSize: documentIds.length.toString(),\n        sort: query.sort,\n        filters: {\n          documentId: {\n            $in: documentIds,\n          },\n        },\n        locale: query.plugins?.i18n?.locale,\n      },\n    },\n    {\n      selectFromResult: ({ data, ...restRes }) => ({ data: data?.results ?? [], ...restRes }),\n    }\n  );\n\n  // Validate the entries based on the schema to show errors if any\n  const { rows, validationErrors } = React.useMemo(() => {\n    if (data.length > 0 && schema) {\n      const validate = createYupSchema(\n        schema.attributes,\n        components,\n        // Since this is the \"Publish\" action, the validation\n        // schema must enforce the rules for published entities\n        { status: 'published' }\n      );\n      const validationErrors: Record<TableRow['documentId'], FormErrors> = {};\n      const rows = data.map((entry: Document) => {\n        try {\n          validate.validateSync(entry, { abortEarly: false });\n\n          return entry;\n        } catch (e) {\n          if (e instanceof ValidationError) {\n            validationErrors[entry.documentId] = getYupValidationErrors(e);\n          }\n\n          return entry;\n        }\n      });\n\n      return { rows, validationErrors };\n    }\n\n    return {\n      rows: [],\n      validationErrors: {},\n    };\n  }, [components, data, schema]);\n\n  const [isDialogOpen, setIsDialogOpen] = React.useState(false);\n\n  const { publishMany: bulkPublishAction, isLoading: isPublishing } = useDocumentActions();\n  const [, { isLoading: isSubmittingForm }] = usePublishManyDocumentsMutation();\n\n  const selectedRows = useTable('publishAction', (state) => state.selectedRows);\n\n  // Filter selected entries from the updated modal table rows\n  const selectedEntries = rows.filter((entry) =>\n    selectedRows.some((selectedEntry) => selectedEntry.documentId === entry.documentId)\n  );\n\n  const entriesToPublish = selectedEntries\n    .filter((entry) => !validationErrors[entry.documentId])\n    .map((entry) => entry.documentId);\n\n  const selectedEntriesWithErrorsCount = selectedEntries.filter(\n    ({ documentId }) => validationErrors[documentId]\n  ).length;\n  const selectedEntriesPublishedCount = selectedEntries.filter(\n    ({ status }) => status === 'published'\n  ).length;\n  const selectedEntriesModifiedCount = selectedEntries.filter(\n    ({ status, documentId }) => status === 'modified' && !validationErrors[documentId]\n  ).length;\n  const selectedEntriesWithNoErrorsCount =\n    selectedEntries.length - selectedEntriesWithErrorsCount - selectedEntriesPublishedCount;\n\n  const toggleDialog = () => setIsDialogOpen((prev) => !prev);\n\n  const handleConfirmBulkPublish = async () => {\n    toggleDialog();\n\n    const res = await bulkPublishAction({ model: model, documentIds: entriesToPublish, params });\n    if (!('error' in res)) {\n      const unpublishedEntries = rows.filter((row) => {\n        return !entriesToPublish.includes(row.documentId);\n      });\n      // Keep selection of the entries in list view that were not published\n      setListViewSelectedDocuments(unpublishedEntries);\n    }\n  };\n\n  return (\n    <>\n      <Modal.Body>\n        <PublicationStatusGrid\n          entriesReadyToPublishCount={\n            selectedEntriesWithNoErrorsCount - selectedEntriesModifiedCount\n          }\n          entriesPublishedCount={selectedEntriesPublishedCount}\n          entriesModifiedCount={selectedEntriesModifiedCount}\n          entriesWithErrorsCount={selectedEntriesWithErrorsCount}\n        />\n        <Box marginTop={7}>\n          <SelectedEntriesTableContent\n            isPublishing={isSubmittingForm}\n            rowsToDisplay={rows}\n            entriesToPublish={entriesToPublish}\n            validationErrors={validationErrors}\n          />\n        </Box>\n      </Modal.Body>\n      <Modal.Footer>\n        <Button onClick={toggleModal} variant=\"tertiary\">\n          {formatMessage({\n            id: 'app.components.Button.cancel',\n            defaultMessage: 'Cancel',\n          })}\n        </Button>\n        <Flex gap={2}>\n          <Button onClick={refetch} variant=\"tertiary\" loading={isFetching}>\n            {formatMessage({ id: 'app.utils.refresh', defaultMessage: 'Refresh' })}\n          </Button>\n          <Button\n            onClick={toggleDialog}\n            disabled={\n              selectedEntries.length === 0 ||\n              selectedEntries.length === selectedEntriesWithErrorsCount ||\n              selectedEntriesPublishedCount === selectedEntries.length ||\n              isLoading\n            }\n            loading={isPublishing || isSubmittingForm}\n          >\n            {formatMessage({ id: 'app.utils.publish', defaultMessage: 'Publish' })}\n          </Button>\n        </Flex>\n      </Modal.Footer>\n      <ConfirmDialogPublishAll\n        isOpen={isDialogOpen}\n        onToggleDialog={toggleDialog}\n        isConfirmButtonLoading={isPublishing || isSubmittingForm}\n        onConfirm={handleConfirmBulkPublish}\n      />\n    </>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * PublishAction\n * -----------------------------------------------------------------------------------------------*/\n\nconst PublishAction: BulkActionComponent = ({ documents, model }) => {\n  const { formatMessage } = useIntl();\n  // Publish button visibility\n  const hasPublishPermission = useDocumentRBAC('unpublishAction', (state) => state.canPublish);\n  const showPublishButton =\n    hasPublishPermission && documents.some(({ status }) => status !== 'published');\n\n  const setListViewSelectedDocuments = useTable('publishAction', (state) => state.selectRow);\n\n  const refetchList = () => {\n    contentManagerApi.util.invalidateTags([{ type: 'Document', id: `${model}_LIST` }]);\n  };\n\n  if (!showPublishButton) return null;\n\n  return {\n    actionType: 'publish',\n    variant: 'tertiary',\n    label: formatMessage({ id: 'app.utils.publish', defaultMessage: 'Publish' }),\n    dialog: {\n      type: 'modal',\n      title: formatMessage({\n        id: getTranslation('containers.ListPage.selectedEntriesModal.title'),\n        defaultMessage: 'Publish entries',\n      }),\n      content: ({ onClose }) => {\n        return (\n          <Table.Root rows={documents} defaultSelectedRows={documents} headers={TABLE_HEADERS}>\n            <SelectedEntriesModalContent\n              listViewSelectedEntries={documents}\n              toggleModal={() => {\n                onClose();\n                refetchList();\n              }}\n              setListViewSelectedDocuments={setListViewSelectedDocuments}\n              model={model}\n            />\n          </Table.Root>\n        );\n      },\n      onClose: () => {\n        refetchList();\n      },\n    },\n  };\n};\n\nexport { PublishAction, SelectedEntriesModalContent };\n","import * as React from 'react';\n\nimport {\n  useStrapiApp,\n  DescriptionComponentRenderer,\n  useTable,\n  useQueryParams,\n} from '@strapi/admin/strapi-admin';\nimport { Box, ButtonProps, Flex, Typography } from '@strapi/design-system';\nimport { WarningCircle } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\n\nimport { useDocumentRBAC } from '../../../../features/DocumentRBAC';\nimport { useDoc } from '../../../../hooks/useDocument';\nimport { useDocumentActions } from '../../../../hooks/useDocumentActions';\nimport { buildValidParams } from '../../../../utils/api';\nimport { getTranslation } from '../../../../utils/translations';\nimport {\n  DialogOptions,\n  DocumentActionButton,\n  ModalOptions,\n  NotificationOptions,\n} from '../../../EditView/components/DocumentActions';\n\nimport { PublishAction } from './PublishAction';\n\nimport type { BulkActionComponent, ContentManagerPlugin } from '../../../../content-manager';\n\ninterface BulkActionDescription {\n  dialog?: DialogOptions | NotificationOptions | ModalOptions;\n  disabled?: boolean;\n  icon?: React.ReactNode;\n  label: string;\n  onClick?: (event: React.SyntheticEvent) => void;\n  /**\n   * @default 'default'\n   */\n  type?: 'icon' | 'default';\n  /**\n   * @default 'secondary'\n   */\n  variant?: ButtonProps['variant'];\n}\n\n/* -------------------------------------------------------------------------------------------------\n * BulkActionsRenderer\n * -----------------------------------------------------------------------------------------------*/\n\nconst BulkActionsRenderer = () => {\n  const plugins = useStrapiApp('BulkActionsRenderer', (state) => state.plugins);\n\n  const { model, collectionType } = useDoc();\n  const { selectedRows } = useTable('BulkActionsRenderer', (state) => state);\n\n  return (\n    <Flex gap={2}>\n      <DescriptionComponentRenderer\n        props={{\n          model,\n          collectionType,\n          documents: selectedRows,\n        }}\n        descriptions={(\n          plugins['content-manager'].apis as ContentManagerPlugin['config']['apis']\n        ).getBulkActions()}\n      >\n        {(actions) => actions.map((action) => <DocumentActionButton key={action.id} {...action} />)}\n      </DescriptionComponentRenderer>\n    </Flex>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * DefaultBulkActions\n * -----------------------------------------------------------------------------------------------*/\n\nconst DeleteAction: BulkActionComponent = ({ documents, model }) => {\n  const { formatMessage } = useIntl();\n  const { schema: contentType } = useDoc();\n  const selectRow = useTable('DeleteAction', (state) => state.selectRow);\n  const hasI18nEnabled = Boolean(contentType?.pluginOptions?.i18n);\n  const [{ query }] = useQueryParams<{ plugins?: { i18n?: { locale?: string } } }>();\n  const params = React.useMemo(() => buildValidParams(query), [query]);\n  const hasDeletePermission = useDocumentRBAC('deleteAction', (state) => state.canDelete);\n  const { deleteMany: bulkDeleteAction, isLoading } = useDocumentActions();\n  const documentIds = documents.map(({ documentId }) => documentId);\n\n  const handleConfirmBulkDelete = async () => {\n    const res = await bulkDeleteAction({\n      documentIds,\n      model,\n      params,\n    });\n    if (!('error' in res)) {\n      selectRow([]);\n    }\n  };\n\n  if (!hasDeletePermission) return null;\n\n  return {\n    variant: 'danger-light',\n    label: formatMessage({ id: 'global.delete', defaultMessage: 'Delete' }),\n    dialog: {\n      type: 'dialog',\n      title: formatMessage({\n        id: 'app.components.ConfirmDialog.title',\n        defaultMessage: 'Confirmation',\n      }),\n      loading: isLoading,\n      content: (\n        <Flex direction=\"column\" alignItems=\"stretch\" gap={2}>\n          <Flex justifyContent=\"center\">\n            <WarningCircle width=\"24px\" height=\"24px\" fill=\"danger600\" />\n          </Flex>\n          <Typography id=\"confirm-description\" textAlign=\"center\">\n            {formatMessage({\n              id: 'popUpWarning.bodyMessage.contentType.delete.all',\n              defaultMessage: 'Are you sure you want to delete these entries?',\n            })}\n          </Typography>\n          {hasI18nEnabled && (\n            <Box textAlign=\"center\" padding={3}>\n              <Typography textColor=\"danger500\">\n                {formatMessage(\n                  {\n                    id: getTranslation('Settings.list.actions.deleteAdditionalInfos'),\n                    defaultMessage:\n                      'This will delete the active locale versions <em>(from Internationalization)</em>',\n                  },\n                  {\n                    em: Emphasis,\n                  }\n                )}\n              </Typography>\n            </Box>\n          )}\n        </Flex>\n      ),\n      onConfirm: handleConfirmBulkDelete,\n    },\n  };\n};\n\nDeleteAction.type = 'delete';\n\nconst UnpublishAction: BulkActionComponent = ({ documents, model }) => {\n  const { formatMessage } = useIntl();\n  const { schema } = useDoc();\n  const selectRow = useTable('UnpublishAction', (state) => state.selectRow);\n  const hasPublishPermission = useDocumentRBAC('unpublishAction', (state) => state.canPublish);\n  const hasI18nEnabled = Boolean(schema?.pluginOptions?.i18n);\n  const hasDraftAndPublishEnabled = Boolean(schema?.options?.draftAndPublish);\n  const { unpublishMany: bulkUnpublishAction, isLoading } = useDocumentActions();\n  const documentIds = documents.map(({ documentId }) => documentId);\n  const [{ query }] = useQueryParams();\n  const params = React.useMemo(() => buildValidParams(query), [query]);\n\n  const handleConfirmBulkUnpublish = async () => {\n    const data = await bulkUnpublishAction({ documentIds, model, params });\n    if (!('error' in data)) {\n      selectRow([]);\n    }\n  };\n\n  const showUnpublishButton =\n    hasDraftAndPublishEnabled &&\n    hasPublishPermission &&\n    documents.some((entry) => entry.status === 'published' || entry.status === 'modified');\n\n  if (!showUnpublishButton) return null;\n\n  return {\n    variant: 'tertiary',\n    label: formatMessage({ id: 'app.utils.unpublish', defaultMessage: 'Unpublish' }),\n    dialog: {\n      type: 'dialog',\n      title: formatMessage({\n        id: 'app.components.ConfirmDialog.title',\n        defaultMessage: 'Confirmation',\n      }),\n      loading: isLoading,\n      content: (\n        <Flex direction=\"column\" alignItems=\"stretch\" gap={2}>\n          <Flex justifyContent=\"center\">\n            <WarningCircle width=\"24px\" height=\"24px\" fill=\"danger600\" />\n          </Flex>\n          <Typography id=\"confirm-description\" textAlign=\"center\">\n            {formatMessage({\n              id: 'popUpWarning.bodyMessage.contentType.unpublish.all',\n              defaultMessage: 'Are you sure you want to unpublish these entries?',\n            })}\n          </Typography>\n          {hasI18nEnabled && (\n            <Box textAlign=\"center\" padding={3}>\n              <Typography textColor=\"danger500\">\n                {formatMessage(\n                  {\n                    id: getTranslation('Settings.list.actions.unpublishAdditionalInfos'),\n                    defaultMessage:\n                      'This will unpublish the active locale versions <em>(from Internationalization)</em>',\n                  },\n                  {\n                    em: Emphasis,\n                  }\n                )}\n              </Typography>\n            </Box>\n          )}\n        </Flex>\n      ),\n      confirmButton: formatMessage({\n        id: 'app.utils.unpublish',\n        defaultMessage: 'Unpublish',\n      }),\n      onConfirm: handleConfirmBulkUnpublish,\n    },\n  };\n};\n\nUnpublishAction.type = 'unpublish';\n\nconst Emphasis = (chunks: React.ReactNode) => (\n  <Typography fontWeight=\"semiBold\" textColor=\"danger500\">\n    {chunks}\n  </Typography>\n);\n\nconst DEFAULT_BULK_ACTIONS: BulkActionComponent[] = [PublishAction, UnpublishAction, DeleteAction];\n\nexport { DEFAULT_BULK_ACTIONS, BulkActionsRenderer, Emphasis };\nexport type { BulkActionDescription };\n","import { Box, Flex, Typography } from '@strapi/design-system';\nimport { ChevronRight } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\n\nimport { getTranslation } from '../../../utils/translations';\n\nimport type { ProhibitedCloningField } from '../../../../../shared/contracts/collection-types';\n\ntype Reason = ProhibitedCloningField[1];\n\ninterface AutoCloneFailureModalBodyProps {\n  prohibitedFields: ProhibitedCloningField[];\n}\n\nconst AutoCloneFailureModalBody = ({ prohibitedFields }: AutoCloneFailureModalBodyProps) => {\n  const { formatMessage } = useIntl();\n\n  const getDefaultErrorMessage = (reason: Reason) => {\n    switch (reason) {\n      case 'relation':\n        return 'Duplicating the relation could remove it from the original entry.';\n      case 'unique':\n        return 'Identical values in a unique field are not allowed';\n      default:\n        return reason;\n    }\n  };\n\n  return (\n    <>\n      <Typography variant=\"beta\">\n        {formatMessage({\n          id: getTranslation('containers.list.autoCloneModal.title'),\n          defaultMessage: \"This entry can't be duplicated directly.\",\n        })}\n      </Typography>\n      <Box marginTop={2}>\n        <Typography textColor=\"neutral600\">\n          {formatMessage({\n            id: getTranslation('containers.list.autoCloneModal.description'),\n            defaultMessage:\n              \"A new entry will be created with the same content, but you'll have to change the following fields to save it.\",\n          })}\n        </Typography>\n      </Box>\n      <Flex marginTop={6} gap={2} direction=\"column\" alignItems=\"stretch\">\n        {prohibitedFields.map(([fieldPath, reason]) => (\n          <Flex\n            direction=\"column\"\n            gap={2}\n            alignItems=\"flex-start\"\n            borderColor=\"neutral200\"\n            hasRadius\n            padding={6}\n            key={fieldPath.join()}\n          >\n            <Flex direction=\"row\" tag=\"ol\">\n              {fieldPath.map((pathSegment, index) => (\n                <Typography fontWeight=\"semiBold\" tag=\"li\" key={index}>\n                  {pathSegment}\n                  {index !== fieldPath.length - 1 && (\n                    <ChevronRight\n                      fill=\"neutral500\"\n                      height=\"0.8rem\"\n                      width=\"0.8rem\"\n                      style={{ margin: '0 0.8rem' }}\n                    />\n                  )}\n                </Typography>\n              ))}\n            </Flex>\n            <Typography tag=\"p\" textColor=\"neutral600\">\n              {formatMessage({\n                id: getTranslation(`containers.list.autoCloneModal.error.${reason}`),\n                defaultMessage: getDefaultErrorMessage(reason),\n              })}\n            </Typography>\n          </Flex>\n        ))}\n      </Flex>\n    </>\n  );\n};\n\nexport { AutoCloneFailureModalBody };\nexport type { AutoCloneFailureModalBodyProps };\n","import * as React from 'react';\n\nimport {\n  DescriptionComponentRenderer,\n  useNotification,\n  useStrapiApp,\n  useQueryParams,\n} from '@strapi/admin/strapi-admin';\nimport { Button, LinkButton, Modal } from '@strapi/design-system';\nimport { Duplicate, Pencil } from '@strapi/icons';\nimport { stringify } from 'qs';\nimport { useIntl } from 'react-intl';\nimport { NavLink, useNavigate } from 'react-router-dom';\nimport { styled } from 'styled-components';\n\nimport { useDocumentRBAC } from '../../../features/DocumentRBAC';\nimport { Document, useDoc } from '../../../hooks/useDocument';\nimport { useDocumentActions } from '../../../hooks/useDocumentActions';\nimport { isBaseQueryError } from '../../../utils/api';\nimport { DocumentActionsMenu } from '../../EditView/components/DocumentActions';\n\nimport { AutoCloneFailureModalBody } from './AutoCloneFailureModal';\n\nimport type { ProhibitedCloningField } from '../../../../../shared/contracts/collection-types';\nimport type {\n  ContentManagerPlugin,\n  DocumentActionComponent,\n  DocumentActionProps,\n} from '../../../content-manager';\n\n/* -------------------------------------------------------------------------------------------------\n * TableActions\n * -----------------------------------------------------------------------------------------------*/\n\ninterface TableActionsProps {\n  document: Document;\n}\n\nconst TableActions = ({ document }: TableActionsProps) => {\n  const { formatMessage } = useIntl();\n  const { model, collectionType } = useDoc();\n  const plugins = useStrapiApp('TableActions', (state) => state.plugins);\n\n  const props: DocumentActionProps = {\n    activeTab: null,\n    model,\n    documentId: document.documentId,\n    collectionType,\n    document,\n  };\n\n  return (\n    <DescriptionComponentRenderer\n      props={props}\n      descriptions={(plugins['content-manager'].apis as ContentManagerPlugin['config']['apis'])\n        .getDocumentActions('table-row')\n        // We explicitly remove the PublishAction from description so we never render it and we don't make unnecessary requests.\n        .filter((action) => action.name !== 'PublishAction')}\n    >\n      {(actions) => {\n        const tableRowActions = actions.filter((action) => {\n          const positions = Array.isArray(action.position) ? action.position : [action.position];\n          return positions.includes('table-row');\n        });\n\n        return (\n          <DocumentActionsMenu\n            actions={tableRowActions}\n            label={formatMessage({\n              id: 'content-manager.containers.list.table.row-actions',\n              defaultMessage: 'Row actions',\n            })}\n            variant=\"ghost\"\n          />\n        );\n      }}\n    </DescriptionComponentRenderer>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * TableActionComponents\n * -----------------------------------------------------------------------------------------------*/\n\nconst EditAction: DocumentActionComponent = ({ documentId }) => {\n  const navigate = useNavigate();\n  const { formatMessage } = useIntl();\n  const { canRead } = useDocumentRBAC('EditAction', ({ canRead }) => ({ canRead }));\n  const { toggleNotification } = useNotification();\n  const [{ query }] = useQueryParams<{ plugins?: object }>();\n\n  return {\n    disabled: !canRead,\n    icon: <StyledPencil />,\n    label: formatMessage({\n      id: 'content-manager.actions.edit.label',\n      defaultMessage: 'Edit',\n    }),\n    position: 'table-row',\n    onClick: async () => {\n      if (!documentId) {\n        console.error(\n          \"You're trying to edit a document without an id, this is likely a bug with Strapi. Please open an issue.\"\n        );\n\n        toggleNotification({\n          message: formatMessage({\n            id: 'content-manager.actions.edit.error',\n            defaultMessage: 'An error occurred while trying to edit the document.',\n          }),\n          type: 'danger',\n        });\n\n        return;\n      }\n\n      navigate({\n        pathname: documentId,\n        search: stringify({\n          plugins: query.plugins,\n        }),\n      });\n    },\n  };\n};\n\nEditAction.type = 'edit';\nEditAction.position = 'table-row';\n\n/**\n * Because the icon system is completely broken, we have to do\n * this to remove the fill from the cog.\n */\nconst StyledPencil = styled(Pencil)`\n  path {\n    fill: currentColor;\n  }\n`;\n\nconst CloneAction: DocumentActionComponent = ({ model, documentId }) => {\n  const navigate = useNavigate();\n  const { formatMessage } = useIntl();\n  const { canCreate } = useDocumentRBAC('CloneAction', ({ canCreate }) => ({ canCreate }));\n  const { toggleNotification } = useNotification();\n  const { autoClone } = useDocumentActions();\n  const [prohibitedFields, setProhibitedFields] = React.useState<ProhibitedCloningField[]>([]);\n\n  return {\n    disabled: !canCreate,\n    icon: <StyledDuplicate />,\n    label: formatMessage({\n      id: 'content-manager.actions.clone.label',\n      defaultMessage: 'Duplicate',\n    }),\n    position: 'table-row',\n    onClick: async () => {\n      if (!documentId) {\n        console.error(\n          \"You're trying to clone a document in the table without an id, this is likely a bug with Strapi. Please open an issue.\"\n        );\n\n        toggleNotification({\n          message: formatMessage({\n            id: 'content-manager.actions.clone.error',\n            defaultMessage: 'An error occurred while trying to clone the document.',\n          }),\n          type: 'danger',\n        });\n\n        return;\n      }\n\n      const res = await autoClone({ model, sourceId: documentId });\n\n      if ('data' in res) {\n        navigate(res.data.documentId);\n\n        /**\n         * We return true because we don't need to show a modal anymore.\n         */\n        return true;\n      }\n\n      if (\n        isBaseQueryError(res.error) &&\n        res.error.details &&\n        typeof res.error.details === 'object' &&\n        'prohibitedFields' in res.error.details &&\n        Array.isArray(res.error.details.prohibitedFields)\n      ) {\n        const prohibitedFields = res.error.details.prohibitedFields as ProhibitedCloningField[];\n\n        setProhibitedFields(prohibitedFields);\n      }\n    },\n    dialog: {\n      type: 'modal',\n      title: formatMessage({\n        id: 'content-manager.containers.list.autoCloneModal.header',\n        defaultMessage: 'Duplicate',\n      }),\n      content: <AutoCloneFailureModalBody prohibitedFields={prohibitedFields} />,\n      footer: ({ onClose }) => {\n        return (\n          <Modal.Footer>\n            <Button onClick={onClose} variant=\"tertiary\">\n              {formatMessage({\n                id: 'cancel',\n                defaultMessage: 'Cancel',\n              })}\n            </Button>\n            <LinkButton\n              tag={NavLink}\n              to={{\n                pathname: `clone/${documentId}`,\n              }}\n            >\n              {formatMessage({\n                id: 'content-manager.containers.list.autoCloneModal.create',\n                defaultMessage: 'Create',\n              })}\n            </LinkButton>\n          </Modal.Footer>\n        );\n      },\n    },\n  };\n};\n\nCloneAction.type = 'clone';\nCloneAction.position = 'table-row';\n\n/**\n * Because the icon system is completely broken, we have to do\n * this to remove the fill from the cog.\n */\nconst StyledDuplicate = styled(Duplicate)`\n  path {\n    fill: currentColor;\n  }\n`;\n\nconst DEFAULT_TABLE_ROW_ACTIONS = [EditAction, CloneAction];\n\nexport { TableActions, DEFAULT_TABLE_ROW_ACTIONS };\n","/* eslint-disable check-file/filename-naming-convention */\nimport { INJECTION_ZONES } from './components/InjectionZone';\nimport { PLUGIN_ID } from './constants/plugin';\nimport {\n  DEFAULT_ACTIONS,\n  type DocumentActionPosition,\n  type DocumentActionDescription,\n} from './pages/EditView/components/DocumentActions';\nimport {\n  DEFAULT_HEADER_ACTIONS,\n  type HeaderActionDescription,\n} from './pages/EditView/components/Header';\nimport { ActionsPanel, type PanelDescription } from './pages/EditView/components/Panels';\nimport {\n  DEFAULT_BULK_ACTIONS,\n  type BulkActionDescription,\n} from './pages/ListView/components/BulkActions/Actions';\nimport { DEFAULT_TABLE_ROW_ACTIONS } from './pages/ListView/components/TableActions';\n\nimport type { Document } from './hooks/useDocument';\nimport type { DocumentMetadata } from '../../shared/contracts/collection-types';\nimport type { DescriptionComponent, PluginConfig } from '@strapi/admin/strapi-admin';\n\n/* -------------------------------------------------------------------------------------------------\n * Configuration Types\n * -----------------------------------------------------------------------------------------------*/\n\ntype DescriptionReducer<Config extends object> = (prev: Config[]) => Config[];\n\ninterface EditViewContext {\n  /**\n   * This will ONLY be null, if the content-type\n   * does not have draft & published enabled.\n   */\n  activeTab: 'draft' | 'published' | null;\n  /**\n   * Will be either 'single-types' | 'collection-types'\n   */\n  collectionType: string;\n  /**\n   * this will be undefined if someone is creating an entry.\n   */\n  document?: Document;\n  /**\n   * this will be undefined if someone is creating an entry.\n   */\n  documentId?: string;\n  /**\n   * this will be undefined if someone is creating an entry.\n   */\n  meta?: DocumentMetadata;\n  /**\n   * The current content-type's model.\n   */\n  model: string;\n}\n\ninterface ListViewContext {\n  /**\n   * Will be either 'single-types' | 'collection-types'\n   */\n  collectionType: string;\n  /**\n   * The current selected documents in the table\n   */\n  documents: Document[];\n  /**\n   * The current content-type's model.\n   */\n  model: string;\n}\n\ninterface PanelComponentProps extends EditViewContext {}\n\ninterface PanelComponent extends DescriptionComponent<PanelComponentProps, PanelDescription> {\n  /**\n   * The defaults are added by Strapi only, if you're providing your own component,\n   * you do not need to provide this.\n   */\n  type?: 'actions' | 'releases';\n}\n\ninterface DocumentActionProps extends EditViewContext {\n  onPreview?: () => void;\n  fromPreview?: boolean;\n  fromRelationModal?: boolean;\n}\n\ninterface DocumentActionComponent\n  extends DescriptionComponent<DocumentActionProps, DocumentActionDescription> {\n  type?:\n    | 'clone'\n    | 'configure-the-view'\n    | 'delete'\n    | 'discard'\n    | 'edit'\n    | 'edit-the-model'\n    | 'history'\n    | 'publish'\n    | 'unpublish'\n    | 'update';\n  position?: DocumentActionDescription['position'];\n}\n\ninterface HeaderActionProps extends EditViewContext {}\n\ninterface HeaderActionComponent\n  extends DescriptionComponent<HeaderActionProps, HeaderActionDescription> {}\n\ninterface BulkActionComponentProps extends ListViewContext {}\n\ninterface BulkActionComponent\n  extends DescriptionComponent<BulkActionComponentProps, BulkActionDescription> {\n  type?: 'delete' | 'publish' | 'unpublish';\n}\n\n/* -------------------------------------------------------------------------------------------------\n * ContentManager plugin\n * -----------------------------------------------------------------------------------------------*/\n\nclass ContentManagerPlugin {\n  /**\n   * The following properties are the stored ones provided by any plugins registering with\n   * the content-manager. The function calls however, need to be called at runtime in the\n   * application, so instead we collate them and run them later with the complete list incl.\n   * ones already registered & the context of the view.\n   */\n  bulkActions: BulkActionComponent[] = [...DEFAULT_BULK_ACTIONS];\n  documentActions: DocumentActionComponent[] = [\n    ...DEFAULT_ACTIONS,\n    ...DEFAULT_TABLE_ROW_ACTIONS,\n    ...DEFAULT_HEADER_ACTIONS,\n  ];\n  editViewSidePanels: PanelComponent[] = [ActionsPanel];\n  headerActions: HeaderActionComponent[] = [];\n\n  constructor() {}\n\n  addEditViewSidePanel(panels: DescriptionReducer<PanelComponent>): void;\n  addEditViewSidePanel(panels: PanelComponent[]): void;\n  addEditViewSidePanel(panels: DescriptionReducer<PanelComponent> | PanelComponent[]) {\n    if (Array.isArray(panels)) {\n      this.editViewSidePanels = [...this.editViewSidePanels, ...panels];\n    } else if (typeof panels === 'function') {\n      this.editViewSidePanels = panels(this.editViewSidePanels);\n    } else {\n      throw new Error(\n        `Expected the \\`panels\\` passed to \\`addEditViewSidePanel\\` to be an array or a function, but received ${getPrintableType(\n          panels\n        )}`\n      );\n    }\n  }\n\n  addDocumentAction(actions: DescriptionReducer<DocumentActionComponent>): void;\n  addDocumentAction(actions: DocumentActionComponent[]): void;\n  addDocumentAction(\n    actions: DescriptionReducer<DocumentActionComponent> | DocumentActionComponent[]\n  ) {\n    if (Array.isArray(actions)) {\n      this.documentActions = [...this.documentActions, ...actions];\n    } else if (typeof actions === 'function') {\n      this.documentActions = actions(this.documentActions);\n    } else {\n      throw new Error(\n        `Expected the \\`actions\\` passed to \\`addDocumentAction\\` to be an array or a function, but received ${getPrintableType(\n          actions\n        )}`\n      );\n    }\n  }\n\n  addDocumentHeaderAction(actions: DescriptionReducer<HeaderActionComponent>): void;\n  addDocumentHeaderAction(actions: HeaderActionComponent[]): void;\n  addDocumentHeaderAction(\n    actions: DescriptionReducer<HeaderActionComponent> | HeaderActionComponent[]\n  ) {\n    if (Array.isArray(actions)) {\n      this.headerActions = [...this.headerActions, ...actions];\n    } else if (typeof actions === 'function') {\n      this.headerActions = actions(this.headerActions);\n    } else {\n      throw new Error(\n        `Expected the \\`actions\\` passed to \\`addDocumentHeaderAction\\` to be an array or a function, but received ${getPrintableType(\n          actions\n        )}`\n      );\n    }\n  }\n\n  addBulkAction(actions: DescriptionReducer<BulkActionComponent>): void;\n  addBulkAction(actions: BulkActionComponent[]): void;\n  addBulkAction(actions: DescriptionReducer<BulkActionComponent> | BulkActionComponent[]) {\n    if (Array.isArray(actions)) {\n      this.bulkActions = [...this.bulkActions, ...actions];\n    } else if (typeof actions === 'function') {\n      this.bulkActions = actions(this.bulkActions);\n    } else {\n      throw new Error(\n        `Expected the \\`actions\\` passed to \\`addBulkAction\\` to be an array or a function, but received ${getPrintableType(\n          actions\n        )}`\n      );\n    }\n  }\n\n  get config() {\n    return {\n      id: PLUGIN_ID,\n      name: 'Content Manager',\n      injectionZones: INJECTION_ZONES,\n      apis: {\n        addBulkAction: this.addBulkAction.bind(this),\n        addDocumentAction: this.addDocumentAction.bind(this),\n        addDocumentHeaderAction: this.addDocumentHeaderAction.bind(this),\n        addEditViewSidePanel: this.addEditViewSidePanel.bind(this),\n        getBulkActions: () => this.bulkActions,\n        getDocumentActions: (position?: DocumentActionPosition) => {\n          /**\n           * When possible, pre-filter the actions by the components static position property.\n           * This avoids rendering the actions in multiple places where they weren't displayed,\n           * which wasn't visible but created issues with useEffect for instance.\n           * The response should still be filtered by the position, as the static property is new\n           * and not mandatory to avoid a breaking change.\n           */\n          if (position) {\n            return this.documentActions.filter((action) => {\n              return action.position == undefined || [action.position].flat().includes(position);\n            });\n          }\n\n          return this.documentActions;\n        },\n        getEditViewSidePanels: () => this.editViewSidePanels,\n        getHeaderActions: () => this.headerActions,\n      },\n    } satisfies PluginConfig;\n  }\n}\n\n/* -------------------------------------------------------------------------------------------------\n * getPrintableType\n * -----------------------------------------------------------------------------------------------*/\n\n/**\n * @internal\n * @description Gets the human-friendly printable type name for the given value, for instance it will yield\n * `array` instead of `object`, as the native `typeof` operator would do.\n */\nconst getPrintableType = (value: unknown): string => {\n  const nativeType = typeof value;\n\n  if (nativeType === 'object') {\n    if (value === null) return 'null';\n    if (Array.isArray(value)) return 'array';\n    if (value instanceof Object && value.constructor.name !== 'Object') {\n      return value.constructor.name;\n    }\n  }\n\n  return nativeType;\n};\n\nexport { ContentManagerPlugin };\nexport type {\n  EditViewContext,\n  ListViewContext,\n  BulkActionComponent,\n  BulkActionComponentProps,\n  BulkActionDescription,\n  DescriptionComponent,\n  DescriptionReducer,\n  PanelComponentProps,\n  PanelComponent,\n  PanelDescription,\n  DocumentActionComponent,\n  DocumentActionDescription,\n  DocumentActionProps,\n  HeaderActionComponent,\n  HeaderActionDescription,\n  HeaderActionProps,\n};\n","import { useQueryParams, useTracking } from '@strapi/admin/strapi-admin';\nimport { ClockCounterClockwise } from '@strapi/icons';\nimport { stringify } from 'qs';\nimport { useIntl } from 'react-intl';\nimport { useNavigate, useLocation } from 'react-router-dom';\n\nimport type { DocumentActionComponent } from '../../content-manager';\n\nconst HistoryAction: DocumentActionComponent = ({ model, document }) => {\n  const { formatMessage } = useIntl();\n  const [{ query }] = useQueryParams<{ plugins?: Record<string, unknown> }>();\n  const navigate = useNavigate();\n  const { trackUsage } = useTracking();\n  const { pathname } = useLocation();\n  const pluginsQueryParams = stringify({ plugins: query.plugins }, { encode: false });\n\n  if (!window.strapi.features.isEnabled('cms-content-history')) {\n    return null;\n  }\n\n  const handleOnClick = () => {\n    const destination = { pathname: 'history', search: pluginsQueryParams };\n    trackUsage('willNavigate', {\n      from: pathname,\n      to: `${pathname}/${destination.pathname}`,\n    });\n    navigate(destination);\n  };\n\n  return {\n    icon: <ClockCounterClockwise />,\n    label: formatMessage({\n      id: 'content-manager.history.document-action',\n      defaultMessage: 'Content History',\n    }),\n    onClick: handleOnClick,\n    disabled:\n      /**\n       * The user is creating a new document.\n       * It hasn't been saved yet, so there's no history to go to\n       */\n      !document ||\n      /**\n       * The document has been created but the current dimension has never been saved.\n       * For example, the user is creating a new locale in an existing document,\n       * so there's no history for the document in that locale\n       */\n      !document.id ||\n      /**\n       * History is only available for content types created by the user.\n       * These have the `api::` prefix, as opposed to the ones created by Strapi or plugins,\n       * which start with `admin::` or `plugin::`\n       */\n      !model.startsWith('api::'),\n    position: 'header',\n  };\n};\n\nHistoryAction.type = 'history';\nHistoryAction.position = 'header';\n\nexport { HistoryAction };\n","/* eslint-disable check-file/no-index */\n\nimport { type ContentManagerPlugin } from '../content-manager';\n\nimport { HistoryAction } from './components/HistoryAction';\n\nimport type { StrapiApp } from '@strapi/admin/strapi-admin';\nimport type { Plugin } from '@strapi/types';\n\nconst historyAdmin: Partial<Plugin.Config.AdminInput> = {\n  bootstrap(app: StrapiApp) {\n    const { addDocumentAction } = app.getPlugin('content-manager').apis as {\n      addDocumentAction: ContentManagerPlugin['addDocumentAction'];\n    };\n\n    /**\n     * Register the document action here using the public API, and not by setting the action in the\n     * Content Manager directly, because this API lets us control the order of the actions array.\n     * We want history to be the last non-delete action in the array.\n     */\n    addDocumentAction((actions) => {\n      const indexOfDeleteAction = actions.findIndex((action) => action.type === 'delete');\n      actions.splice(indexOfDeleteAction, 0, HistoryAction);\n      return actions;\n    });\n  },\n};\n\nexport { historyAdmin };\n","import { createSlice, type PayloadAction } from '@reduxjs/toolkit';\n\nimport { GetInitData } from '../../../shared/contracts/init';\n\nimport type { ContentManagerLink } from '../hooks/useContentManagerInitData';\n\ninterface AppState {\n  collectionTypeLinks: ContentManagerLink[];\n  components: GetInitData.Response['data']['components'];\n  fieldSizes: GetInitData.Response['data']['fieldSizes'];\n  models: GetInitData.Response['data']['contentTypes'];\n  singleTypeLinks: ContentManagerLink[];\n  isLoading: boolean;\n}\n\nconst initialState: AppState = {\n  collectionTypeLinks: [],\n  components: [],\n  fieldSizes: {},\n  models: [],\n  singleTypeLinks: [],\n  isLoading: true,\n};\n\nconst appSlice = createSlice({\n  name: 'app',\n  initialState,\n  reducers: {\n    setInitialData(\n      state,\n      action: PayloadAction<{\n        authorizedCollectionTypeLinks: AppState['collectionTypeLinks'];\n        authorizedSingleTypeLinks: AppState['singleTypeLinks'];\n        components: AppState['components'];\n        contentTypeSchemas: AppState['models'];\n        fieldSizes: AppState['fieldSizes'];\n      }>\n    ) {\n      const {\n        authorizedCollectionTypeLinks,\n        authorizedSingleTypeLinks,\n        components,\n        contentTypeSchemas,\n        fieldSizes,\n      } = action.payload;\n      state.collectionTypeLinks = authorizedCollectionTypeLinks.filter(\n        ({ isDisplayed }) => isDisplayed\n      );\n      state.singleTypeLinks = authorizedSingleTypeLinks.filter(({ isDisplayed }) => isDisplayed);\n      state.components = components;\n      state.models = contentTypeSchemas;\n      state.fieldSizes = fieldSizes;\n      state.isLoading = false;\n    },\n  },\n});\n\nconst { actions, reducer } = appSlice;\nconst { setInitialData } = actions;\n\nexport { reducer, setInitialData };\nexport type { AppState };\n","import { combineReducers } from '@reduxjs/toolkit';\n\nimport { reducer as appReducer } from './app';\n\nconst reducer = combineReducers({\n  app: appReducer,\n});\n\ntype State = ReturnType<typeof reducer>;\n\nexport { reducer };\nexport type { State };\n","import { GetPreviewUrl } from '../../../../shared/contracts/preview';\nimport { contentManagerApi } from '../../services/api';\n\nconst previewApi = contentManagerApi.injectEndpoints({\n  endpoints: (builder) => ({\n    getPreviewUrl: builder.query<GetPreviewUrl.Response, GetPreviewUrl.Request>({\n      query({ query, params }) {\n        return {\n          url: `/content-manager/preview/url/${params.contentType}`,\n          method: 'GET',\n          config: {\n            params: query,\n          },\n        };\n      },\n    }),\n  }),\n});\n\nconst { useGetPreviewUrlQuery } = previewApi;\n\nexport { useGetPreviewUrlQuery };\n","import * as React from 'react';\n\nimport { useQueryParams, useTracking, useForm } from '@strapi/admin/strapi-admin';\nimport { Box, Button, Tooltip, type TooltipProps } from '@strapi/design-system';\nimport { stringify } from 'qs';\nimport { useIntl } from 'react-intl';\nimport { Link, useLocation } from 'react-router-dom';\n\nimport { useGetPreviewUrlQuery } from '../services/preview';\n\nimport type { PanelComponent } from '@strapi/content-manager/strapi-admin';\nimport type { UID } from '@strapi/types';\n\ninterface ConditionalTooltipProps {\n  isShown: boolean;\n  label: TooltipProps['label'];\n  children: React.ReactNode;\n}\n\nconst ConditionalTooltip = ({ isShown, label, children }: ConditionalTooltipProps) => {\n  if (isShown) {\n    return <Tooltip label={label}>{children}</Tooltip>;\n  }\n\n  return children;\n};\n\nconst PreviewSidePanel: PanelComponent = ({ model, documentId, document }) => {\n  const { formatMessage } = useIntl();\n  const { trackUsage } = useTracking();\n  const { pathname } = useLocation();\n  const [{ query }] = useQueryParams();\n  const isModified = useForm('PreviewSidePanel', (state) => state.modified);\n\n  /**\n   * The preview URL isn't used in this component, we just fetch it to know if preview is enabled\n   * for the content type. If it's not, the panel is not displayed. If it is, we display a link to\n   * /preview, and the URL will already be loaded in the RTK query cache.\n   */\n  const { data, error } = useGetPreviewUrlQuery({\n    params: {\n      contentType: model as UID.ContentType,\n    },\n    query: {\n      documentId,\n      locale: document?.locale,\n      status: document?.status,\n    },\n  });\n\n  if (!data?.data?.url || error) {\n    return null;\n  }\n\n  const trackNavigation = () => {\n    // Append /preview to the current URL\n    const destinationPathname = pathname.replace(/\\/$/, '') + '/preview';\n    trackUsage('willNavigate', { from: pathname, to: destinationPathname });\n  };\n\n  return {\n    title: formatMessage({ id: 'content-manager.preview.panel.title', defaultMessage: 'Preview' }),\n    content: (\n      <ConditionalTooltip\n        label={formatMessage({\n          id: 'content-manager.preview.panel.button-disabled-tooltip',\n          defaultMessage: 'Please save to open the preview',\n        })}\n        isShown={isModified}\n      >\n        <Box cursor=\"not-allowed\" width=\"100%\">\n          <Button\n            variant=\"tertiary\"\n            tag={Link}\n            to={{ pathname: 'preview', search: stringify(query, { encode: false }) }}\n            onClick={trackNavigation}\n            width=\"100%\"\n            disabled={isModified}\n            pointerEvents={isModified ? 'none' : undefined}\n            tabIndex={isModified ? -1 : undefined}\n          >\n            {formatMessage({\n              id: 'content-manager.preview.panel.button',\n              defaultMessage: 'Open preview',\n            })}\n          </Button>\n        </Box>\n      </ConditionalTooltip>\n    ),\n  };\n};\n\nexport { PreviewSidePanel };\n","/* eslint-disable check-file/no-index */\n\nimport { PreviewSidePanel } from './components/PreviewSidePanel';\n\nimport type { ContentManagerPlugin } from '../content-manager';\nimport type { PluginDefinition } from '@strapi/admin/strapi-admin';\n\nconst previewAdmin: Partial<PluginDefinition> = {\n  bootstrap(app) {\n    const contentManagerPluginApis = app.getPlugin('content-manager')\n      .apis as ContentManagerPlugin['config']['apis'];\n\n    contentManagerPluginApis.addEditViewSidePanel([PreviewSidePanel]);\n  },\n};\n\nexport { previewAdmin };\n","import { Feather } from '@strapi/icons';\n\nimport { PLUGIN_ID } from './constants/plugin';\nimport { ContentManagerPlugin } from './content-manager';\nimport { historyAdmin } from './history';\nimport { reducer } from './modules/reducers';\nimport { previewAdmin } from './preview';\nimport { routes } from './router';\nimport { prefixPluginTranslations } from './utils/translations';\n\n// NOTE: we have to preload it to ensure chunks will have it available as global\nimport 'prismjs';\n\n// eslint-disable-next-line import/no-default-export\nexport default {\n  register(app: any) {\n    const cm = new ContentManagerPlugin();\n\n    app.addReducers({\n      [PLUGIN_ID]: reducer,\n    });\n\n    app.addMenuLink({\n      to: PLUGIN_ID,\n      icon: Feather,\n      intlLabel: {\n        id: `content-manager.plugin.name`,\n        defaultMessage: 'Content Manager',\n      },\n      permissions: [],\n      position: 1,\n    });\n\n    app.router.addRoute({\n      path: 'content-manager/*',\n      lazy: async () => {\n        const { Layout } = await import('./layout');\n\n        return {\n          Component: Layout,\n        };\n      },\n      children: routes,\n    });\n\n    app.registerPlugin(cm.config);\n  },\n  bootstrap(app: any) {\n    if (typeof historyAdmin.bootstrap === 'function') {\n      historyAdmin.bootstrap(app);\n    }\n    if (typeof previewAdmin.bootstrap === 'function') {\n      previewAdmin.bootstrap(app);\n    }\n  },\n  async registerTrads({ locales }: { locales: string[] }) {\n    const importedTrads = await Promise.all(\n      locales.map((locale) => {\n        return import(`./translations/${locale}.json`)\n          .then(({ default: data }) => {\n            return {\n              data: prefixPluginTranslations(data, PLUGIN_ID),\n              locale,\n            };\n          })\n          .catch(() => {\n            return {\n              data: {},\n              locale,\n            };\n          });\n      })\n    );\n\n    return Promise.resolve(importedTrads);\n  },\n};\n\nexport * from './exports';\n"],"names":["PLUGIN_ID","PERMISSIONS","INJECTION_ZONES","editView","informations","listView","actions","deleteModalAdditionalInfos","publishModalAdditionalInfos","unpublishModalAdditionalInfos","preview","InjectionZone","area","props","components","useInjectionZone","_jsx","_Fragment","map","component","Component","name","getPlugin","useStrapiApp","state","contentManagerPlugin","page","position","split","getInjectedComponents","ID","CREATED_BY_ATTRIBUTE_NAME","UPDATED_BY_ATTRIBUTE_NAME","CREATOR_FIELDS","PUBLISHED_BY_ATTRIBUTE_NAME","CREATED_AT_ATTRIBUTE_NAME","UPDATED_AT_ATTRIBUTE_NAME","PUBLISHED_AT_ATTRIBUTE_NAME","DOCUMENT_META_FIELDS","ATTRIBUTE_TYPES_THAT_CANNOT_BE_MAIN_FIELD","SINGLE_TYPES","COLLECTION_TYPES","BLOCK_LIST_ATTRIBUTE_KEYS","traverseData","predicate","transform","schema","data","traverse","datum","attributes","Object","entries","reduce","acc","key","value","attribute","includes","undefined","type","repeatable","componentValue","componentData","dynamicZoneValue","__component","removeProhibitedFields","prohibitedFields","prepareRelations","connect","disconnect","prepareTempKeys","Array","isArray","length","keys","generateNKeysBetween","index","__temp_key__","removeFieldsThatDontExistOnSchema","schemaKeys","dataKeys","keysToRemove","filter","revisedData","structuredClone","removeNullValues","transformDocument","document","transformations","pipe","createDefaultForm","contentType","traverseSchema","default","required","defaultComponentForm","min","fill","contentManagerApi","adminApi","enhanceEndpoints","addTagTypes","documentApi","injectEndpoints","overrideExisting","endpoints","builder","autoCloneDocument","mutation","query","model","sourceId","url","method","config","params","invalidatesTags","_result","error","id","cloneDocument","_error","createDocument","result","transformResponse","response","meta","arg","availableStatus","availableLocales","deleteDocument","collectionType","documentId","deleteManyDocuments","body","_res","discardDocument","getAllDocuments","stringify","encode","providesTags","results","getDraftRelationCount","getDocument","queryFn","_api","_extraOpts","baseQuery","res","getManyDraftRelationCount","publishDocument","publishManyDocuments","documentIds","updateDocument","onQueryStarted","patch","dispatch","queryFulfilled","patchResult","util","updateQueryData","draft","assign","undo","unpublishDocument","unpublishManyDocuments","useAutoCloneDocumentMutation","useCloneDocumentMutation","useCreateDocumentMutation","useDeleteDocumentMutation","useDeleteManyDocumentsMutation","useDiscardDocumentMutation","useGetAllDocumentsQuery","useLazyGetDocumentQuery","useGetDocumentQuery","useLazyGetDraftRelationCountQuery","useGetManyDraftRelationCountQuery","usePublishDocumentMutation","usePublishManyDocumentsMutation","useUpdateDocumentMutation","useUnpublishDocumentMutation","useUnpublishManyDocumentsMutation","buildValidParams","plugins","_","validQueryParams","values","current","isBaseQueryError","arrayValidator","options","message","translatedErrors","test","status","createYupSchema","createModelSchema","yup","object","shape","validations","addNullableValidation","addRequiredValidation","addMinLengthValidation","addMaxLengthValidation","addMinValidation","addMaxValidation","addRegexValidation","fn","transformSchema","array","of","nullable","lazy","validation","string","oneOf","concat","mixed","number","createAttributeSchema","matches","boolean","json","email","enum","JSON","err","parse","nullableSchema","minLength","Number","isInteger","maxLength","max","toInteger","val","num","isNaN","regex","RegExp","defaultMessage","excludeEmptyString","initApi","getInitialData","useGetInitialDataQuery","useContentTypeSchema","toggleNotification","useNotification","_unstableFormatAPIError","formatAPIError","useAPIErrorHandler","isLoading","isFetching","contentTypes","React","useMemo","find","ct","uid","componentsByKey","extractContentTypeComponents","useEffect","schemas","allComponents","getComponents","componentAttributes","push","flatMap","componentUid","componentUids","uniqueComponentUids","Set","HOOKS","INJECT_COLUMN_IN_TABLE","MUTATE_COLLECTION_TYPES_LINKS","MUTATE_EDIT_VIEW_LAYOUT","MUTATE_SINGLE_TYPES_LINKS","contentTypesApi","getContentTypeConfiguration","getAllContentTypeSettings","updateContentTypeConfiguration","useGetContentTypeConfigurationQuery","useGetAllContentTypeSettingsQuery","useUpdateContentTypeConfigurationMutation","checkIfAttributeIsDisplayable","relation","toLowerCase","getMainField","mainFieldName","mainFieldType","targetModel","DEFAULT_SETTINGS","bulkable","filterable","searchable","pagination","defaultSortBy","defaultSortOrder","mainField","pageSize","useDocumentLayout","useDocument","skip","useQueryParams","runHookWaterfall","isLoadingSchemas","isLoadingConfigs","isFetchingConfigs","editLayout","formatEditLayout","layout","metadatas","settings","listLayout","formatListLayout","edit","list","useDocLayout","useDoc","currentPanelIndex","panelledEditAttributes","convertEditLayoutToFieldLayouts","layouts","configurations","panels","row","some","field","componentEditAttributes","configuration","icon","info","displayName","editMetadatas","metadata","pluginOptions","rows","disabled","editable","hint","description","label","placeholder","size","unique","visible","listMetadatas","listAttributes","convertListLayoutToFieldLayouts","columns","sortable","args","opts","formatMessage","useIntl","currentData","isLoadingDocument","isFetchingDocument","refetch","isLoadingSchema","isSingleType","kind","getTitle","validationSchema","validate","useCallback","Error","validateSync","abortEarly","strict","ValidationError","getYupValidationErrors","getInitialFormValues","isCreatingDocument","form","hasError","slug","origin","useParams","returnId","useContentManagerContext","isLoadingDoc","useForm","isCreatingEntry","hasDraftAndPublish","draftAndPublish","DocumentProvider","useDocumentContext","createContext","DocumentContextProvider","children","initialDocument","onPreview","currentDocumentMeta","changeDocument","useState","documentHistory","setDocumentHistory","rootDocumentMeta","DocumentRBACProvider","useDocumentRBAC","canCreate","canCreateFields","canDelete","canPublish","canRead","canReadFields","canUpdate","canUpdateFields","canUserAction","DocumentRBAC","permissions","contentTypeUid","rawQuery","userPermissions","useAuth","contentTypePermissions","permission","subject","action","slice","allowedActions","useRBAC","extractAndDedupeFields","create","read","update","fieldName","fieldsUserCanAction","fieldType","removeNumericalStrings","componentFieldNames","join","Page","Loading","properties","fields","arr","indexOf","item","prefixPluginTranslations","trad","pluginId","getTranslation","DEFAULT_UNEXPECTED_ERROR_MSG","useDocumentActions","fromPreview","fromRelationModal","trackUsage","useTracking","navigate","useNavigate","setCurrentStep","useGuidedTour","isDeleting","_delete","trackerProperty","isDeletingMany","deleteMany","title","isDiscardingDocument","discard","isPublishing","publish","isPublishingMany","publishMany","isUpdating","unpublish","discardDraft","isUnpublishingMany","unpublishMany","autoClone","clone","_id","restBody","relative","getDoc","delete","ProtectedHistoryPage","then","mod","routes","path","ProtectedPreviewPage","ProtectedEditViewPage","ProtectedListViewPage","ProtectedListConfiguration","ProtectedEditConfigurationPage","ProtectedComponentConfigurationPage","NoPermissions","NoContentType","CollectionTypePages","Navigate","to","CLONE_RELATIVE_PATH","CLONE_PATH","LIST_RELATIVE_PATH","LIST_PATH","element","historyRoutes","previewRoutes","DocumentActions","primaryAction","secondaryAction","restActions","positions","_jsxs","Flex","direction","gap","alignItems","width","DocumentActionButton","variant","DocumentActionsMenu","dialogId","setDialogId","handleClick","e","onClick","dialog","muteDialog","content","timeout","onClose","preventDefault","handleClose","Button","flex","startIcon","justifyContent","paddingTop","paddingBottom","loading","DocumentActionConfirmDialog","isOpen","DocumentActionModal","onModalClose","MenuItem","styled","Menu","Item","theme","isVariantDanger","isDisabled","colors","danger100","setIsOpen","every","Root","open","onOpenChange","Trigger","endIcon","paddingLeft","paddingRight","More","aria-hidden","focusable","VisuallyHidden","tag","Content","maxHeight","popoverPlacement","onSelect","display","color","convertActionVariantToColor","convertActionVariantToIconColor","Fragment","onCancel","onConfirm","handleConfirm","Dialog","Header","Body","Footer","Cancel","fullWidth","footer","Modal","Title","transformData","apiData","mapValues","PublishAction","activeTab","_unstableFormatValidationErrors","formatValidationErrors","isListView","useMatch","isCloning","countDraftRelations","isLoadingDraftRelations","isError","isErrorDraftRelations","useGetDraftRelationCountQuery","localCountOfDraftRelations","setLocalCountOfDraftRelations","serverCountOfDraftRelations","setServerCountOfDraftRelations","modified","setSubmitting","isSubmitting","setErrors","formValues","localDraftRelations","extractDraftRelations","relations","forEach","add","traverseAndExtract","fetchDraftRelationsCount","isDocumentPublished","doc","performPublish","errors","isPublishingRelation","pathname","search","totalDraftRelations","enableDraftRelationsCount","hasDraftRelations","count","UpdateAction","cloneMatch","resetForm","handleUpdate","isEditingRelation","replace","handleKeyDown","metaKey","ctrlKey","window","addEventListener","removeEventListener","UNPUBLISH_DRAFT_OPTIONS","KEEP","DISCARD","UnpublishAction","shouldKeepDraft","setShouldKeepDraft","isDocumentModified","handleChange","Cross","console","WarningCircle","height","Typography","textAlign","Radio","Group","defaultValue","aria-label","onValueChange","checked","DiscardAction","DEFAULT_ACTIONS","intervals","RelativeTime","forwardRef","timestamp","customIntervals","restProps","forwardedRef","formatRelativeTime","formatDate","formatTime","interval","intervalToDuration","start","end","Date","now","unit","intervalUnit","relativeTime","isPast","customInterval","custom","threshold","displayText","text","numeric","time","ref","dateTime","toISOString","role","getDisplayName","firstname","lastname","username","trim","capitalise","str","charAt","toUpperCase","DocumentStatus","statusVariant","Status","fontWeight","isCreating","documentTitle","BackButton","fallback","HeaderToolbar","Box","marginTop","DescriptionComponentRenderer","descriptions","apis","getHeaderActions","HeaderActions","getDocumentActions","headerActions","Information","createAndUpdateDocument","publishedAt","creator","updator","information","isDisplayed","isAnonymous","author","borderWidth","borderStyle","borderColor","padding","marginLeft","marginRight","textColor","SingleSelect","onChange","option","SingleSelectOption","IconButton","HeaderActionDialog","ConfigureTheViewAction","ListPlus","EditTheModelAction","Pencil","DeleteAction","listViewPathMatch","deleteAction","isLocalized","locale","Trash","DEFAULT_HEADER_ACTIONS","Panels","getEditViewSidePanels","Panel","ActionsPanel","ActionsPanelContent","aria-labelledby","background","hasRadius","shadow","textTransform","ConfirmBulkActionDialog","onToggleDialog","dialogBody","endAction","BoldChunk","chunks","ConfirmDialogPublishAll","isConfirmButtonLoading","selectedEntries","useTable","selectedRows","entry","i18n","b","entities","em","Emphasis","Check","TypographyMaxWidth","TableComponent","RawTable","neutral150","spaces","formatErrorMessages","parentKey","messages","currentKey","EntryValidationText","validationErrors","validationErrorsMessages","CrossCircle","Tooltip","ellipsis","CheckCircle","ArrowsCounterClockwise","TABLE_HEADERS","SelectedEntriesTableContent","rowsToDisplay","entriesToPublish","useLocation","shouldDisplayMainField","Table","Head","HeaderCheckboxCell","head","HeaderCell","Row","CheckboxCell","Cell","maxWidth","Loader","small","Link","from","target","PublicationStatusSummary","PublicationStatusGrid","entriesReadyToPublishCount","entriesPublishedCount","entriesModifiedCount","entriesWithErrorsCount","colCount","rowCount","Tbody","Tr","Td","SelectedEntriesModalContent","listViewSelectedEntries","toggleModal","setListViewSelectedDocuments","toString","sort","filters","$in","selectFromResult","restRes","isDialogOpen","setIsDialogOpen","bulkPublishAction","isSubmittingForm","selectedEntry","selectedEntriesWithErrorsCount","selectedEntriesPublishedCount","selectedEntriesModifiedCount","selectedEntriesWithNoErrorsCount","toggleDialog","prev","handleConfirmBulkPublish","unpublishedEntries","documents","hasPublishPermission","showPublishButton","selectRow","refetchList","invalidateTags","actionType","defaultSelectedRows","headers","BulkActionsRenderer","getBulkActions","hasI18nEnabled","Boolean","hasDeletePermission","bulkDeleteAction","handleConfirmBulkDelete","hasDraftAndPublishEnabled","bulkUnpublishAction","handleConfirmBulkUnpublish","showUnpublishButton","confirmButton","DEFAULT_BULK_ACTIONS","AutoCloneFailureModalBody","getDefaultErrorMessage","reason","fieldPath","pathSegment","ChevronRight","style","margin","TableActions","tableRowActions","EditAction","StyledPencil","CloneAction","setProhibitedFields","StyledDuplicate","details","LinkButton","NavLink","Duplicate","DEFAULT_TABLE_ROW_ACTIONS","ContentManagerPlugin","addEditViewSidePanel","editViewSidePanels","getPrintableType","addDocumentAction","documentActions","addDocumentHeaderAction","addBulkAction","bulkActions","injectionZones","bind","flat","constructor","nativeType","HistoryAction","pluginsQueryParams","strapi","features","isEnabled","handleOnClick","destination","ClockCounterClockwise","startsWith","historyAdmin","bootstrap","app","indexOfDeleteAction","findIndex","splice","initialState","collectionTypeLinks","fieldSizes","models","singleTypeLinks","appSlice","createSlice","reducers","setInitialData","authorizedCollectionTypeLinks","authorizedSingleTypeLinks","contentTypeSchemas","payload","reducer","combineReducers","appReducer","previewApi","getPreviewUrl","useGetPreviewUrlQuery","ConditionalTooltip","isShown","PreviewSidePanel","isModified","trackNavigation","destinationPathname","cursor","pointerEvents","tabIndex","previewAdmin","contentManagerPluginApis","register","cm","addReducers","addMenuLink","Feather","intlLabel","router","addRoute","Layout","registerPlugin","registerTrads","locales","importedTrads","Promise","all","catch","resolve"],"mappings":"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"}